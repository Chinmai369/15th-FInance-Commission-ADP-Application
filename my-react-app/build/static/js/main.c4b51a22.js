/*! For license information please see main.c4b51a22.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(202)},153:(e,t,r)=>{var n=r(43),a=Symbol.for("react.element"),l=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,l={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,n)&&!i.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===l[n]&&(l[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:d,props:l,_owner:o.current}}t.Fragment=l,t.jsx=c,t.jsxs=c},202:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),i=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,h={};function g(e,t,r){this.props=e,this.context=t,this.refs=h,this.updater=r||x}function b(){}function v(e,t,r){this.props=e,this.context=t,this.refs=h,this.updater=r||x}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var j=v.prototype=new b;j.constructor=v,f(j,g.prototype),j.isPureReactComponent=!0;var y=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var a,l={},s=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)N.call(t,a)&&!k.hasOwnProperty(a)&&(l[a]=t[a]);var i=arguments.length-2;if(1===i)l.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];l.children=c}if(e&&e.defaultProps)for(a in i=e.defaultProps)void 0===l[a]&&(l[a]=i[a]);return{$$typeof:r,type:e,key:s,ref:o,props:l,_owner:w.current}}function R(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var S=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,a,l,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var i=!1;if(null===e)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case r:case n:i=!0}}if(i)return s=s(i=e),e=""===l?"."+E(i,0):l,y(s)?(a="",null!=e&&(a=e.replace(S,"$&/")+"/"),P(s,t,a,"",function(e){return e})):null!=s&&(R(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+e)),t.push(s)),1;if(i=0,l=""===l?".":l+":",y(e))for(var c=0;c<e.length;c++){var d=l+E(o=e[c],c);i+=P(o,t,a,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)i+=P(o=o.value,t,a,d=l+E(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function L(e,t,r){if(null==e)return e;var n=[],a=0;return P(e,n,"","",function(e){return t.call(r,e,a++)}),n}function F(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},_={transition:null},I={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:_,ReactCurrentOwner:w};function T(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:L,forEach:function(e,t,r){L(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=s,t.PureComponent=v,t.StrictMode=l,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=T,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=f({},e.props),l=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=w.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==i?i[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];a.children=i}return{$$typeof:r,type:e.type,key:l,ref:s,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:F}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.transition;_.transition={};try{e()}finally{_.transition=t}},t.unstable_act=T,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<l(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,s=a>>>1;n<s;){var o=2*(n+1)-1,i=e[o],c=o+1,d=e[c];if(0>l(i,r))c<a&&0>l(d,i)?(e[n]=d,e[c]=r,n=c):(e[n]=i,e[o]=r,n=o);else{if(!(c<a&&0>l(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function l(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,i=o.now();t.unstable_now=function(){return o.now()-i}}var c=[],d=[],u=1,p=null,m=3,x=!1,f=!1,h=!1,g="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function y(e){if(h=!1,j(e),!f)if(null!==n(c))f=!0,_(N);else{var t=n(d);null!==t&&I(y,t.startTime-e)}}function N(e,r){f=!1,h&&(h=!1,b(R),R=-1),x=!0;var l=m;try{for(j(r),p=n(c);null!==p&&(!(p.expirationTime>r)||e&&!P());){var s=p.callback;if("function"===typeof s){p.callback=null,m=p.priorityLevel;var o=s(p.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?p.callback=o:p===n(c)&&a(c),j(r)}else a(c);p=n(c)}if(null!==p)var i=!0;else{var u=n(d);null!==u&&I(y,u.startTime-r),i=!1}return i}finally{p=null,m=l,x=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,C=null,R=-1,S=5,E=-1;function P(){return!(t.unstable_now()-E<S)}function L(){if(null!==C){var e=t.unstable_now();E=e;var r=!0;try{r=C(!0,e)}finally{r?w():(k=!1,C=null)}}else k=!1}if("function"===typeof v)w=function(){v(L)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,D=F.port2;F.port1.onmessage=L,w=function(){D.postMessage(null)}}else w=function(){g(L,0)};function _(e){C=e,k||(k=!0,w())}function I(e,r){R=g(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||x||(f=!0,_(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,a,l){var s=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?s+l:s:l=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>s?(e.sortIndex=l,r(d,e),null===n(c)&&e===n(d)&&(h?(b(R),R=-1):h=!0,I(y,l-s))):(e.sortIndex=o,r(c,e),f||x||(f=!0,_(N))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},391:(e,t,r)=>{var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579:(e,t,r)=>{e.exports=r(153)},730:(e,t,r)=>{var n=r(43),a=r(853);function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function i(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},x={};function f(e,t,r,n,a,l,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=s}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){h[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];h[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){h[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){h[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){h[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){h[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){h[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){h[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){h[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,r,n){var a=h.hasOwnProperty(t)?h[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!u.call(x,e)||!u.call(m,e)&&(p.test(e)?x[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,b);h[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,b);h[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,b);h[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){h[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),h.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){h[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var j=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var O,A=Object.assign;function M(e){if(void 0===O)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function W(e,t){if(!e||z)return"";z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),l=n.stack.split("\n"),s=a.length-1,o=l.length-1;1<=s&&0<=o&&a[s]!==l[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==l[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==l[o]){var i="\n"+a[s].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}}while(1<=s&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?M(e):""}function U(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case C:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case R:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case F:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return H(e(t))}catch(r){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=$(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var r=t.checked;return A({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function X(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Y(e,t){J(e,t);var r=V(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(l(91));return A({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(l(92));if(te(r)){if(1<r.length)throw Error(l(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function le(e,t){var r=V(t.value),n=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function pe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function he(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=fe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(me).forEach(function(e){xe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ge=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(l(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(l(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var je=null;function ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,we=null,ke=null;function Ce(e){if(e=va(e)){if("function"!==typeof Ne)throw Error(l(280));var t=e.stateNode;t&&(t=ya(t),Ne(e.stateNode,e.type,t))}}function Re(e){we?ke?ke.push(e):ke=[e]:we=e}function Se(){if(we){var e=we,t=ke;if(ke=we=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Le=!1;function Fe(e,t,r){if(Le)return e(t,r);Le=!0;try{return Ee(e,t,r)}finally{Le=!1,(null!==we||null!==ke)&&(Pe(),Se())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var n=ya(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(l(231,t,typeof r));return r}var _e=!1;if(d)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){_e=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(de){_e=!1}function Te(e,t,r,n,a,l,s,o,i){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Oe=!1,Ae=null,Me=!1,ze=null,We={onError:function(e){Oe=!0,Ae=e}};function Ue(e,t,r,n,a,l,s,o,i){Oe=!1,Ae=null,Te.apply(We,arguments)}function He(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(l(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(l(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(n=a.return)){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return Ve(a),e;if(s===n)return Ve(a),t;s=s.sibling}throw Error(l(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,i=a.child;i;){if(i===r){o=!0,r=a,n=s;break}if(i===n){o=!0,n=a,r=s;break}i=i.sibling}if(!o){for(i=s.child;i;){if(i===r){o=!0,r=s,n=a;break}if(i===n){o=!0,n=s,r=a;break}i=i.sibling}if(!o)throw Error(l(189))}}if(r.alternate!==n)throw Error(l(190))}if(3!==r.tag)throw Error(l(188));return r.stateNode.current===r?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,qe=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Je=a.unstable_now,Ye=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,lt=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/it|0)|0},ot=Math.log,it=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,s=268435455&r;if(0!==s){var o=s&~a;0!==o?n=ut(o):0!==(l&=s)&&(n=ut(l))}else 0!==(s=r&~a)?n=ut(s):0!==l&&(n=ut(l));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(l=t&-t)||16===a&&0!==(4194240&l)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-st(t)),n|=e[r],t&=~a;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ht(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=r}function bt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-st(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var vt=0;function jt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var yt,Nt,wt,kt,Ct,Rt=!1,St=[],Et=null,Pt=null,Lt=null,Ft=new Map,Dt=new Map,_t=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Ot(e,t,r,n,a,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},null!==t&&(null!==(t=va(t))&&Nt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function At(e){var t=ba(e.target);if(null!==t){var r=He(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Be(r)))return e.blockedOn=t,void Ct(e.priority,function(){wt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=va(r))&&Nt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);je=n,r.target.dispatchEvent(n),je=null,t.shift()}return!0}function zt(e,t,r){Mt(e)&&r.delete(t)}function Wt(){Rt=!1,null!==Et&&Mt(Et)&&(Et=null),null!==Pt&&Mt(Pt)&&(Pt=null),null!==Lt&&Mt(Lt)&&(Lt=null),Ft.forEach(zt),Dt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Rt||(Rt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Wt)))}function Ht(e){function t(t){return Ut(t,e)}if(0<St.length){Ut(St[0],e);for(var r=1;r<St.length;r++){var n=St[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Ut(Et,e),null!==Pt&&Ut(Pt,e),null!==Lt&&Ut(Lt,e),Ft.forEach(t),Dt.forEach(t),r=0;r<_t.length;r++)(n=_t[r]).blockedOn===e&&(n.blockedOn=null);for(;0<_t.length&&null===(r=_t[0]).blockedOn;)At(r),null===r.blockedOn&&_t.shift()}var Bt=j.ReactCurrentBatchConfig,Vt=!0;function $t(e,t,r,n){var a=vt,l=Bt.transition;Bt.transition=null;try{vt=1,Gt(e,t,r,n)}finally{vt=a,Bt.transition=l}}function Qt(e,t,r,n){var a=vt,l=Bt.transition;Bt.transition=null;try{vt=4,Gt(e,t,r,n)}finally{vt=a,Bt.transition=l}}function Gt(e,t,r,n){if(Vt){var a=Kt(e,t,r,n);if(null===a)Vn(e,t,n,qt,r),Tt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Et=Ot(Et,e,t,r,n,a),!0;case"dragenter":return Pt=Ot(Pt,e,t,r,n,a),!0;case"mouseover":return Lt=Ot(Lt,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return Ft.set(l,Ot(Ft.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,Dt.set(l,Ot(Dt.get(l)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Tt(e,n),4&t&&-1<It.indexOf(e)){for(;null!==a;){var l=va(a);if(null!==l&&yt(l),null===(l=Kt(e,t,r,n))&&Vn(e,t,n,qt,r),l===a)break;a=l}null!==a&&n.stopPropagation()}else Vn(e,t,n,null,r)}}var qt=null;function Kt(e,t,r,n){if(qt=null,null!==(e=ba(e=ye(n))))if(null===(t=He(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Yt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Yt,n=r.length,a="value"in Jt?Jt.value:Jt.textContent,l=a.length;for(e=0;e<n&&r[e]===a[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===a[l-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,l){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var lr,sr,or,ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(ir),dr=A({},ir,{view:0,detail:0}),ur=ar(dr),pr=A({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(lr=e.screenX-or.screenX,sr=e.screenY-or.screenY):sr=lr=0,or=e),lr)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),mr=ar(pr),xr=ar(A({},pr,{dataTransfer:0})),fr=ar(A({},dr,{relatedTarget:0})),hr=ar(A({},ir,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=A({},ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=ar(gr),vr=ar(A({},ir,{data:0})),jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nr[e])&&!!t[e]}function kr(){return wr}var Cr=A({},dr,{key:function(e){if(e.key){var t=jr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rr=ar(Cr),Sr=ar(A({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=ar(A({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Pr=ar(A({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0})),Lr=A({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fr=ar(Lr),Dr=[9,13,27,32],_r=d&&"CompositionEvent"in window,Ir=null;d&&"documentMode"in document&&(Ir=document.documentMode);var Tr=d&&"TextEvent"in window&&!Ir,Or=d&&(!_r||Ir&&8<Ir&&11>=Ir),Ar=String.fromCharCode(32),Mr=!1;function zr(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hr[e.type]:"textarea"===t}function Vr(e,t,r,n){Re(n),0<(t=Qn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var $r=null,Qr=null;function Gr(e){Mn(e,0)}function qr(e){if(G(ja(e)))return e}function Kr(e,t){if("change"===e)return t}var Xr=!1;if(d){var Jr;if(d){var Yr="oninput"in document;if(!Yr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Yr="function"===typeof Zr.oninput}Jr=Yr}else Jr=!1;Xr=Jr&&(!document.documentMode||9<document.documentMode)}function en(){$r&&($r.detachEvent("onpropertychange",tn),Qr=$r=null)}function tn(e){if("value"===e.propertyName&&qr(Qr)){var t=[];Vr(t,Qr,e,ye(e)),Fe(Gr,t)}}function rn(e,t,r){"focusin"===e?(en(),Qr=r,($r=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qr(Qr)}function an(e,t){if("click"===e)return qr(t)}function ln(e,t){if("input"===e||"change"===e)return qr(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function on(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!u.call(t,a)||!sn(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pn(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=q((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function xn(e){var t=pn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&mn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=void 0===n.end?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=dn(r,l);var s=dn(r,n);a&&s&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=d&&"documentMode"in document&&11>=document.documentMode,hn=null,gn=null,bn=null,vn=!1;function jn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vn||null==hn||hn!==q(n)||("selectionStart"in(n=hn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&on(bn,n)||(bn=n,0<(n=Qn(gn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=hn)))}function yn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Nn={animationend:yn("Animation","AnimationEnd"),animationiteration:yn("Animation","AnimationIteration"),animationstart:yn("Animation","AnimationStart"),transitionend:yn("Transition","TransitionEnd")},wn={},kn={};function Cn(e){if(wn[e])return wn[e];if(!Nn[e])return e;var t,r=Nn[e];for(t in r)if(r.hasOwnProperty(t)&&t in kn)return wn[e]=r[t];return e}d&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);var Rn=Cn("animationend"),Sn=Cn("animationiteration"),En=Cn("animationstart"),Pn=Cn("transitionend"),Ln=new Map,Fn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){Ln.set(e,t),i(t,[e])}for(var _n=0;_n<Fn.length;_n++){var In=Fn[_n];Dn(In.toLowerCase(),"on"+(In[0].toUpperCase()+In.slice(1)))}Dn(Rn,"onAnimationEnd"),Dn(Sn,"onAnimationIteration"),Dn(En,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(Pn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),On=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tn));function An(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,s,o,i,c){if(Ue.apply(this,arguments),Oe){if(!Oe)throw Error(l(198));var d=Ae;Oe=!1,Ae=null,Me||(Me=!0,ze=d)}}(n,t,void 0,e),e.currentTarget=null}function Mn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],i=o.instance,c=o.currentTarget;if(o=o.listener,i!==l&&a.isPropagationStopped())break e;An(a,o,c),l=i}else for(s=0;s<n.length;s++){if(i=(o=n[s]).instance,c=o.currentTarget,o=o.listener,i!==l&&a.isPropagationStopped())break e;An(a,o,c),l=i}}}if(Me)throw e=ze,Me=!1,ze=null,e}function zn(e,t){var r=t[fa];void 0===r&&(r=t[fa]=new Set);var n=e+"__bubble";r.has(n)||(Bn(t,e,2,!1),r.add(n))}function Wn(e,t,r){var n=0;t&&(n|=4),Bn(r,e,n,t)}var Un="_reactListening"+Math.random().toString(36).slice(2);function Hn(e){if(!e[Un]){e[Un]=!0,s.forEach(function(t){"selectionchange"!==t&&(On.has(t)||Wn(t,!1,e),Wn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Un]||(t[Un]=!0,Wn("selectionchange",!1,t))}}function Bn(e,t,r,n){switch(Xt(t)){case 1:var a=$t;break;case 4:a=Qt;break;default:a=Gt}r=a.bind(null,t,r,e),a=void 0,!_e||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Vn(e,t,r,n,a){var l=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=n.return;null!==s;){var i=s.tag;if((3===i||4===i)&&((i=s.stateNode.containerInfo)===a||8===i.nodeType&&i.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=ba(o)))return;if(5===(i=s.tag)||6===i){n=l=s;continue e}o=o.parentNode}}n=n.return}Fe(function(){var n=l,a=ye(r),s=[];e:{var o=Ln.get(e);if(void 0!==o){var i=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":i=Rr;break;case"focusin":c="focus",i=fr;break;case"focusout":c="blur",i=fr;break;case"beforeblur":case"afterblur":i=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=xr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=Er;break;case Rn:case Sn:case En:i=hr;break;case Pn:i=Pr;break;case"scroll":i=ur;break;case"wheel":i=Fr;break;case"copy":case"cut":case"paste":i=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=Sr}var d=0!==(4&t),u=!d&&"scroll"===e,p=d?null!==o?o+"Capture":null:o;d=[];for(var m,x=n;null!==x;){var f=(m=x).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==p&&(null!=(f=De(x,p))&&d.push($n(x,f,m)))),u)break;x=x.return}0<d.length&&(o=new i(o,c,null,r,a),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(i="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===je||!(c=r.relatedTarget||r.fromElement)||!ba(c)&&!c[xa])&&(i||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=n,null!==(c=(c=r.relatedTarget||r.toElement)?ba(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(i=null,c=n),i!==c)){if(d=mr,f="onMouseLeave",p="onMouseEnter",x="mouse","pointerout"!==e&&"pointerover"!==e||(d=Sr,f="onPointerLeave",p="onPointerEnter",x="pointer"),u=null==i?o:ja(i),m=null==c?o:ja(c),(o=new d(f,x+"leave",i,r,a)).target=u,o.relatedTarget=m,f=null,ba(a)===n&&((d=new d(p,x+"enter",c,r,a)).target=m,d.relatedTarget=u,f=d),u=f,i&&c)e:{for(p=c,x=0,m=d=i;m;m=Gn(m))x++;for(m=0,f=p;f;f=Gn(f))m++;for(;0<x-m;)d=Gn(d),x--;for(;0<m-x;)p=Gn(p),m--;for(;x--;){if(d===p||null!==p&&d===p.alternate)break e;d=Gn(d),p=Gn(p)}d=null}else d=null;null!==i&&qn(s,o,i,d,!1),null!==c&&null!==u&&qn(s,u,c,d,!0)}if("select"===(i=(o=n?ja(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===i&&"file"===o.type)var h=Kr;else if(Br(o))if(Xr)h=ln;else{h=nn;var g=rn}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(h=an);switch(h&&(h=h(e,n))?Vr(s,h,r,a):(g&&g(e,o,n),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=n?ja(n):window,e){case"focusin":(Br(g)||"true"===g.contentEditable)&&(hn=g,gn=n,bn=null);break;case"focusout":bn=gn=hn=null;break;case"mousedown":vn=!0;break;case"contextmenu":case"mouseup":case"dragend":vn=!1,jn(s,r,a);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":jn(s,r,a)}var b;if(_r)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ur?zr(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Or&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==v?"onCompositionEnd"===v&&Ur&&(b=er()):(Yt="value"in(Jt=a)?Jt.value:Jt.textContent,Ur=!0)),0<(g=Qn(n,v)).length&&(v=new vr(v,e,null,r,a),s.push({event:v,listeners:g}),b?v.data=b:null!==(b=Wr(r))&&(v.data=b))),(b=Tr?function(e,t){switch(e){case"compositionend":return Wr(t);case"keypress":return 32!==t.which?null:(Mr=!0,Ar);case"textInput":return(e=t.data)===Ar&&Mr?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!_r&&zr(e,t)?(e=er(),Zt=Yt=Jt=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Or&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Qn(n,"onBeforeInput")).length&&(a=new vr("onBeforeInput","beforeinput",null,r,a),s.push({event:a,listeners:n}),a.data=b))}Mn(s,t)})}function $n(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,l=a.stateNode;5===a.tag&&null!==l&&(a=l,null!=(l=De(e,r))&&n.unshift($n(e,l,a)),null!=(l=De(e,t))&&n.push($n(e,l,a))),e=e.return}return n}function Gn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qn(e,t,r,n,a){for(var l=t._reactName,s=[];null!==r&&r!==n;){var o=r,i=o.alternate,c=o.stateNode;if(null!==i&&i===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(i=De(r,l))&&s.unshift($n(r,i,o)):a||null!=(i=De(r,l))&&s.push($n(r,i,o))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Kn=/\r\n?/g,Xn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Kn,"\n").replace(Xn,"")}function Yn(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(l(425))}function Zn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,la="function"===typeof Promise?Promise:void 0,sa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof la?function(e){return la.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout(function(){throw e})}function ia(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void Ht(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);Ht(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),pa="__reactFiber$"+ua,ma="__reactProps$"+ua,xa="__reactContainer$"+ua,fa="__reactEvents$"+ua,ha="__reactListeners$"+ua,ga="__reactHandles$"+ua;function ba(e){var t=e[pa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xa]||r[pa]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[pa])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function va(e){return!(e=e[pa]||e[xa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ja(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function ya(e){return e[ma]||null}var Na=[],wa=-1;function ka(e){return{current:e}}function Ca(e){0>wa||(e.current=Na[wa],Na[wa]=null,wa--)}function Ra(e,t){wa++,Na[wa]=e.current,e.current=t}var Sa={},Ea=ka(Sa),Pa=ka(!1),La=Sa;function Fa(e,t){var r=e.type.contextTypes;if(!r)return Sa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,l={};for(a in r)l[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Da(e){return null!==(e=e.childContextTypes)&&void 0!==e}function _a(){Ca(Pa),Ca(Ea)}function Ia(e,t,r){if(Ea.current!==Sa)throw Error(l(168));Ra(Ea,t),Ra(Pa,r)}function Ta(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(l(108,B(e)||"Unknown",a));return A({},r,n)}function Oa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sa,La=Ea.current,Ra(Ea,e),Ra(Pa,Pa.current),!0}function Aa(e,t,r){var n=e.stateNode;if(!n)throw Error(l(169));r?(e=Ta(e,t,La),n.__reactInternalMemoizedMergedChildContext=e,Ca(Pa),Ca(Ea),Ra(Ea,e)):Ca(Pa),Ra(Pa,r)}var Ma=null,za=!1,Wa=!1;function Ua(e){null===Ma?Ma=[e]:Ma.push(e)}function Ha(){if(!Wa&&null!==Ma){Wa=!0;var e=0,t=vt;try{var r=Ma;for(vt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ma=null,za=!1}catch(a){throw null!==Ma&&(Ma=Ma.slice(e+1)),Ge(Ze,Ha),a}finally{vt=t,Wa=!1}}return null}var Ba=[],Va=0,$a=null,Qa=0,Ga=[],qa=0,Ka=null,Xa=1,Ja="";function Ya(e,t){Ba[Va++]=Qa,Ba[Va++]=$a,$a=e,Qa=t}function Za(e,t,r){Ga[qa++]=Xa,Ga[qa++]=Ja,Ga[qa++]=Ka,Ka=e;var n=Xa;e=Ja;var a=32-st(n)-1;n&=~(1<<a),r+=1;var l=32-st(t)+a;if(30<l){var s=a-a%5;l=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Xa=1<<32-st(t)+a|r<<a|n,Ja=l+e}else Xa=1<<l|r<<a|n,Ja=e}function el(e){null!==e.return&&(Ya(e,1),Za(e,1,0))}function tl(e){for(;e===$a;)$a=Ba[--Va],Ba[Va]=null,Qa=Ba[--Va],Ba[Va]=null;for(;e===Ka;)Ka=Ga[--qa],Ga[qa]=null,Ja=Ga[--qa],Ga[qa]=null,Xa=Ga[--qa],Ga[qa]=null}var rl=null,nl=null,al=!1,ll=null;function sl(e,t){var r=Fc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ol(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rl=e,nl=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rl=e,nl=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ka?{id:Xa,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Fc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rl=e,nl=null,!0);default:return!1}}function il(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cl(e){if(al){var t=nl;if(t){var r=t;if(!ol(e,t)){if(il(e))throw Error(l(418));t=ca(r.nextSibling);var n=rl;t&&ol(e,t)?sl(n,r):(e.flags=-4097&e.flags|2,al=!1,rl=e)}}else{if(il(e))throw Error(l(418));e.flags=-4097&e.flags|2,al=!1,rl=e}}}function dl(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rl=e}function ul(e){if(e!==rl)return!1;if(!al)return dl(e),al=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=nl)){if(il(e))throw pl(),Error(l(418));for(;t;)sl(e,t),t=ca(t.nextSibling)}if(dl(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){nl=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}nl=null}}else nl=rl?ca(e.stateNode.nextSibling):null;return!0}function pl(){for(var e=nl;e;)e=ca(e.nextSibling)}function ml(){nl=rl=null,al=!1}function xl(e){null===ll?ll=[e]:ll.push(e)}var fl=j.ReactCurrentBatchConfig;function hl(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(l(309));var n=r.stateNode}if(!n)throw Error(l(147,e));var a=n,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=a.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(l(284));if(!r._owner)throw Error(l(290,e))}return e}function gl(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bl(e){return(0,e._init)(e._payload)}function vl(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=_c(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function i(e,t,r,n){return null===t||6!==t.tag?((t=Ac(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var l=r.type;return l===w?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===D&&bl(l)===t.type)?((n=a(t,r.props)).ref=hl(e,t,r),n.return=e,n):((n=Ic(r.type,r.key,r.props,null,e.mode,n)).ref=hl(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Mc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,l){return null===t||7!==t.tag?((t=Tc(r,e.mode,n,l)).return=e,t):((t=a(t,r)).return=e,t)}function p(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ac(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case y:return(r=Ic(t.type,t.key,t.props,null,e.mode,r)).ref=hl(e,null,t),r.return=e,r;case N:return(t=Mc(t,e.mode,r)).return=e,t;case D:return p(e,(0,t._init)(t._payload),r)}if(te(t)||T(t))return(t=Tc(t,e.mode,r,null)).return=e,t;gl(e,t)}return null}function m(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:i(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case y:return r.key===a?c(e,t,r,n):null;case N:return r.key===a?d(e,t,r,n):null;case D:return m(e,t,(a=r._init)(r._payload),n)}if(te(r)||T(r))return null!==a?null:u(e,t,r,n,null);gl(e,r)}return null}function x(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return i(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case y:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case N:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case D:return x(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||T(n))return u(t,e=e.get(r)||null,n,a,null);gl(t,n)}return null}function f(a,l,o,i){for(var c=null,d=null,u=l,f=l=0,h=null;null!==u&&f<o.length;f++){u.index>f?(h=u,u=null):h=u.sibling;var g=m(a,u,o[f],i);if(null===g){null===u&&(u=h);break}e&&u&&null===g.alternate&&t(a,u),l=s(g,l,f),null===d?c=g:d.sibling=g,d=g,u=h}if(f===o.length)return r(a,u),al&&Ya(a,f),c;if(null===u){for(;f<o.length;f++)null!==(u=p(a,o[f],i))&&(l=s(u,l,f),null===d?c=u:d.sibling=u,d=u);return al&&Ya(a,f),c}for(u=n(a,u);f<o.length;f++)null!==(h=x(u,a,f,o[f],i))&&(e&&null!==h.alternate&&u.delete(null===h.key?f:h.key),l=s(h,l,f),null===d?c=h:d.sibling=h,d=h);return e&&u.forEach(function(e){return t(a,e)}),al&&Ya(a,f),c}function h(a,o,i,c){var d=T(i);if("function"!==typeof d)throw Error(l(150));if(null==(i=d.call(i)))throw Error(l(151));for(var u=d=null,f=o,h=o=0,g=null,b=i.next();null!==f&&!b.done;h++,b=i.next()){f.index>h?(g=f,f=null):g=f.sibling;var v=m(a,f,b.value,c);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(a,f),o=s(v,o,h),null===u?d=v:u.sibling=v,u=v,f=g}if(b.done)return r(a,f),al&&Ya(a,h),d;if(null===f){for(;!b.done;h++,b=i.next())null!==(b=p(a,b.value,c))&&(o=s(b,o,h),null===u?d=b:u.sibling=b,u=b);return al&&Ya(a,h),d}for(f=n(a,f);!b.done;h++,b=i.next())null!==(b=x(f,a,h,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?h:b.key),o=s(b,o,h),null===u?d=b:u.sibling=b,u=b);return e&&f.forEach(function(e){return t(a,e)}),al&&Ya(a,h),d}return function e(n,l,s,i){if("object"===typeof s&&null!==s&&s.type===w&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case y:e:{for(var c=s.key,d=l;null!==d;){if(d.key===c){if((c=s.type)===w){if(7===d.tag){r(n,d.sibling),(l=a(d,s.props.children)).return=n,n=l;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&bl(c)===d.type){r(n,d.sibling),(l=a(d,s.props)).ref=hl(n,d,s),l.return=n,n=l;break e}r(n,d);break}t(n,d),d=d.sibling}s.type===w?((l=Tc(s.props.children,n.mode,i,s.key)).return=n,n=l):((i=Ic(s.type,s.key,s.props,null,n.mode,i)).ref=hl(n,l,s),i.return=n,n=i)}return o(n);case N:e:{for(d=s.key;null!==l;){if(l.key===d){if(4===l.tag&&l.stateNode.containerInfo===s.containerInfo&&l.stateNode.implementation===s.implementation){r(n,l.sibling),(l=a(l,s.children||[])).return=n,n=l;break e}r(n,l);break}t(n,l),l=l.sibling}(l=Mc(s,n.mode,i)).return=n,n=l}return o(n);case D:return e(n,l,(d=s._init)(s._payload),i)}if(te(s))return f(n,l,s,i);if(T(s))return h(n,l,s,i);gl(n,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==l&&6===l.tag?(r(n,l.sibling),(l=a(l,s)).return=n,n=l):(r(n,l),(l=Ac(s,n.mode,i)).return=n,n=l),o(n)):r(n,l)}}var jl=vl(!0),yl=vl(!1),Nl=ka(null),wl=null,kl=null,Cl=null;function Rl(){Cl=kl=wl=null}function Sl(e){var t=Nl.current;Ca(Nl),e._currentValue=t}function El(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Pl(e,t){wl=e,Cl=kl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ll(e){var t=e._currentValue;if(Cl!==e)if(e={context:e,memoizedValue:t,next:null},null===kl){if(null===wl)throw Error(l(308));kl=e,wl.dependencies={lanes:0,firstContext:e}}else kl=kl.next=e;return t}var Fl=null;function Dl(e){null===Fl?Fl=[e]:Fl.push(e)}function _l(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Dl(t)):(r.next=a.next,a.next=r),t.interleaved=r,Il(e,n)}function Il(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Tl=!1;function Ol(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Al(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ml(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zl(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Ei)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Il(e,r)}return null===(a=n.interleaved)?(t.next=t,Dl(n)):(t.next=a.next,a.next=t),n.interleaved=t,Il(e,r)}function Wl(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}function Ul(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,l=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===l?a=l=s:l=l.next=s,r=r.next}while(null!==r);null===l?a=l=t:l=l.next=t}else a=l=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Hl(e,t,r,n){var a=e.updateQueue;Tl=!1;var l=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var i=o,c=i.next;i.next=null,null===s?l=c:s.next=c,s=i;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=i))}if(null!==l){var u=a.baseState;for(s=0,d=c=i=null,o=l;;){var p=o.lane,m=o.eventTime;if((n&p)===p){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=e,f=o;switch(p=t,m=r,f.tag){case 1:if("function"===typeof(x=f.payload)){u=x.call(m,u,p);break e}u=x;break e;case 3:x.flags=-65537&x.flags|128;case 0:if(null===(p="function"===typeof(x=f.payload)?x.call(m,u,p):x)||void 0===p)break e;u=A({},u,p);break e;case 2:Tl=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,i=u):d=d.next=m,s|=p;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(p=o).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===d&&(i=u),a.baseState=i,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{s|=a.lane,a=a.next}while(a!==t)}else null===l&&(a.shared.lanes=0);Oi|=s,e.lanes=s,e.memoizedState=u}}function Bl(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(l(191,a));a.call(n)}}}var Vl={},$l=ka(Vl),Ql=ka(Vl),Gl=ka(Vl);function ql(e){if(e===Vl)throw Error(l(174));return e}function Kl(e,t){switch(Ra(Gl,t),Ra(Ql,e),Ra($l,Vl),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ie(null,"");break;default:t=ie(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca($l),Ra($l,t)}function Xl(){Ca($l),Ca(Ql),Ca(Gl)}function Jl(e){ql(Gl.current);var t=ql($l.current),r=ie(t,e.type);t!==r&&(Ra(Ql,e),Ra($l,r))}function Yl(e){Ql.current===e&&(Ca($l),Ca(Ql))}var Zl=ka(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function rs(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var ns=j.ReactCurrentDispatcher,as=j.ReactCurrentBatchConfig,ls=0,ss=null,os=null,is=null,cs=!1,ds=!1,us=0,ps=0;function ms(){throw Error(l(321))}function xs(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function fs(e,t,r,n,a,s){if(ls=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ns.current=null===e||null===e.memoizedState?Ys:Zs,e=r(n,a),ds){s=0;do{if(ds=!1,us=0,25<=s)throw Error(l(301));s+=1,is=os=null,t.updateQueue=null,ns.current=eo,e=r(n,a)}while(ds)}if(ns.current=Js,t=null!==os&&null!==os.next,ls=0,is=os=ss=null,cs=!1,t)throw Error(l(300));return e}function hs(){var e=0!==us;return us=0,e}function gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===is?ss.memoizedState=is=e:is=is.next=e,is}function bs(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===is?ss.memoizedState:is.next;if(null!==t)is=t,os=e;else{if(null===e)throw Error(l(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===is?ss.memoizedState=is=e:is=is.next=e}return is}function vs(e,t){return"function"===typeof t?t(e):t}function js(e){var t=bs(),r=t.queue;if(null===r)throw Error(l(311));r.lastRenderedReducer=e;var n=os,a=n.baseQueue,s=r.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(null!==a){s=a.next,n=n.baseState;var i=o=null,c=null,d=s;do{var u=d.lane;if((ls&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(i=c=p,o=n):c=c.next=p,ss.lanes|=u,Oi|=u}d=d.next}while(null!==d&&d!==s);null===c?o=n:c.next=i,sn(n,t.memoizedState)||(vo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{s=a.lane,ss.lanes|=s,Oi|=s,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ys(e){var t=bs(),r=t.queue;if(null===r)throw Error(l(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);sn(s,t.memoizedState)||(vo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Ns(){}function ws(e,t){var r=ss,n=bs(),a=t(),s=!sn(n.memoizedState,a);if(s&&(n.memoizedState=a,vo=!0),n=n.queue,Ts(Rs.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==is&&1&is.memoizedState.tag){if(r.flags|=2048,Ls(9,Cs.bind(null,r,n,a,t),void 0,null),null===Pi)throw Error(l(349));0!==(30&ls)||ks(r,t,a)}return a}function ks(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Cs(e,t,r,n){t.value=r,t.getSnapshot=n,Ss(t)&&Es(e)}function Rs(e,t,r){return r(function(){Ss(t)&&Es(e)})}function Ss(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(n){return!0}}function Es(e){var t=Il(e,1);null!==t&&rc(t,e,1,-1)}function Ps(e){var t=gs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Gs.bind(null,ss,e),[t.memoizedState,e]}function Ls(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Fs(){return bs().memoizedState}function Ds(e,t,r,n){var a=gs();ss.flags|=e,a.memoizedState=Ls(1|t,r,void 0,void 0===n?null:n)}function _s(e,t,r,n){var a=bs();n=void 0===n?null:n;var l=void 0;if(null!==os){var s=os.memoizedState;if(l=s.destroy,null!==n&&xs(n,s.deps))return void(a.memoizedState=Ls(t,r,l,n))}ss.flags|=e,a.memoizedState=Ls(1|t,r,l,n)}function Is(e,t){return Ds(8390656,8,e,t)}function Ts(e,t){return _s(2048,8,e,t)}function Os(e,t){return _s(4,2,e,t)}function As(e,t){return _s(4,4,e,t)}function Ms(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zs(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,_s(4,4,Ms.bind(null,t,e),r)}function Ws(){}function Us(e,t){var r=bs();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&xs(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Hs(e,t){var r=bs();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&xs(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Bs(e,t,r){return 0===(21&ls)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=r):(sn(r,t)||(r=ft(),ss.lanes|=r,Oi|=r,e.baseState=!0),t)}function Vs(e,t){var r=vt;vt=0!==r&&4>r?r:4,e(!0);var n=as.transition;as.transition={};try{e(!1),t()}finally{vt=r,as.transition=n}}function $s(){return bs().memoizedState}function Qs(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qs(e))Ks(t,r);else if(null!==(r=_l(e,t,r,n))){rc(r,e,n,ec()),Xs(r,t,n)}}function Gs(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qs(e))Ks(t,a);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=l(s,r);if(a.hasEagerState=!0,a.eagerState=o,sn(o,s)){var i=t.interleaved;return null===i?(a.next=a,Dl(t)):(a.next=i.next,i.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=_l(e,t,a,n))&&(rc(r,e,n,a=ec()),Xs(r,t,n))}}function qs(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Ks(e,t){ds=cs=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Xs(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}var Js={readContext:Ll,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useInsertionEffect:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useSyncExternalStore:ms,useId:ms,unstable_isNewReconciler:!1},Ys={readContext:Ll,useCallback:function(e,t){return gs().memoizedState=[e,void 0===t?null:t],e},useContext:Ll,useEffect:Is,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ds(4194308,4,Ms.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ds(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ds(4,2,e,t)},useMemo:function(e,t){var r=gs();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gs();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Qs.bind(null,ss,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},gs().memoizedState=e},useState:Ps,useDebugValue:Ws,useDeferredValue:function(e){return gs().memoizedState=e},useTransition:function(){var e=Ps(!1),t=e[0];return e=Vs.bind(null,e[1]),gs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ss,a=gs();if(al){if(void 0===r)throw Error(l(407));r=r()}else{if(r=t(),null===Pi)throw Error(l(349));0!==(30&ls)||ks(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,Is(Rs.bind(null,n,s,e),[e]),n.flags|=2048,Ls(9,Cs.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=gs(),t=Pi.identifierPrefix;if(al){var r=Ja;t=":"+t+"R"+(r=(Xa&~(1<<32-st(Xa)-1)).toString(32)+r),0<(r=us++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:Ll,useCallback:Us,useContext:Ll,useEffect:Ts,useImperativeHandle:zs,useInsertionEffect:Os,useLayoutEffect:As,useMemo:Hs,useReducer:js,useRef:Fs,useState:function(){return js(vs)},useDebugValue:Ws,useDeferredValue:function(e){return Bs(bs(),os.memoizedState,e)},useTransition:function(){return[js(vs)[0],bs().memoizedState]},useMutableSource:Ns,useSyncExternalStore:ws,useId:$s,unstable_isNewReconciler:!1},eo={readContext:Ll,useCallback:Us,useContext:Ll,useEffect:Ts,useImperativeHandle:zs,useInsertionEffect:Os,useLayoutEffect:As,useMemo:Hs,useReducer:ys,useRef:Fs,useState:function(){return ys(vs)},useDebugValue:Ws,useDeferredValue:function(e){var t=bs();return null===os?t.memoizedState=e:Bs(t,os.memoizedState,e)},useTransition:function(){return[ys(vs)[0],bs().memoizedState]},useMutableSource:Ns,useSyncExternalStore:ws,useId:$s,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=A({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:A({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),l=Ml(n,a);l.payload=t,void 0!==r&&null!==r&&(l.callback=r),null!==(t=zl(e,l,a))&&(rc(t,e,a,n),Wl(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),l=Ml(n,a);l.tag=1,l.payload=t,void 0!==r&&null!==r&&(l.callback=r),null!==(t=zl(e,l,a))&&(rc(t,e,a,n),Wl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Ml(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zl(e,a,n))&&(rc(t,e,n,r),Wl(t,e,n))}};function ao(e,t,r,n,a,l,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,l,s):!t.prototype||!t.prototype.isPureReactComponent||(!on(r,n)||!on(a,l))}function lo(e,t,r){var n=!1,a=Sa,l=t.contextType;return"object"===typeof l&&null!==l?l=Ll(l):(a=Da(t)?La:Ea.current,l=(n=null!==(n=t.contextTypes)&&void 0!==n)?Fa(e,a):Sa),t=new t(r,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function so(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ol(e);var l=t.contextType;"object"===typeof l&&null!==l?a.context=Ll(l):(l=Da(t)?La:Ea.current,a.context=Fa(e,l)),a.state=e.memoizedState,"function"===typeof(l=t.getDerivedStateFromProps)&&(ro(e,t,l,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),Hl(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function io(e,t){try{var r="",n=t;do{r+=U(n),n=n.return}while(n);var a=r}catch(l){a="\nError generating stack: "+l.message+"\n"+l.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var po="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,r){(r=Ml(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vi||(Vi=!0,$i=n),uo(0,t)},r}function xo(e,t,r){(r=Ml(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){uo(0,t)}}var l=e.stateNode;return null!==l&&"function"===typeof l.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===Qi?Qi=new Set([this]):Qi.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fo(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new po;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Cc.bind(null,e,t,r),t.then(e,e))}function ho(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ml(-1,1)).tag=2,zl(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bo=j.ReactCurrentOwner,vo=!1;function jo(e,t,r,n){t.child=null===e?yl(t,null,r,n):jl(t,e.child,r,n)}function yo(e,t,r,n,a){r=r.render;var l=t.ref;return Pl(t,a),n=fs(e,t,r,n,l,a),r=hs(),null===e||vo?(al&&r&&el(t),t.flags|=1,jo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vo(e,t,a))}function No(e,t,r,n,a){if(null===e){var l=r.type;return"function"!==typeof l||Dc(l)||void 0!==l.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ic(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,wo(e,t,l,n,a))}if(l=e.child,0===(e.lanes&a)){var s=l.memoizedProps;if((r=null!==(r=r.compare)?r:on)(s,n)&&e.ref===t.ref)return Vo(e,t,a)}return t.flags|=1,(e=_c(l,n)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,r,n,a){if(null!==e){var l=e.memoizedProps;if(on(l,n)&&e.ref===t.ref){if(vo=!1,t.pendingProps=n=l,0===(e.lanes&a))return t.lanes=e.lanes,Vo(e,t,a);0!==(131072&e.flags)&&(vo=!0)}}return Ro(e,t,r,n,a)}function ko(e,t,r){var n=t.pendingProps,a=n.children,l=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ra(_i,Di),Di|=r;else{if(0===(1073741824&r))return e=null!==l?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ra(_i,Di),Di|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==l?l.baseLanes:r,Ra(_i,Di),Di|=n}else null!==l?(n=l.baseLanes|r,t.memoizedState=null):n=r,Ra(_i,Di),Di|=n;return jo(e,t,a,r),t.child}function Co(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ro(e,t,r,n,a){var l=Da(r)?La:Ea.current;return l=Fa(t,l),Pl(t,a),r=fs(e,t,r,n,l,a),n=hs(),null===e||vo?(al&&n&&el(t),t.flags|=1,jo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vo(e,t,a))}function So(e,t,r,n,a){if(Da(r)){var l=!0;Oa(t)}else l=!1;if(Pl(t,a),null===t.stateNode)Bo(e,t),lo(t,r,n),oo(t,r,n,a),n=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var i=s.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ll(c):c=Fa(t,c=Da(r)?La:Ea.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==n||i!==c)&&so(t,s,n,c),Tl=!1;var p=t.memoizedState;s.state=p,Hl(t,n,s,a),i=t.memoizedState,o!==n||p!==i||Pa.current||Tl?("function"===typeof d&&(ro(t,r,d,n),i=t.memoizedState),(o=Tl||ao(t,r,o,n,p,i,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=i),s.props=n,s.state=i,s.context=c,n=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Al(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,u=t.pendingProps,p=s.context,"object"===typeof(i=r.contextType)&&null!==i?i=Ll(i):i=Fa(t,i=Da(r)?La:Ea.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==u||p!==i)&&so(t,s,n,i),Tl=!1,p=t.memoizedState,s.state=p,Hl(t,n,s,a);var x=t.memoizedState;o!==u||p!==x||Pa.current||Tl?("function"===typeof m&&(ro(t,r,m,n),x=t.memoizedState),(c=Tl||ao(t,r,c,n,p,x,i)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,x,i),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,x,i)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),s.props=n,s.state=x,s.context=i,n=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Eo(e,t,r,n,l,a)}function Eo(e,t,r,n,a,l){Co(e,t);var s=0!==(128&t.flags);if(!n&&!s)return a&&Aa(t,r,!1),Vo(e,t,l);n=t.stateNode,bo.current=t;var o=s&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=jl(t,e.child,null,l),t.child=jl(t,null,o,l)):jo(e,t,o,l),t.memoizedState=n.state,a&&Aa(t,r,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),Kl(e,t.containerInfo)}function Lo(e,t,r,n,a){return ml(),xl(a),t.flags|=256,jo(e,t,r,n),t.child}var Fo,Do,_o,Io,To={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ao(e,t,r){var n,a=t.pendingProps,s=Zl.current,o=!1,i=0!==(128&t.flags);if((n=i)||(n=(null===e||null!==e.memoizedState)&&0!==(2&s)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ra(Zl,1&s),null===e)return cl(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(i=a.children,e=a.fallback,o?(a=t.mode,o=t.child,i={mode:"hidden",children:i},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=i):o=Oc(i,a,0,null),e=Tc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(r),t.memoizedState=To,e):Mo(t,i));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,a,s,o){if(r)return 256&t.flags?(t.flags&=-257,zo(e,t,o,n=co(Error(l(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,a=t.mode,n=Oc({mode:"visible",children:n.children},a,0,null),(s=Tc(s,a,o,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!==(1&t.mode)&&jl(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=To,s);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var i=n.dgst;return n=i,zo(e,t,o,n=co(s=Error(l(419)),n,void 0))}if(i=0!==(o&e.childLanes),vo||i){if(null!==(n=Pi)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,Il(e,a),rc(n,e,a,-1))}return fc(),zo(e,t,o,n=co(Error(l(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,nl=ca(a.nextSibling),rl=t,al=!0,ll=null,null!==e&&(Ga[qa++]=Xa,Ga[qa++]=Ja,Ga[qa++]=Ka,Xa=e.id,Ja=e.overflow,Ka=t),t=Mo(t,n.children),t.flags|=4096,t)}(e,t,i,a,n,s,r);if(o){o=a.fallback,i=t.mode,n=(s=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&i)&&t.child!==s?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=_c(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==n?o=_c(n,o):(o=Tc(o,i,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,i=null===(i=e.child.memoizedState)?Oo(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=To,a}return e=(o=e.child).sibling,a=_c(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Mo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,r,n){return null!==n&&xl(n),jl(t,e.child,null,r),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),El(e.return,t,r)}function Uo(e,t,r,n,a){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function Ho(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(jo(e,t,n.children,r),0!==(2&(n=Zl.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wo(e,r,t);else if(19===e.tag)Wo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ra(Zl,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===es(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Uo(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===es(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Uo(t,!0,r,null,l);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Oi|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(r=_c(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=_c(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function $o(e,t){if(!al)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Go(e,t,r){var n=t.pendingProps;switch(tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Da(t.type)&&_a(),Qo(t),null;case 3:return n=t.stateNode,Xl(),Ca(Pa),Ca(Ea),rs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ul(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ll&&(sc(ll),ll=null))),Do(e,t),Qo(t),null;case 5:Yl(t);var a=ql(Gl.current);if(r=t.type,null!==e&&null!=t.stateNode)_o(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(l(166));return Qo(t),null}if(e=ql($l.current),ul(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[pa]=t,n[ma]=s,e=0!==(1&t.mode),r){case"dialog":zn("cancel",n),zn("close",n);break;case"iframe":case"object":case"embed":zn("load",n);break;case"video":case"audio":for(a=0;a<Tn.length;a++)zn(Tn[a],n);break;case"source":zn("error",n);break;case"img":case"image":case"link":zn("error",n),zn("load",n);break;case"details":zn("toggle",n);break;case"input":X(n,s),zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},zn("invalid",n);break;case"textarea":ae(n,s),zn("invalid",n)}for(var i in be(r,s),a=null,s)if(s.hasOwnProperty(i)){var c=s[i];"children"===i?"string"===typeof c?n.textContent!==c&&(!0!==s.suppressHydrationWarning&&Yn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Yn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(i)&&null!=c&&"onScroll"===i&&zn("scroll",n)}switch(r){case"input":Q(n),Z(n,s,!0);break;case"textarea":Q(n),se(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=Zn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{i=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),"select"===r&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[pa]=t,e[ma]=n,Fo(e,t,!1,!1),t.stateNode=e;e:{switch(i=ve(r,n),r){case"dialog":zn("cancel",e),zn("close",e),a=n;break;case"iframe":case"object":case"embed":zn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Tn.length;a++)zn(Tn[a],e);a=n;break;case"source":zn("error",e),a=n;break;case"img":case"image":case"link":zn("error",e),zn("load",e),a=n;break;case"details":zn("toggle",e),a=n;break;case"input":X(e,n),a=K(e,n),zn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=A({},n,{value:void 0}),zn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),zn("invalid",e)}for(s in be(r,a),c=a)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?he(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===s?"string"===typeof d?("textarea"!==r||""!==d)&&pe(e,d):"number"===typeof d&&pe(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=d&&"onScroll"===s&&zn("scroll",e):null!=d&&v(e,s,d,i))}switch(r){case"input":Q(e),Z(e,n,!1);break;case"textarea":Q(e),se(e);break;case"option":null!=n.value&&e.setAttribute("value",""+V(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?re(e,!!n.multiple,s,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(l(166));if(r=ql(Gl.current),ql($l.current),ul(t)){if(n=t.stateNode,r=t.memoizedProps,n[pa]=t,(s=n.nodeValue!==r)&&null!==(e=rl))switch(e.tag){case 3:Yn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yn(n.nodeValue,r,0!==(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[pa]=t,t.stateNode=n}return Qo(t),null;case 13:if(Ca(Zl),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(al&&null!==nl&&0!==(1&t.mode)&&0===(128&t.flags))pl(),ml(),t.flags|=98560,s=!1;else if(s=ul(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(l(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(l(317));s[pa]=t}else ml(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),s=!1}else null!==ll&&(sc(ll),ll=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zl.current)?0===Ii&&(Ii=3):fc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return Xl(),Do(e,t),null===e&&Hn(t.stateNode.containerInfo),Qo(t),null;case 10:return Sl(t.type._context),Qo(t),null;case 19:if(Ca(Zl),null===(s=t.memoizedState))return Qo(t),null;if(n=0!==(128&t.flags),null===(i=s.rendering))if(n)$o(s,!1);else{if(0!==Ii||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=es(e))){for(t.flags|=128,$o(s,!1),null!==(n=i.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(i=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ra(Zl,1&Zl.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Hi&&(t.flags|=128,n=!0,$o(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=es(i))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),$o(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!al)return Qo(t),null}else 2*Je()-s.renderingStartTime>Hi&&1073741824!==r&&(t.flags|=128,n=!0,$o(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(r=s.last)?r.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,r=Zl.current,Ra(Zl,n?1&r|2:1&r),t):(Qo(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Di)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(l(156,t.tag))}function qo(e,t){switch(tl(t),t.tag){case 1:return Da(t.type)&&_a(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xl(),Ca(Pa),Ca(Ea),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Yl(t),null;case 13:if(Ca(Zl),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));ml()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(Zl),null;case 4:return Xl(),null;case 10:return Sl(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Fo=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Do=function(){},_o=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ql($l.current);var l,s=null;switch(r){case"input":a=K(e,a),n=K(e,n),s=[];break;case"select":a=A({},a,{value:void 0}),n=A({},n,{value:void 0}),s=[];break;case"textarea":a=ne(e,a),n=ne(e,n),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(d in be(r,n),r=null,a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var i=a[d];for(l in i)i.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in n){var c=n[d];if(i=null!=a?a[d]:void 0,n.hasOwnProperty(d)&&c!==i&&(null!=c||null!=i))if("style"===d)if(i){for(l in i)!i.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&i[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(s||(s=[]),s.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,i=i?i.__html:void 0,null!=c&&i!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zn("scroll",e),s||i===c||(s=[])):(s=s||[]).push(d,c))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Io=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ko=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Yo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){kc(e,t,n)}else r.current=null}function ei(e,t,r){try{r()}catch(n){kc(e,t,n)}}var ti=!1;function ri(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,void 0!==l&&ei(t,r,l)}a=a.next}while(a!==n)}}function ni(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ai(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function li(e){var t=e.alternate;null!==t&&(e.alternate=null,li(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pa],delete t[ma],delete t[fa],delete t[ha],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function si(e){return 5===e.tag||3===e.tag||4===e.tag}function oi(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||si(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ii(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(ii(e,t,r),e=e.sibling;null!==e;)ii(e,t,r),e=e.sibling}function ci(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(ci(e,t,r),e=e.sibling;null!==e;)ci(e,t,r),e=e.sibling}var di=null,ui=!1;function pi(e,t,r){for(r=r.child;null!==r;)mi(e,t,r),r=r.sibling}function mi(e,t,r){if(lt&&"function"===typeof lt.onCommitFiberUnmount)try{lt.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Xo||Zo(r,t);case 6:var n=di,a=ui;di=null,pi(e,t,r),ui=a,null!==(di=n)&&(ui?(e=di,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):di.removeChild(r.stateNode));break;case 18:null!==di&&(ui?(e=di,r=r.stateNode,8===e.nodeType?ia(e.parentNode,r):1===e.nodeType&&ia(e,r),Ht(e)):ia(di,r.stateNode));break;case 4:n=di,a=ui,di=r.stateNode.containerInfo,ui=!0,pi(e,t,r),di=n,ui=a;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var l=a,s=l.destroy;l=l.tag,void 0!==s&&(0!==(2&l)||0!==(4&l))&&ei(r,t,s),a=a.next}while(a!==n)}pi(e,t,r);break;case 1:if(!Xo&&(Zo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){kc(r,t,o)}pi(e,t,r);break;case 21:pi(e,t,r);break;case 22:1&r.mode?(Xo=(n=Xo)||null!==r.memoizedState,pi(e,t,r),Xo=n):pi(e,t,r);break;default:pi(e,t,r)}}function xi(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Jo),t.forEach(function(t){var n=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function fi(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var s=e,o=t,i=o;e:for(;null!==i;){switch(i.tag){case 5:di=i.stateNode,ui=!1;break e;case 3:case 4:di=i.stateNode.containerInfo,ui=!0;break e}i=i.return}if(null===di)throw Error(l(160));mi(s,o,a),di=null,ui=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){kc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hi(t,e),t=t.sibling}function hi(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fi(t,e),gi(e),4&n){try{ri(3,e,e.return),ni(3,e)}catch(h){kc(e,e.return,h)}try{ri(5,e,e.return)}catch(h){kc(e,e.return,h)}}break;case 1:fi(t,e),gi(e),512&n&&null!==r&&Zo(r,r.return);break;case 5:if(fi(t,e),gi(e),512&n&&null!==r&&Zo(r,r.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(h){kc(e,e.return,h)}}if(4&n&&null!=(a=e.stateNode)){var s=e.memoizedProps,o=null!==r?r.memoizedProps:s,i=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===i&&"radio"===s.type&&null!=s.name&&J(a,s),ve(i,o);var d=ve(i,s);for(o=0;o<c.length;o+=2){var u=c[o],p=c[o+1];"style"===u?he(a,p):"dangerouslySetInnerHTML"===u?ue(a,p):"children"===u?pe(a,p):v(a,u,p,d)}switch(i){case"input":Y(a,s);break;case"textarea":le(a,s);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var x=s.value;null!=x?re(a,!!s.multiple,x,!1):m!==!!s.multiple&&(null!=s.defaultValue?re(a,!!s.multiple,s.defaultValue,!0):re(a,!!s.multiple,s.multiple?[]:"",!1))}a[ma]=s}catch(h){kc(e,e.return,h)}}break;case 6:if(fi(t,e),gi(e),4&n){if(null===e.stateNode)throw Error(l(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(h){kc(e,e.return,h)}}break;case 3:if(fi(t,e),gi(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(h){kc(e,e.return,h)}break;case 4:default:fi(t,e),gi(e);break;case 13:fi(t,e),gi(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(Ui=Je())),4&n&&xi(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Xo=(d=Xo)||u,fi(t,e),Xo=d):fi(t,e),gi(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Yo=e,u=e.child;null!==u;){for(p=Yo=u;null!==Yo;){switch(x=(m=Yo).child,m.tag){case 0:case 11:case 14:case 15:ri(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){n=m,r=m.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(h){kc(n,r,h)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){yi(p);continue}}null!==x?(x.return=m,Yo=x):yi(p)}u=u.sibling}e:for(u=null,p=e;;){if(5===p.tag){if(null===u){u=p;try{a=p.stateNode,d?"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(i=p.stateNode,o=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,i.style.display=fe("display",o))}catch(h){kc(e,e.return,h)}}}else if(6===p.tag){if(null===u)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(h){kc(e,e.return,h)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:fi(t,e),gi(e),4&n&&xi(e);case 21:}}function gi(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(si(r)){var n=r;break e}r=r.return}throw Error(l(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(pe(a,""),n.flags&=-33),ci(e,oi(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;ii(e,oi(e),s);break;default:throw Error(l(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bi(e,t,r){Yo=e,vi(e,t,r)}function vi(e,t,r){for(var n=0!==(1&e.mode);null!==Yo;){var a=Yo,l=a.child;if(22===a.tag&&n){var s=null!==a.memoizedState||Ko;if(!s){var o=a.alternate,i=null!==o&&null!==o.memoizedState||Xo;o=Ko;var c=Xo;if(Ko=s,(Xo=i)&&!c)for(Yo=a;null!==Yo;)i=(s=Yo).child,22===s.tag&&null!==s.memoizedState?Ni(a):null!==i?(i.return=s,Yo=i):Ni(a);for(;null!==l;)Yo=l,vi(l,t,r),l=l.sibling;Yo=a,Ko=o,Xo=c}ji(e)}else 0!==(8772&a.subtreeFlags)&&null!==l?(l.return=a,Yo=l):ji(e)}}function ji(e){for(;null!==Yo;){var t=Yo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||ni(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Bl(t,s,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Bl(t,o,r)}break;case 5:var i=t.stateNode;if(null===r&&4&t.flags){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var p=u.dehydrated;null!==p&&Ht(p)}}}break;default:throw Error(l(163))}Xo||512&t.flags&&ai(t)}catch(m){kc(t,t.return,m)}}if(t===e){Yo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Yo=r;break}Yo=t.return}}function yi(e){for(;null!==Yo;){var t=Yo;if(t===e){Yo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Yo=r;break}Yo=t.return}}function Ni(e){for(;null!==Yo;){var t=Yo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ni(4,t)}catch(i){kc(t,r,i)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(i){kc(t,a,i)}}var l=t.return;try{ai(t)}catch(i){kc(t,l,i)}break;case 5:var s=t.return;try{ai(t)}catch(i){kc(t,s,i)}}}catch(i){kc(t,t.return,i)}if(t===e){Yo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Yo=o;break}Yo=t.return}}var wi,ki=Math.ceil,Ci=j.ReactCurrentDispatcher,Ri=j.ReactCurrentOwner,Si=j.ReactCurrentBatchConfig,Ei=0,Pi=null,Li=null,Fi=0,Di=0,_i=ka(0),Ii=0,Ti=null,Oi=0,Ai=0,Mi=0,zi=null,Wi=null,Ui=0,Hi=1/0,Bi=null,Vi=!1,$i=null,Qi=null,Gi=!1,qi=null,Ki=0,Xi=0,Ji=null,Yi=-1,Zi=0;function ec(){return 0!==(6&Ei)?Je():-1!==Yi?Yi:Yi=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ei)&&0!==Fi?Fi&-Fi:null!==fl.transition?(0===Zi&&(Zi=ft()),Zi):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,r,n){if(50<Xi)throw Xi=0,Ji=null,Error(l(185));gt(e,r,n),0!==(2&Ei)&&e===Pi||(e===Pi&&(0===(2&Ei)&&(Ai|=r),4===Ii&&oc(e,Fi)),nc(e,n),1===r&&0===Ei&&0===(1&t.mode)&&(Hi=Je()+500,za&&Ha()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var s=31-st(l),o=1<<s,i=a[s];-1===i?0!==(o&r)&&0===(o&n)||(a[s]=mt(o,t)):i<=t&&(e.expiredLanes|=o),l&=~o}}(e,t);var n=pt(e,e===Pi?Fi:0);if(0===n)null!==r&&qe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&qe(r),1===t)0===e.tag?function(e){za=!0,Ua(e)}(ic.bind(null,e)):Ua(ic.bind(null,e)),sa(function(){0===(6&Ei)&&Ha()}),r=null;else{switch(jt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Pc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Yi=-1,Zi=0,0!==(6&Ei))throw Error(l(327));var r=e.callbackNode;if(Nc()&&e.callbackNode!==r)return null;var n=pt(e,e===Pi?Fi:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=hc(e,n);else{t=n;var a=Ei;Ei|=2;var s=xc();for(Pi===e&&Fi===t||(Bi=null,Hi=Je()+500,pc(e,t));;)try{bc();break}catch(i){mc(e,i)}Rl(),Ci.current=s,Ei=a,null!==Li?t=0:(Pi=null,Fi=0,t=Ii)}if(0!==t){if(2===t&&(0!==(a=xt(e))&&(n=a,t=lc(e,a))),1===t)throw r=Ti,pc(e,0),oc(e,n),nc(e,Je()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!sn(l(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=hc(e,n))&&(0!==(s=xt(e))&&(n=s,t=lc(e,s))),1===t))throw r=Ti,pc(e,0),oc(e,n),nc(e,Je()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(l(345));case 2:case 5:yc(e,Wi,Bi);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Ui+500-Je())){if(0!==pt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(yc.bind(null,e,Wi,Bi),t);break}yc(e,Wi,Bi);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-st(n);s=1<<o,(o=t[o])>a&&(a=o),n&=~s}if(n=a,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ki(n/1960))-n)){e.timeoutHandle=na(yc.bind(null,e,Wi,Bi),n);break}yc(e,Wi,Bi);break;default:throw Error(l(329))}}}return nc(e,Je()),e.callbackNode===r?ac.bind(null,e):null}function lc(e,t){var r=zi;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=hc(e,t))&&(t=Wi,Wi=r,null!==t&&sc(t)),e}function sc(e){null===Wi?Wi=e:Wi.push.apply(Wi,e)}function oc(e,t){for(t&=~Mi,t&=~Ai,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),n=1<<r;e[r]=-1,t&=~n}}function ic(e){if(0!==(6&Ei))throw Error(l(327));Nc();var t=pt(e,0);if(0===(1&t))return nc(e,Je()),null;var r=hc(e,t);if(0!==e.tag&&2===r){var n=xt(e);0!==n&&(t=n,r=lc(e,n))}if(1===r)throw r=Ti,pc(e,0),oc(e,t),nc(e,Je()),r;if(6===r)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yc(e,Wi,Bi),nc(e,Je()),null}function cc(e,t){var r=Ei;Ei|=1;try{return e(t)}finally{0===(Ei=r)&&(Hi=Je()+500,za&&Ha())}}function dc(e){null!==qi&&0===qi.tag&&0===(6&Ei)&&Nc();var t=Ei;Ei|=1;var r=Si.transition,n=vt;try{if(Si.transition=null,vt=1,e)return e()}finally{vt=n,Si.transition=r,0===(6&(Ei=t))&&Ha()}}function uc(){Di=_i.current,Ca(_i)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Li)for(r=Li.return;null!==r;){var n=r;switch(tl(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&_a();break;case 3:Xl(),Ca(Pa),Ca(Ea),rs();break;case 5:Yl(n);break;case 4:Xl();break;case 13:case 19:Ca(Zl);break;case 10:Sl(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Pi=e,Li=e=_c(e.current,null),Fi=Di=t,Ii=0,Ti=null,Mi=Ai=Oi=0,Wi=zi=null,null!==Fl){for(t=0;t<Fl.length;t++)if(null!==(n=(r=Fl[t]).interleaved)){r.interleaved=null;var a=n.next,l=r.pending;if(null!==l){var s=l.next;l.next=a,n.next=s}r.pending=n}Fl=null}return e}function mc(e,t){for(;;){var r=Li;try{if(Rl(),ns.current=Js,cs){for(var n=ss.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}cs=!1}if(ls=0,is=os=ss=null,ds=!1,us=0,Ri.current=null,null===r||null===r.return){Ii=1,Ti=t,Li=null;break}e:{var s=e,o=r.return,i=r,c=t;if(t=Fi,i.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=i,p=u.tag;if(0===(1&u.mode)&&(0===p||11===p||15===p)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=ho(o);if(null!==x){x.flags&=-257,go(x,o,i,0,t),1&x.mode&&fo(s,d,t),c=d;var f=(t=x).updateQueue;if(null===f){var h=new Set;h.add(c),t.updateQueue=h}else f.add(c);break e}if(0===(1&t)){fo(s,d,t),fc();break e}c=Error(l(426))}else if(al&&1&i.mode){var g=ho(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,i,0,t),xl(io(c,i));break e}}s=c=io(c,i),4!==Ii&&(Ii=2),null===zi?zi=[s]:zi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ul(s,mo(0,c,t));break e;case 1:i=c;var b=s.type,v=s.stateNode;if(0===(128&s.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Qi||!Qi.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Ul(s,xo(s,i,t));break e}}s=s.return}while(null!==s)}jc(r)}catch(j){t=j,Li===r&&null!==r&&(Li=r=r.return);continue}break}}function xc(){var e=Ci.current;return Ci.current=Js,null===e?Js:e}function fc(){0!==Ii&&3!==Ii&&2!==Ii||(Ii=4),null===Pi||0===(268435455&Oi)&&0===(268435455&Ai)||oc(Pi,Fi)}function hc(e,t){var r=Ei;Ei|=2;var n=xc();for(Pi===e&&Fi===t||(Bi=null,pc(e,t));;)try{gc();break}catch(a){mc(e,a)}if(Rl(),Ei=r,Ci.current=n,null!==Li)throw Error(l(261));return Pi=null,Fi=0,Ii}function gc(){for(;null!==Li;)vc(Li)}function bc(){for(;null!==Li&&!Ke();)vc(Li)}function vc(e){var t=wi(e.alternate,e,Di);e.memoizedProps=e.pendingProps,null===t?jc(e):Li=t,Ri.current=null}function jc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Go(r,t,Di)))return void(Li=r)}else{if(null!==(r=qo(r,t)))return r.flags&=32767,void(Li=r);if(null===e)return Ii=6,void(Li=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Li=t);Li=t=e}while(null!==t);0===Ii&&(Ii=5)}function yc(e,t,r){var n=vt,a=Si.transition;try{Si.transition=null,vt=1,function(e,t,r,n){do{Nc()}while(null!==qi);if(0!==(6&Ei))throw Error(l(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-st(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}(e,s),e===Pi&&(Li=Pi=null,Fi=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Gi||(Gi=!0,Pc(tt,function(){return Nc(),null})),s=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||s){s=Si.transition,Si.transition=null;var o=vt;vt=1;var i=Ei;Ei|=4,Ri.current=null,function(e,t){if(ea=Vt,mn(e=pn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(y){r=null;break e}var o=0,i=-1,c=-1,d=0,u=0,p=e,m=null;t:for(;;){for(var x;p!==r||0!==a&&3!==p.nodeType||(i=o+a),p!==s||0!==n&&3!==p.nodeType||(c=o+n),3===p.nodeType&&(o+=p.nodeValue.length),null!==(x=p.firstChild);)m=p,p=x;for(;;){if(p===e)break t;if(m===r&&++d===a&&(i=o),m===s&&++u===n&&(c=o),null!==(x=p.nextSibling))break;m=(p=m).parentNode}p=x}r=-1===i||-1===c?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Vt=!1,Yo=t;null!==Yo;)if(e=(t=Yo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yo=e;else for(;null!==Yo;){t=Yo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var h=f.memoizedProps,g=f.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?h:to(t.type,h),g);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var j=t.stateNode.containerInfo;1===j.nodeType?j.textContent="":9===j.nodeType&&j.documentElement&&j.removeChild(j.documentElement);break;default:throw Error(l(163))}}catch(y){kc(t,t.return,y)}if(null!==(e=t.sibling)){e.return=t.return,Yo=e;break}Yo=t.return}f=ti,ti=!1}(e,r),hi(r,e),xn(ta),Vt=!!ea,ta=ea=null,e.current=r,bi(r,e,a),Xe(),Ei=i,vt=o,Si.transition=s}else e.current=r;if(Gi&&(Gi=!1,qi=e,Ki=a),s=e.pendingLanes,0===s&&(Qi=null),function(e){if(lt&&"function"===typeof lt.onCommitFiberRoot)try{lt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Vi)throw Vi=!1,e=$i,$i=null,e;0!==(1&Ki)&&0!==e.tag&&Nc(),s=e.pendingLanes,0!==(1&s)?e===Ji?Xi++:(Xi=0,Ji=e):Xi=0,Ha()}(e,t,r,n)}finally{Si.transition=a,vt=n}return null}function Nc(){if(null!==qi){var e=jt(Ki),t=Si.transition,r=vt;try{if(Si.transition=null,vt=16>e?16:e,null===qi)var n=!1;else{if(e=qi,qi=null,Ki=0,0!==(6&Ei))throw Error(l(331));var a=Ei;for(Ei|=4,Yo=e.current;null!==Yo;){var s=Yo,o=s.child;if(0!==(16&Yo.flags)){var i=s.deletions;if(null!==i){for(var c=0;c<i.length;c++){var d=i[c];for(Yo=d;null!==Yo;){var u=Yo;switch(u.tag){case 0:case 11:case 15:ri(8,u,s)}var p=u.child;if(null!==p)p.return=u,Yo=p;else for(;null!==Yo;){var m=(u=Yo).sibling,x=u.return;if(li(u),u===d){Yo=null;break}if(null!==m){m.return=x,Yo=m;break}Yo=x}}}var f=s.alternate;if(null!==f){var h=f.child;if(null!==h){f.child=null;do{var g=h.sibling;h.sibling=null,h=g}while(null!==h)}}Yo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Yo=o;else e:for(;null!==Yo;){if(0!==(2048&(s=Yo).flags))switch(s.tag){case 0:case 11:case 15:ri(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,Yo=b;break e}Yo=s.return}}var v=e.current;for(Yo=v;null!==Yo;){var j=(o=Yo).child;if(0!==(2064&o.subtreeFlags)&&null!==j)j.return=o,Yo=j;else e:for(o=v;null!==Yo;){if(0!==(2048&(i=Yo).flags))try{switch(i.tag){case 0:case 11:case 15:ni(9,i)}}catch(N){kc(i,i.return,N)}if(i===o){Yo=null;break e}var y=i.sibling;if(null!==y){y.return=i.return,Yo=y;break e}Yo=i.return}}if(Ei=a,Ha(),lt&&"function"===typeof lt.onPostCommitFiberRoot)try{lt.onPostCommitFiberRoot(at,e)}catch(N){}n=!0}return n}finally{vt=r,Si.transition=t}}return!1}function wc(e,t,r){e=zl(e,t=mo(0,t=io(r,t),1),1),t=ec(),null!==e&&(gt(e,1,t),nc(e,t))}function kc(e,t,r){if(3===e.tag)wc(e,e,r);else for(;null!==t;){if(3===t.tag){wc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Qi||!Qi.has(n))){t=zl(t,e=xo(t,e=io(r,e),1),1),e=ec(),null!==t&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Pi===e&&(Fi&r)===r&&(4===Ii||3===Ii&&(130023424&Fi)===Fi&&500>Je()-Ui?pc(e,0):Mi|=r),nc(e,t)}function Rc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Il(e,t))&&(gt(e,t,r),nc(e,r))}function Sc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Rc(e,r)}function Ec(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(l(314))}null!==n&&n.delete(t),Rc(e,r)}function Pc(e,t){return Ge(e,t)}function Lc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fc(e,t,r,n){return new Lc(e,t,r,n)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function _c(e,t){var r=e.alternate;return null===r?((r=Fc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ic(e,t,r,n,a,s){var o=2;if(n=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case w:return Tc(r.children,a,s,t);case k:o=8,a|=8;break;case C:return(e=Fc(12,r,t,2|a)).elementType=C,e.lanes=s,e;case P:return(e=Fc(13,r,t,a)).elementType=P,e.lanes=s,e;case L:return(e=Fc(19,r,t,a)).elementType=L,e.lanes=s,e;case _:return Oc(r,a,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case R:o=10;break e;case S:o=9;break e;case E:o=11;break e;case F:o=14;break e;case D:o=16,n=null;break e}throw Error(l(130,null==e?e:typeof e,""))}return(t=Fc(o,r,t,a)).elementType=e,t.type=n,t.lanes=s,t}function Tc(e,t,r,n){return(e=Fc(7,e,n,t)).lanes=r,e}function Oc(e,t,r,n){return(e=Fc(22,e,n,t)).elementType=_,e.lanes=r,e.stateNode={isHidden:!1},e}function Ac(e,t,r){return(e=Fc(6,e,null,t)).lanes=r,e}function Mc(e,t,r){return(t=Fc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ht(0),this.expirationTimes=ht(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ht(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Wc(e,t,r,n,a,l,s,o,i){return e=new zc(e,t,r,o,i),1===t?(t=1,!0===l&&(t|=8)):t=0,l=Fc(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ol(l),e}function Uc(e){if(!e)return Sa;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Da(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(l(171))}if(1===e.tag){var r=e.type;if(Da(r))return Ta(e,r,t)}return t}function Hc(e,t,r,n,a,l,s,o,i){return(e=Wc(r,n,!0,e,0,l,0,o,i)).context=Uc(null),r=e.current,(l=Ml(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,zl(r,l,a),e.current.lanes=a,gt(e,a,n),nc(e,n),e}function Bc(e,t,r,n){var a=t.current,l=ec(),s=tc(a);return r=Uc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ml(l,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=zl(a,t,s))&&(rc(e,a,s,l),Wl(e,a,s)),s}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Qc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}wi=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pa.current)vo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return vo=!1,function(e,t,r){switch(t.tag){case 3:Po(t),ml();break;case 5:Jl(t);break;case 1:Da(t.type)&&Oa(t);break;case 4:Kl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ra(Nl,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ra(Zl,1&Zl.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ao(e,t,r):(Ra(Zl,1&Zl.current),null!==(e=Vo(e,t,r))?e.sibling:null);Ra(Zl,1&Zl.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Ho(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ra(Zl,Zl.current),n)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,r)}return Vo(e,t,r)}(e,t,r);vo=0!==(131072&e.flags)}else vo=!1,al&&0!==(1048576&t.flags)&&Za(t,Qa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Bo(e,t),e=t.pendingProps;var a=Fa(t,Ea.current);Pl(t,r),a=fs(null,t,n,e,a,r);var s=hs();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(n)?(s=!0,Oa(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ol(t),a.updater=no,t.stateNode=a,a._reactInternals=t,oo(t,n,e,r),t=Eo(null,t,n,!0,s,r)):(t.tag=0,al&&s&&el(t),jo(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===F)return 14}return 2}(n),e=to(n,e),a){case 0:t=Ro(null,t,n,e,r);break e;case 1:t=So(null,t,n,e,r);break e;case 11:t=yo(null,t,n,e,r);break e;case 14:t=No(null,t,n,to(n.type,e),r);break e}throw Error(l(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,Ro(e,t,n,a=t.elementType===n?a:to(n,a),r);case 1:return n=t.type,a=t.pendingProps,So(e,t,n,a=t.elementType===n?a:to(n,a),r);case 3:e:{if(Po(t),null===e)throw Error(l(387));n=t.pendingProps,a=(s=t.memoizedState).element,Al(e,t),Hl(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Lo(e,t,n,r,a=io(Error(l(423)),t));break e}if(n!==a){t=Lo(e,t,n,r,a=io(Error(l(424)),t));break e}for(nl=ca(t.stateNode.containerInfo.firstChild),rl=t,al=!0,ll=null,r=yl(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ml(),n===a){t=Vo(e,t,r);break e}jo(e,t,n,r)}t=t.child}return t;case 5:return Jl(t),null===e&&cl(t),n=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==s&&ra(n,s)&&(t.flags|=32),Co(e,t),jo(e,t,o,r),t.child;case 6:return null===e&&cl(t),null;case 13:return Ao(e,t,r);case 4:return Kl(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=jl(t,null,n,r):jo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,yo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 7:return jo(e,t,t.pendingProps,r),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Ra(Nl,n._currentValue),n._currentValue=o,null!==s)if(sn(s.value,o)){if(s.children===a.children&&!Pa.current){t=Vo(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var i=s.dependencies;if(null!==i){o=s.child;for(var c=i.firstContext;null!==c;){if(c.context===n){if(1===s.tag){(c=Ml(-1,r&-r)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),El(s.return,r,t),i.lanes|=r;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(l(341));o.lanes|=r,null!==(i=o.alternate)&&(i.lanes|=r),El(o,r,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}jo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Pl(t,r),n=n(a=Ll(a)),t.flags|=1,jo(e,t,n,r),t.child;case 14:return a=to(n=t.type,t.pendingProps),No(e,t,n,a=to(n.type,a),r);case 15:return wo(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:to(n,a),Bo(e,t),t.tag=1,Da(n)?(e=!0,Oa(t)):e=!1,Pl(t,r),lo(t,n,a),oo(t,n,a,r),Eo(null,t,n,!0,e,r);case 19:return Ho(e,t,r);case 22:return ko(e,t,r)}throw Error(l(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yc(){}function Zc(e,t,r,n,a){var l=r._reactRootContainer;if(l){var s=l;if("function"===typeof a){var o=a;a=function(){var e=Vc(s);o.call(e)}}Bc(t,s,e,a)}else s=function(e,t,r,n,a){if(a){if("function"===typeof n){var l=n;n=function(){var e=Vc(s);l.call(e)}}var s=Hc(t,n,e,0,null,!1,0,"",Yc);return e._reactRootContainer=s,e[xa]=s.current,Hn(8===e.nodeType?e.parentNode:e),dc(),s}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=Vc(i);o.call(e)}}var i=Wc(e,0,!1,null,0,!1,0,"",Yc);return e._reactRootContainer=i,e[xa]=i.current,Hn(8===e.nodeType?e.parentNode:e),dc(function(){Bc(t,i,r,n)}),i}(r,t,e,a,n);return Vc(s)}Kc.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));Bc(e,t,null,null)},Kc.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Bc(null,e,null,null)}),t[xa]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<_t.length&&0!==t&&t<_t[r].priority;r++);_t.splice(r,0,e),0===r&&At(e)}},yt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(bt(t,1|r),nc(t,Je()),0===(6&Ei)&&(Hi=Je()+500,Ha()))}break;case 13:dc(function(){var t=Il(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Qc(e,1)}},Nt=function(e){if(13===e.tag){var t=Il(e,134217728);if(null!==t)rc(t,e,134217728,ec());Qc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),r=Il(e,t);if(null!==r)rc(r,e,t,ec());Qc(e,t)}},kt=function(){return vt},Ct=function(e,t){var r=vt;try{return vt=e,t()}finally{vt=r}},Ne=function(e,t,r){switch(t){case"input":if(Y(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ya(n);if(!a)throw Error(l(90));G(n),Y(n,a)}}}break;case"textarea":le(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[va,ja,ya,Re,Se,cc]},td={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{at=nd.inject(rd),lt=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(l(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Xc(e))throw Error(l(299));var r=!1,n="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Wc(e,1,!1,null,0,r,0,n,a),e[xa]=t.current,Hn(8===e.nodeType?e.parentNode:e),new qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Jc(t))throw Error(l(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Xc(e))throw Error(l(405));var n=null!=r&&r.hydratedSources||null,a=!1,s="",o=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Hc(t,null,e,1,null!=r?r:null,a,0,s,o),e[xa]=t.current,Hn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Kc(t)},t.render=function(e,t,r){if(!Jc(t))throw Error(l(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(l(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[xa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jc(r))throw Error(l(200));if(null==e||void 0===e._reactInternals)throw Error(l(38));return Zc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,r)=>{e.exports=r(234)},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,r),l.exports}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function l(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var l=Object.create(null);r.r(l);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>n[e]);return s.default=()=>n,r.d(l,s),l}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i,c=r(43),d=r.t(c,2),u=r(579);function p(e){let{title:t,user:r,onLogout:n}=e;const a=(l=null===r||void 0===r?void 0:r.role)?"engineer"===l?"Engineer":"Commissioner"===l?"Commissioner":l.charAt(0).toUpperCase()+l.slice(1):"";var l;return(0,u.jsxs)("header",{className:"flex items-center mb-6 relative",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,u.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-400 to-blue-600 flex items-center justify-center shadow-md",children:(0,u.jsx)("img",{src:"/ap-logo.jpeg",alt:"AP Logo",className:"w-9 h-9 rounded"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-semibold text-lg",children:t}),(0,u.jsx)("div",{className:"text-xs text-gray-500",children:"Government of Andhra Pradesh"})]})]}),(0,u.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:r&&(0,u.jsxs)("div",{className:"text-sm font-semibold text-gray-700 whitespace-nowrap",children:["ULB: Vijayawada | Name: ",r.username," | Position: ",a]})}),(0,u.jsx)("div",{className:"flex items-center gap-4 flex-1 justify-end",children:(0,u.jsx)("button",{onClick:n,className:"px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md text-sm",children:"Logout"})})]})}function m(e){let{menuItems:t=[],selectedMenuItem:r,onMenuItemSelect:n,isMenuOpen:a,setIsMenuOpen:l}=e;const[s,o]=(0,c.useState)(!0),[i,d]=(0,c.useState)(""),p=void 0!==a?a:s,m=l||o,x=t.filter(e=>e.label.toLowerCase().includes(i.toLowerCase()));return(0,u.jsxs)(u.Fragment,{children:[!p&&(0,u.jsx)("button",{onClick:()=>m(!p),className:"fixed top-[88px] left-0 z-50 p-2 text-gray-700 hover:text-gray-900 transition-colors","aria-label":"Toggle menu",children:(0,u.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,u.jsxs)("div",{className:"fixed top-20 left-0 w-64 bg-gradient-to-b from-slate-800 to-slate-900 shadow-xl h-[calc(100vh-80px)] border-r border-slate-700 overflow-y-auto z-40 transition-transform duration-300 ".concat(p?"translate-x-0":"-translate-x-full"),children:[(0,u.jsxs)("div",{className:"p-5 border-b border-slate-700 sticky top-0 bg-slate-800",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("h3",{className:"text-base font-bold text-white uppercase tracking-wider",children:"Menu"}),(0,u.jsx)("button",{onClick:()=>m(!p),className:"bg-slate-700 text-white p-1.5 rounded-md hover:bg-slate-600 transition-colors","aria-label":"Close menu",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:"text",placeholder:"Search menu...",value:i,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 pl-9 bg-slate-700 text-white placeholder-slate-400 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:bg-slate-600"}),(0,u.jsx)("svg",{className:"absolute left-2.5 top-2.5 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i&&(0,u.jsx)("button",{onClick:()=>d(""),className:"absolute right-2.5 top-2.5 text-slate-400 hover:text-white","aria-label":"Clear search",children:(0,u.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,u.jsx)("nav",{className:"p-2 space-y-1",children:x.length>0?x.map(e=>(0,u.jsxs)("button",{onClick:()=>{n(e.id)},className:"w-full flex items-center gap-2 px-2.5 py-1.5 rounded-md text-left transition-all duration-200 ".concat(r===e.id?"bg-emerald-600 text-white font-semibold shadow-lg transform scale-[1.02] border-l-4 border-emerald-300":"text-slate-300 hover:bg-slate-700 hover:text-white hover:shadow-md hover:translate-x-1"),children:[(0,u.jsx)("span",{className:"text-lg",children:e.icon}),(0,u.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.id)):(0,u.jsx)("div",{className:"px-2.5 py-1.5 text-slate-400 text-xs text-center",children:"No menu items found"})})]})]})}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const f="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function b(e,t){return{usr:e.state,key:e.key,idx:t}}function v(e,t,r,n){return void 0===r&&(r=null),x({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function j(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function y(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function N(e,t,r,n){void 0===n&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,s=a.history,o=i.Pop,c=null,d=u();function u(){return(s.state||{idx:null}).idx}function p(){o=i.Pop;let e=u(),t=null==e?null:e-d;d=e,c&&c({action:o,location:g.location,delta:t})}function m(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,r="string"===typeof e?e:j(e);return r=r.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==d&&(d=0,s.replaceState(x({},s.state,{idx:d}),""));let g={get action(){return o},get location(){return e(a,s)},listen(e){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(f,p),c=e,()=>{a.removeEventListener(f,p),c=null}},createHref:e=>t(a,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=i.Push;let n=v(g.location,e,t);r&&r(n,e),d=u()+1;let p=b(n,d),m=g.createHref(n);try{s.pushState(p,"",m)}catch(x){if(x instanceof DOMException&&"DataCloneError"===x.name)throw x;a.location.assign(m)}l&&c&&c({action:o,location:g.location,delta:1})},replace:function(e,t){o=i.Replace;let n=v(g.location,e,t);r&&r(n,e),d=u();let a=b(n,d),p=g.createHref(n);s.replaceState(a,"",p),l&&c&&c({action:o,location:g.location,delta:0})},go:e=>s.go(e)};return g}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function k(e,t,r){return void 0===r&&(r="/"),C(e,t,r,!1)}function C(e,t,r,n){let a=z(("string"===typeof t?y(t):t).pathname||"/",r);if(null==a)return null;let l=R(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(l);let s=null;for(let o=0;null==s&&o<l.length;++o){let e=M(a);s=O(l[o],e,n)}return s}function R(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,l)=>{let s={relativePath:void 0===l?e.path||"":l,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};s.relativePath.startsWith("/")&&(h(s.relativePath.startsWith(n),'Absolute route path "'+s.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(n.length));let o=V([n,s.relativePath]),i=r.concat(s);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),R(e.children,t,i,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:i})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of S(e.path))a(e,t,n);else a(e,t)}),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(0===n.length)return a?[l,""]:[l];let s=S(n.join("/")),o=[];return o.push(...s.map(e=>""===e?l:[l,e].join("/"))),a&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const E=/^:[\w-]+$/,P=3,L=2,F=1,D=10,_=-2,I=e=>"*"===e;function T(e,t){let r=e.split("/"),n=r.length;return r.some(I)&&(n+=_),t&&(n+=L),r.filter(e=>!I(e)).reduce((e,t)=>e+(E.test(t)?P:""===t?F:D),n)}function O(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,a={},l="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],i=o===n.length-1,c="/"===l?t:t.slice(l.length)||"/",d=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:i},c),u=e.route;if(!d&&i&&r&&!n[n.length-1].route.index&&(d=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),s.push({params:a,pathname:V([l,d.pathname]),pathnameBase:$(V([l,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(l=V([l,d.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let l=new RegExp(a,t?void 0:"i");return[l,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],s=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";s=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[r];return e[n]=a&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:l,pathnameBase:s,pattern:e}}function M(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return g(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function W(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function U(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function H(e,t){let r=U(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function B(e,t,r,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=y(e):(a=x({},e),h(!a.pathname||!a.pathname.includes("?"),W("?","pathname","search",a)),h(!a.pathname||!a.pathname.includes("#"),W("#","pathname","hash",a)),h(!a.search||!a.search.includes("#"),W("#","search","hash",a)));let l,s=""===e||""===a.pathname,o=s?"/":a.pathname;if(null==o)l=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}l=e>=0?t[e]:"/"}let i=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:a=""}="string"===typeof e?y(e):e,l=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:l,search:Q(n),hash:G(a)}}(a,l),c=o&&"/"!==o&&o.endsWith("/"),d=(s||"."===o)&&r.endsWith("/");return i.pathname.endsWith("/")||!c&&!d||(i.pathname+="/"),i}const V=e=>e.join("/").replace(/\/\/+/g,"/"),$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",G=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],X=(new Set(K),["get",...K]);new Set(X),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(this,arguments)}const Y=c.createContext(null);const Z=c.createContext(null);const ee=c.createContext(null);const te=c.createContext(null);const re=c.createContext({outlet:null,matches:[],isDataRoute:!1});const ne=c.createContext(null);function ae(){return null!=c.useContext(te)}function le(){return ae()||h(!1),c.useContext(te).location}function se(e){c.useContext(ee).static||c.useLayoutEffect(e)}function oe(){let{isDataRoute:e}=c.useContext(re);return e?function(){let{router:e}=he(xe.UseNavigateStable),t=be(fe.UseNavigateStable),r=c.useRef(!1);return se(()=>{r.current=!0}),c.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,J({fromRouteId:t},a)))},[e,t])}():function(){ae()||h(!1);let e=c.useContext(Y),{basename:t,future:r,navigator:n}=c.useContext(ee),{matches:a}=c.useContext(re),{pathname:l}=le(),s=JSON.stringify(H(a,r.v7_relativeSplatPath)),o=c.useRef(!1);return se(()=>{o.current=!0}),c.useCallback(function(r,a){if(void 0===a&&(a={}),!o.current)return;if("number"===typeof r)return void n.go(r);let i=B(r,JSON.parse(s),l,"path"===a.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:V([t,i.pathname])),(a.replace?n.replace:n.push)(i,a.state,a)},[t,n,s,l,e])}()}function ie(e,t,r,n){ae()||h(!1);let{navigator:a}=c.useContext(ee),{matches:l}=c.useContext(re),s=l[l.length-1],o=s?s.params:{},d=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let u,p=le();if(t){var m;let e="string"===typeof t?y(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||h(!1),u=e}else u=p;let x=u.pathname||"/",f=x;if("/"!==d){let e=d.replace(/^\//,"").split("/");f="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=k(e,{pathname:f});let b=me(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:V([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:V([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,r,n);return t&&b?c.createElement(te.Provider,{value:{location:J({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:i.Pop}},b):b}function ce(){let e=function(){var e;let t=c.useContext(ne),r=ge(fe.UseRouteError),n=be(fe.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),r?c.createElement("pre",{style:a},r):null,null)}const de=c.createElement(ce,null);class ue extends c.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?c.createElement(re.Provider,{value:this.props.routeContext},c.createElement(ne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pe(e){let{routeContext:t,match:r,children:n}=e,a=c.useContext(Y);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),c.createElement(re.Provider,{value:t},n)}function me(e,t,r,n){var a;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var l;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(l=n)&&l.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let s=e,o=null==(a=r)?void 0:a.errors;if(null!=o){let e=s.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||h(!1),s=s.slice(0,Math.min(s.length,e+1))}let i=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<s.length;c++){let e=s[c];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=c),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){i=!0,s=d>=0?s.slice(0,d+1):[s[0]];break}}}return s.reduceRight((e,n,a)=>{let l,u=!1,p=null,m=null;var x;r&&(l=o&&n.route.id?o[n.route.id]:void 0,p=n.route.errorElement||de,i&&(d<0&&0===a?(x="route-fallback",!1||ve[x]||(ve[x]=!0),u=!0,m=null):d===a&&(u=!0,m=n.route.hydrateFallbackElement||null)));let f=t.concat(s.slice(0,a+1)),h=()=>{let t;return t=l?p:u?m:n.route.Component?c.createElement(n.route.Component,null):n.route.element?n.route.element:e,c.createElement(pe,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===a)?c.createElement(ue,{location:r.location,revalidation:r.revalidation,component:p,error:l,children:h(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):h()},null)}var xe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xe||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function he(e){let t=c.useContext(Y);return t||h(!1),t}function ge(e){let t=c.useContext(Z);return t||h(!1),t}function be(e){let t=function(){let e=c.useContext(re);return e||h(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||h(!1),r.route.id}const ve={};d.startTransition;function je(e){let{to:t,replace:r,state:n,relative:a}=e;ae()||h(!1);let{future:l,static:s}=c.useContext(ee),{matches:o}=c.useContext(re),{pathname:i}=le(),d=oe(),u=B(t,H(o,l.v7_relativeSplatPath),i,"path"===a),p=JSON.stringify(u);return c.useEffect(()=>d(JSON.parse(p),{replace:r,state:n,relative:a}),[d,p,a,r,n]),null}function ye(e){h(!1)}function Ne(e){let{basename:t="/",children:r=null,location:n,navigationType:a=i.Pop,navigator:l,static:s=!1,future:o}=e;ae()&&h(!1);let d=t.replace(/^\/*/,"/"),u=c.useMemo(()=>({basename:d,navigator:l,static:s,future:J({v7_relativeSplatPath:!1},o)}),[d,o,l,s]);"string"===typeof n&&(n=y(n));let{pathname:p="/",search:m="",hash:x="",state:f=null,key:g="default"}=n,b=c.useMemo(()=>{let e=z(p,d);return null==e?null:{location:{pathname:e,search:m,hash:x,state:f,key:g},navigationType:a}},[d,p,m,x,f,g,a]);return null==b?null:c.createElement(ee.Provider,{value:u},c.createElement(te.Provider,{children:r,value:b}))}function we(e){let{children:t,location:r}=e;return ie(ke(t),r)}new Promise(()=>{});c.Component;function ke(e,t){void 0===t&&(t=[]);let r=[];return c.Children.forEach(e,(e,n)=>{if(!c.isValidElement(e))return;let a=[...t,n];if(e.type===c.Fragment)return void r.push.apply(r,ke(e.props.children,a));e.type!==ye&&h(!1),e.props.index&&e.props.children&&h(!1);let l={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(l.children=ke(e.props.children,a)),r.push(l)}),r}const Ce=1e6,Re=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e).replace("INR","\u20b9"),Se=e=>e?e instanceof File?URL.createObjectURL(e):"string"===typeof e?e:null:null,Ee=e=>{if(!e)return!1;const t=["jpg","jpeg","png","gif","webp","bmp","svg"],r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml"];if(e instanceof File){var n;const a=(null===(n=(e.name||"").split(".").pop())||void 0===n?void 0:n.toLowerCase())||"";return t.includes(a)||r.includes(e.type)}if("string"===typeof e){var a;if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();return r.some(t=>e.includes(t.split("/")[1]))}}const n=(null===(a=e.split(".").pop())||void 0===a?void 0:a.toLowerCase())||"";return t.includes(n)}return!1},Pe=e=>{let{file:t,defaultName:r="document.pdf",onClick:n}=e;const[a,l]=c.useState(!1);if(!t)return(0,u.jsx)("span",{className:"text-gray-400 text-xs",children:"No file"});const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document";if(!e)return null;let r=t,n=null,a="PDF";if(e instanceof File){var l;r=e.name||t,n=e.size;const s=(null===(l=r.split(".").pop())||void 0===l?void 0:l.toLowerCase())||"";a=Ee(e)?"IMAGE":"pdf"===s?"PDF":["doc","docx"].includes(s)?"DOC":s.toUpperCase()||"FILE"}else if("string"===typeof e){if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();a=e.includes("pdf")?"PDF":e.includes("image")?"IMAGE":e.includes("document")||e.includes("msword")?"DOC":"FILE"}n=Math.round(3*e.length/4)}else{var s;const t=(null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase())||"";a=Ee(e)?"IMAGE":"pdf"===t?"PDF":["doc","docx"].includes(t)?"DOC":t.toUpperCase()||"FILE"}r=t}return{fileName:r,fileSize:n,fileType:a}}(t,r),o=Se(t),i=e=>{e.preventDefault(),o&&n?n(o):o&&window.open(o,"_blank")};return Ee(t)&&!a&&o?(0,u.jsxs)("div",{onClick:i,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px] overflow-hidden",children:[(0,u.jsx)("img",{src:o,alt:s.fileName,className:"w-full h-16 object-cover rounded mb-1",onError:()=>l(!0)}),(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:s.fileName,children:s.fileName})]}):(0,u.jsxs)("div",{onClick:i,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px]",children:[(0,u.jsx)("div",{className:"w-full h-8 rounded mb-1 overflow-hidden relative flex items-center justify-center ".concat("PDF"===s.fileType?"bg-gradient-to-br from-red-100 to-red-200":"DOC"===s.fileType||"DOCX"===s.fileType?"bg-gradient-to-br from-blue-100 to-blue-200":"bg-gradient-to-br from-gray-100 to-gray-200"),children:(0,u.jsx)("div",{className:"text-[10px] font-bold ".concat("PDF"===s.fileType?"text-red-600":"DOC"===s.fileType||"DOCX"===s.fileType?"text-blue-600":"text-gray-700"),children:s.fileType})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:s.fileName,children:s.fileName}),s.fileSize&&(0,u.jsx)("div",{className:"text-[7px] text-gray-500",children:(d=s.fileSize,d?d<1024?d+" B":d<1048576?(d/1024).toFixed(1)+" KB":(d/1048576).toFixed(1)+" MB":"")})]})]});var d};function Le(e){let{user:t,logout:r,forwardedSubmissions:n,setForwardedSubmissions:a}=e;const l=oe(),s=le();(0,c.useEffect)(()=>{"/"!==s.pathname&&window.history.pushState(null,"",window.location.pathname)},[s.pathname]),(0,c.useEffect)(()=>{const e=e=>{if("/"!==s.pathname){window.confirm("Are you sure you want to logout?")?(r(),l("/",{replace:!0})):window.history.pushState(null,"",window.location.pathname)}};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[s.pathname,r,l]),(0,c.useEffect)(()=>{if("/"===s.pathname&&window.history.state&&document.referrer&&!document.referrer.includes("/login")){window.confirm("Are you sure you want to logout?")?r():window.history.go(1)}},[s.pathname,r]);const[i,d]=(0,c.useState)({year:"",installment:"",grantType:"",program:""}),[x,f]=(0,c.useState)(""),[h,g]=(0,c.useState)(""),[b,v]=(0,c.useState)(""),[j,y]=(0,c.useState)(""),[N,w]=(0,c.useState)(""),[k,C]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),[E,P]=(0,c.useState)(""),[L,F]=(0,c.useState)(""),[D,_]=(0,c.useState)(""),[I,T]=(0,c.useState)(""),[O,A]=(0,c.useState)(""),[M,z]=(0,c.useState)(null),[W,U]=(0,c.useState)(null),[H,B]=(0,c.useState)(null),[V,$]=(0,c.useState)(null),Q=(0,c.useRef)(null),G=(0,c.useRef)(null),[q,K]=((0,c.useRef)(null),(0,c.useRef)(null),(0,c.useState)([])),X=(0,c.useMemo)(()=>q.reduce((e,t)=>e+Number(t.cost||0),0),[q]),[J,Y]=(0,c.useState)(""),[Z,ee]=(0,c.useState)(""),[te,re]=(0,c.useState)(null),[ne,ae]=(0,c.useState)(0),se=i.year&&i.installment&&i.grantType&&i.program,ie=se&&"Untied Grant"===i.grantType&&("RADP"===i.program||"ADP"===i.program),ce=Math.max(0,Ce-X);(0,c.useEffect)(()=>{"CR"===L&&Number.isInteger(Number(O))&&Number(O)>0&&(te?0===te.submittedCount&&re(e=>o(o({},e),{},{targetCount:Number(O),crNumber:D||e.crNumber,crDate:I||e.crDate})):re({targetCount:Number(O),crNumber:D||"",crDate:I||"",submittedCount:0})),te&&(!Number.isInteger(te.targetCount)||te.targetCount<1)&&re(null)},[L,O]),(0,c.useEffect)(()=>{te&&te.submittedCount>=te.targetCount&&re(null)},[te]);const[de,ue]=(0,c.useState)(!1),[pe,me]=(0,c.useState)("forwarded"),[xe,fe]=(0,c.useState)(null),[he,ge]=(0,c.useState)({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),[be,ve]=(0,c.useState)({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1}),je=e=>{ve(t=>o(o({},t),{},{[e]:!t[e]}))};const ye=(0,c.useMemo)(()=>{const e={};return q.forEach((t,r)=>{e[t.sector]||(e[t.sector]=[]),e[t.sector].push(o(o({},t),{},{__idx:r}))}),e},[q]),Ne=(0,c.useMemo)(()=>Object.keys(ye),[ye]),we=e=>{let t=[];switch(e){case"noOfCrs":t=[...q,...n||[]];break;case"allWorks":t=[...q,...(n||[]).filter(e=>{var t;return"Pending Review"===e.status||(null===(t=e.status)||void 0===t?void 0:t.startsWith("Forwarded to"))||"Approved"===e.status||"CDMA Approved"===e.status||"Rejected"===e.status})];break;case"forwarded":t=(n||[]).filter(e=>{var t;return"Pending Review"===e.status||(null===(t=e.status)||void 0===t?void 0:t.startsWith("Forwarded to"))||"Approved"===e.status});break;case"cdmaApproved":t=(n||[]).filter(e=>"CDMA Approved"===e.status);break;case"rejected":t=(n||[]).filter(e=>"Rejected"===e.status&&"Commissioner"===e.rejectedBy);break;default:t=[]}return[...t].sort((e,t)=>(Number(e.priority)||0)-(Number(t.priority)||0))},ke=e=>e.filter(e=>{if(he.crNumber&&!(e.crNumber||"").toLowerCase().includes(he.crNumber.toLowerCase()))return!1;if(he.crDate&&!(e.crDate||"").toLowerCase().includes(he.crDate.toLowerCase()))return!1;if(he.sector&&e.sector!==he.sector)return!1;if(he.status&&e.status!==he.status)return!1;if(he.proposal&&!(e.proposal||"").toLowerCase().includes(he.proposal.toLowerCase()))return!1;if(he.cost){if(!Re(Math.round(e.cost||0)).toLowerCase().includes(he.cost.toLowerCase()))return!1}const t=Ee(e).toLowerCase();if(he.locality&&!t.includes(he.locality.toLowerCase()))return!1;const r=(e.latlong||"").toLowerCase();return!(he.latLong&&!r.includes(he.latLong.toLowerCase()))&&!(he.priority&&!(e.priority||"").toString().includes(he.priority))}),Ee=e=>{const t=[];return e.area&&t.push(e.area),e.locality&&t.push(e.locality),e.wardNo&&t.push("Ward No: ".concat(e.wardNo)),t.length>0?t.join(", "):e.locality||"-"},Le=e=>{if(!e)return null;if((t=e)&&(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("www.")||t.includes("maps.google")||t.includes("goo.gl/maps")||t.includes("maps.app.goo.gl"))){const t=e.startsWith("http")?e:"https://".concat(e);return t.includes("maps.google")||t.includes("goo.gl/maps")||t.includes("maps.app.goo.gl"),t}var t;const r=(e=>{if(!e)return null;const t=e.trim().match(/^([-+]?[0-9]*\.?[0-9]+)\s*,\s*([-+]?[0-9]*\.?[0-9]+)$/);if(t){const e=t[1].trim(),r=t[2].trim();return"https://www.google.com/maps?q=".concat(e,",").concat(r)}return null})(e);return r||null},Fe=e=>new Promise(t=>{if(e)if("string"!==typeof e)if(e instanceof File){const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>t(null),r.readAsDataURL(e)}else t(null);else t(e);else t(null)});const De=Boolean(te),_e=q.length+(te?te.submittedCount:0),[Ie,Te]=(0,c.useState)("dashboard"),[Oe,Ae]=(0,c.useState)(!0);return(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[xe&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>fe(null),children:(0,u.jsxs)("div",{className:"relative max-w-7xl max-h-full",children:[(0,u.jsx)("img",{src:xe,alt:"Zoomed",className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:e=>e.stopPropagation()}),(0,u.jsx)("button",{onClick:()=>fe(null),className:"absolute top-4 right-4 bg-white rounded-full p-2 hover:bg-gray-200 text-gray-800 font-bold text-xl w-10 h-10 flex items-center justify-center",children:"\xd7"})]})}),(0,u.jsx)("div",{className:"fixed top-0 left-0 right-0 w-full bg-white shadow-md z-50 p-6 pb-0",children:(0,u.jsx)(p,{title:"15th Finance Commission",user:t,onLogout:()=>{window.confirm("Are you sure you want to logout?")&&(r(),l("/"))}})}),(0,u.jsxs)("div",{className:"flex items-start relative pt-20 overflow-x-hidden",children:[(0,u.jsx)(m,{menuItems:[{id:"dashboard",label:"Dashboard",icon:"\ud83d\udcca"},{id:"reports",label:"Reports",icon:"\ud83d\udcc4"},{id:"gos",label:"GO's",icon:"\ud83d\udccb"},{id:"circular",label:"Circular & Proceedings",icon:"\ud83d\udce2"},{id:"guidelines",label:"Guidelines",icon:"\ud83d\udcd0"}],selectedMenuItem:Ie,onMenuItemSelect:Te,isMenuOpen:Oe,setIsMenuOpen:Ae}),(0,u.jsx)("div",{className:"flex-1 p-6 pt-4 transition-all duration-300 min-w-0 ".concat(Oe?"ml-64":"ml-0"),children:(0,u.jsxs)("div",{className:"max-w-[95%] mx-auto",children:[Z&&(0,u.jsx)("div",{className:"mb-4 p-4 bg-green-500 text-white rounded-lg shadow-lg text-center font-semibold text-base animate-pulse",children:Z}),(0,u.jsx)("div",{className:"bg-white rounded-xl shadow p-6 border mb-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[(0,u.jsxs)("div",{onClick:()=>me("noOfCrs"),className:"bg-blue-50 border border-blue-200 rounded-lg p-3 cursor-pointer hover:bg-blue-100 transition ".concat("noOfCrs"===pe?"ring-2 ring-blue-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"No. of CR's"}),(0,u.jsx)("div",{className:"text-xl font-bold text-blue-700",children:(()=>{const e={};return[...q,...n||[]].forEach(t=>{const r=(t.crNumber||"").trim().toUpperCase()||"__NO_CR__";e[r]||(e[r]=[]),e[r].push(t)}),Object.keys(e).filter(e=>"__NO_CR__"!==e).length})()})]}),(0,u.jsxs)("div",{onClick:()=>me("allWorks"),className:"bg-purple-50 border border-purple-200 rounded-lg p-3 cursor-pointer hover:bg-purple-100 transition ".concat("allWorks"===pe?"ring-2 ring-purple-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-purple-600 font-medium mb-1",children:"No. of Works"}),(0,u.jsx)("div",{className:"text-xl font-bold text-purple-700",children:q.length+(n||[]).filter(e=>{var t;return"Pending Review"===e.status||(null===(t=e.status)||void 0===t?void 0:t.startsWith("Forwarded to"))||"Approved"===e.status||"CDMA Approved"===e.status||"Rejected"===e.status}).length})]}),(0,u.jsxs)("div",{onClick:()=>me("forwarded"),className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 cursor-pointer hover:bg-indigo-100 transition ".concat("forwarded"===pe?"ring-2 ring-indigo-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-indigo-600 font-medium mb-1",children:"No. of Forwarded"}),(0,u.jsx)("div",{className:"text-xl font-bold text-indigo-700",children:(n||[]).filter(e=>{var t;return"Pending Review"===e.status||(null===(t=e.status)||void 0===t?void 0:t.startsWith("Forwarded to"))||"Approved"===e.status}).length})]}),(0,u.jsxs)("div",{onClick:()=>me("cdmaApproved"),className:"bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition ".concat("cdmaApproved"===pe?"ring-2 ring-green-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-green-600 font-medium mb-1",children:"No. of Approved"}),(0,u.jsx)("div",{className:"text-xl font-bold text-green-700",children:(n||[]).filter(e=>"CDMA Approved"===e.status).length})]}),(0,u.jsxs)("div",{onClick:()=>me("rejected"),className:"bg-orange-50 border border-orange-200 rounded-lg p-3 cursor-pointer hover:bg-orange-100 transition ".concat("rejected"===pe?"ring-2 ring-orange-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-orange-600 font-medium mb-1",children:"Sent back REJECTED LIST"}),(0,u.jsx)("div",{className:"text-xl font-bold text-orange-700",children:(n||[]).filter(e=>"Rejected"===e.status&&"Commissioner"===e.rejectedBy).length})]})]})}),(0,u.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2",children:[i.year&&(0,u.jsx)("div",{className:"px-3 py-1 rounded-full bg-gray-100 text-sm",children:i.year}),i.installment&&(0,u.jsx)("div",{className:"px-3 py-1 rounded-full bg-gray-100 text-sm",children:i.installment}),i.grantType&&(0,u.jsx)("div",{className:"px-3 py-1 rounded-full bg-gray-100 text-sm",children:i.grantType}),i.program&&(0,u.jsx)("div",{className:"px-3 py-1 rounded-full bg-gray-100 text-sm",children:i.program})]}),(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border mb-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"Filters"}),(0,u.jsx)("div",{})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,u.jsxs)("select",{value:i.year,onChange:e=>{d(o(o({},i),{},{year:e.target.value}))},className:"border p-2 rounded",children:[(0,u.jsx)("option",{value:"",children:"Select year"}),(0,u.jsx)("option",{children:"2021-22"}),(0,u.jsx)("option",{children:"2022-23"}),(0,u.jsx)("option",{children:"2023-24"}),(0,u.jsx)("option",{children:"2024-25"}),(0,u.jsx)("option",{children:"2025-26"})]}),(0,u.jsxs)("select",{value:i.installment,onChange:e=>d(o(o({},i),{},{installment:e.target.value})),disabled:!i.year,className:"border p-2 rounded",children:[(0,u.jsx)("option",{value:"",children:"Select installment"}),(0,u.jsx)("option",{children:"First Installment"}),(0,u.jsx)("option",{children:"Second Installment"})]}),(0,u.jsxs)("select",{value:i.grantType,onChange:e=>d(o(o({},i),{},{grantType:e.target.value})),disabled:!i.installment,className:"border p-2 rounded",children:[(0,u.jsx)("option",{value:"",children:"Select grant type"}),(0,u.jsx)("option",{children:"Untied Grant"}),(0,u.jsx)("option",{children:"Tied Grant"})]}),(0,u.jsxs)("select",{value:i.program,onChange:e=>d(o(o({},i),{},{program:e.target.value})),disabled:!i.grantType,className:"border p-2 rounded",children:[(0,u.jsx)("option",{value:"",children:"Select program"}),(0,u.jsx)("option",{children:"ADP"}),(0,u.jsx)("option",{children:"RADP"})]})]})]}),ie&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsx)("div",{className:"bg-white rounded-xl shadow p-6 border",children:(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,u.jsx)("div",{className:"text-sm text-gray-600",children:"Budget"}),(0,u.jsx)("div",{className:"font-bold text-lg text-green-500",children:Re(Ce)})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm text-gray-600",children:"Remaining"}),(0,u.jsx)("div",{className:"font-bold text-lg text-red-500",children:Re(ce)})]})]})}),(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border",children:[(0,u.jsxs)("div",{className:"text-sm font-medium mb-4",children:[i.program," Details"]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"CR Status"}),(0,u.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,u.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,u.jsx)("input",{type:"radio",name:"crStatus",checked:"CR"===L,onChange:()=>F("CR")}),(0,u.jsx)("span",{children:"CR"})]}),(0,u.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,u.jsx)("input",{type:"radio",name:"crStatus",checked:"IA"===L,onChange:()=>F("IA")}),(0,u.jsx)("span",{children:"In anticipation"})]})]})]}),"CR"===L&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"CR Number"}),(0,u.jsx)("input",{value:D,onChange:e=>_(e.target.value),disabled:De,className:"mt-1 w-full border p-2 rounded"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"CR Date"}),(0,u.jsx)("input",{type:"date",value:I,onChange:e=>T(e.target.value),disabled:De,max:(new Date).toISOString().split("T")[0],className:"mt-1 w-full border p-2 rounded"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"Number of Works"}),(0,u.jsx)("input",{type:"number",min:"1",value:O,onChange:e=>A(e.target.value),disabled:De,className:"mt-1 w-full border p-2 rounded ".concat(_e<Number(O||0)&&O?"border-red-500 bg-red-50":"")}),te&&(0,u.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Active CR: ",te.submittedCount,"/",te.targetCount," submitted"]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"Name of the Sector"}),(0,u.jsxs)("select",{value:x,onChange:e=>f(e.target.value),className:"mt-1 w-full border p-2 rounded",children:[(0,u.jsx)("option",{value:"",children:"Select type of work"}),(0,u.jsx)("option",{children:"SWM/LQM"}),(0,u.jsx)("option",{children:"Water Supply"}),(0,u.jsx)("option",{children:"UGD Drains"}),(0,u.jsx)("option",{children:"CC Roads"}),(0,u.jsx)("option",{children:"BT Roads"}),(0,u.jsx)("option",{children:"Development of Parks"}),(0,u.jsx)("option",{children:"Street Lighting"}),(0,u.jsx)("option",{children:"Solar Panels"}),(0,u.jsx)("option",{children:"IEC"})]})]}),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Name of the work"}),(0,u.jsx)("input",{value:h,onChange:e=>g(e.target.value),className:"w-full border p-2 rounded mb-3",placeholder:"Enter name of the work"}),(0,u.jsx)("div",{className:"border border-gray-300 rounded-lg p-3 bg-gray-50",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-xs text-gray-600 mb-1 font-medium",children:"1. Area"}),(0,u.jsx)("input",{value:b,onChange:e=>v(e.target.value),className:"w-full border border-gray-300 p-2 rounded bg-white",placeholder:"Enter area"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-xs text-gray-600 mb-1 font-medium",children:"2. Locality"}),(0,u.jsx)("input",{value:j,onChange:e=>y(e.target.value),className:"w-full border border-gray-300 p-2 rounded bg-white",placeholder:"Enter locality"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-xs text-gray-600 mb-1 font-medium",children:"3. Ward No"}),(0,u.jsx)("input",{value:N,onChange:e=>w(e.target.value),className:"w-full border border-gray-300 p-2 rounded bg-white",placeholder:"Enter ward number"})]})]})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"Latitude/Longitude or Google Maps URL"}),(0,u.jsxs)("div",{className:"mt-1 relative",children:[k&&Le(k)?(0,u.jsxs)("div",{className:"w-full border p-2 rounded bg-white min-h-[3rem] flex items-center cursor-pointer hover:bg-blue-50",onClick:()=>window.open(Le(k),"_blank","noopener,noreferrer"),children:[(0,u.jsx)("a",{href:Le(k),target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline flex-1",onClick:e=>e.stopPropagation(),children:k}),(0,u.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Click to open in Google Maps)"})]}):(0,u.jsx)("textarea",{value:k,onChange:e=>C(e.target.value),className:"w-full border p-2 rounded",placeholder:"Enter coordinates (e.g., 17.3850, 78.4867) or Google Maps URL (e.g., https://maps.google.com/...)",rows:2}),k&&Le(k)&&(0,u.jsx)("button",{onClick:()=>C(""),className:"absolute top-2 right-2 text-xs text-gray-500 hover:text-gray-700",title:"Clear and edit",children:"\u2715 Edit"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"Estimated Cost"}),(0,u.jsx)("input",{type:"number",value:R,onChange:e=>S(e.target.value),className:"mt-1 w-full border p-2 rounded"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"Prioritization"}),(0,u.jsx)("input",{type:"number",value:E,onChange:e=>P(e.target.value),className:"mt-1 w-full border p-2 rounded"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"Upload work Image"}),M&&(0,u.jsxs)("div",{className:"mb-2 p-2 bg-green-50 border border-green-200 rounded text-xs",children:[(0,u.jsxs)("span",{className:"text-green-700",children:["\u2713 File selected: ",M.name||"Image"]}),M instanceof File&&(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)("img",{src:URL.createObjectURL(M),alt:"Preview",className:"max-w-full h-32 object-contain rounded border"})})]}),(0,u.jsx)("input",{type:"file",accept:"image/*",ref:Q,onChange:e=>{var t;return z((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"mt-1 w-full border p-2 rounded"},"workImage-".concat(ne))]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"Detailed Estimation Report"}),W&&(0,u.jsxs)("div",{className:"mb-2 p-2 bg-green-50 border border-green-200 rounded text-xs",children:[(0,u.jsxs)("span",{className:"text-green-700",children:["\u2713 File selected: ",W.name||"Report"]}),W instanceof File&&(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)("a",{href:URL.createObjectURL(W),target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:"View Report"})})]}),(0,u.jsx)("input",{type:"file",accept:".pdf,image/*",ref:G,onChange:e=>{var t;return U((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"mt-1 w-full border p-2 rounded"},"detailedReport-".concat(ne))]})]}),J&&(0,u.jsx)("div",{className:"mt-4 text-red-600",children:J}),(0,u.jsx)("div",{className:"flex justify-center gap-3 mt-4",children:(0,u.jsx)("button",{onClick:function(){if(Y(""),!se)return void Y("Please choose Year, Installment, Grant Type and Program.");if(!x||!h||!b||!j||!N||!R||!E)return void Y("Please fill all required proposal fields.");if("CR"===L&&te&&te.submittedCount>=te.targetCount)return void Y("CR target already completed; please reset CR or start a new cycle.");const e={id:Date.now()+Math.random(),sector:x,proposal:h,locality:j,latlong:k,cost:Number(R),priority:Number(E),crNumber:"CR"===L?D:"",crDate:"CR"===L?I:"",workImage:M,detailedReport:W,area:b,wardNo:N};K(t=>[...t,e]),"CR"===L&&re(e=>e?o(o({},e),{},{submittedCount:(e.submittedCount||0)+1}):e),ee("Submitted successfully."),setTimeout(()=>ee(""),3e3),ue(!1),function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f(""),g(""),v(""),y(""),w(""),C(""),S(""),P(""),z(null),U(null),F(e=>te?"CR":""),e||A(""),ae(e=>e+1)}(Boolean(te))},className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Submit"})}),(0,u.jsx)("div",{className:"border-b border-gray-300 mt-4"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"Committee Report"}),(0,u.jsx)("input",{type:"file",onChange:e=>{var t;return B((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"mt-1 w-full border p-2 rounded"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-600",children:"Council Resolution Report"}),(0,u.jsx)("input",{type:"file",onChange:e=>{var t;return $((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"mt-1 w-full border p-2 rounded"})]})]}),(0,u.jsx)("div",{className:"flex justify-end gap-3 mt-4",children:(0,u.jsx)("button",{onClick:async function(){const e=Number(O||0),t=q.length+(de?1:0);if(!Number.isInteger(e)||e<1)return void alert("Please enter valid Number of Works (>=1).");if(t<e)return void alert("Please submit ".concat(e-t," more work(s) before forwarding."));if(!H||!V)return void alert("Please upload committee and council files before forwarding.");const r=(new Date).toISOString();let n=[...q];if(de){const e={id:Date.now()+Math.random(),sector:x,proposal:h,locality:j,latlong:k,cost:Number(R),priority:Number(E),crNumber:"CR"===L?D:"",crDate:"CR"===L?I:"",workImage:M,detailedReport:W,area:b,wardNo:N};n.push(e)}const l=await Promise.all(n.map(async e=>{const t=o(o({},e),{},{id:Date.now()+Math.random(),status:"Pending Review",forwardedDate:r,remarks:""});return t.workImage=await Fe(e.workImage),t.detailedReport=await Fe(e.detailedReport),t.committeeReport=await Fe(H),t.councilResolution=await Fe(V),t}));a(e=>[...l,...e]),K([]),d({year:"",installment:"",grantType:"",program:""}),f(""),g(""),v(""),y(""),w(""),C(""),S(""),P(""),z(null),U(null),B(null),$(null),Y(""),F(""),A(""),_(""),T(""),re(null),ue(!1),alert("Forwarded successfully!"),ee("\u2705 Successfully Forwarded to Commissioner!"),setTimeout(()=>ee(""),5e3)},disabled:!O||q.length+(de?1:0)<Number(O)||!H||!V,className:"px-4 py-2 rounded ".concat(!O||q.length+(de?1:0)<Number(O)||!H||!V?"bg-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"),children:"Forward to Commissioner"})})]}),(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border",children:[(0,u.jsx)("div",{className:"text-sm font-medium mb-3",children:"Signatures and Submission"}),(0,u.jsx)("div",{className:"overflow-auto max-h-96",children:(0,u.jsxs)("table",{className:"w-full border-collapse text-xs",children:[(0,u.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,u.jsxs)("tr",{className:"text-left text-xs border-b font-semibold",children:[(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"CR Number"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"CR Date"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Sector"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Proposal"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap text-right",children:"Estimated Cost"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Locality"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Lat/Long"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap text-center",children:"Priority"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Actions"})]})}),(0,u.jsx)("tbody",{children:0===Ne.length?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"p-4 text-sm text-gray-500",colSpan:14,children:"No submissions yet."})}):Ne.map((e,t)=>ye[e].map((r,n)=>{const a=0===n;return(0,u.jsxs)("tr",{className:"border-b align-top hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 align-top",children:a?t+1:null}),(0,u.jsx)("td",{className:"p-2 align-top",children:a?r.crNumber||"-":null}),(0,u.jsx)("td",{className:"p-2 align-top",children:a?r.crDate||"-":null}),(0,u.jsx)("td",{className:"p-2 align-top",children:a?e:null}),(0,u.jsx)("td",{className:"p-2 align-top max-w-xs truncate",title:r.proposal,children:r.proposal}),(0,u.jsx)("td",{className:"p-2 align-top text-right",children:Re(Math.round(r.cost))}),(0,u.jsx)("td",{className:"p-2 align-top max-w-xs truncate",title:Ee(r),children:Ee(r)}),(0,u.jsx)("td",{className:"p-2 align-top max-w-xs truncate",title:r.latlong||"-",children:r.latlong?Le(r.latlong)?(0,u.jsx)("a",{href:Le(r.latlong),target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline text-xs",children:r.latlong.length>20?r.latlong.substring(0,20)+"...":r.latlong}):r.latlong.length>20?r.latlong.substring(0,20)+"...":r.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 align-top text-center",children:r.priority}),(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsx)(Pe,{file:r.workImage,defaultName:"work-image.jpg",onClick:e=>fe(e)})}),(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsx)(Pe,{file:r.detailedReport,defaultName:"estimation-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsx)(Pe,{file:r.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsx)(Pe,{file:r.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsx)("div",{className:"flex gap-1",children:(0,u.jsx)("button",{onClick:()=>function(e){const t=q[e];if(t){if(f(t.sector),g(t.proposal||""),t.area&&t.wardNo)v(t.area),y(t.locality||""),w(t.wardNo);else{const e=(t.proposal||"").match(/^(.+?)\s*-\s*(.+?)\s*-\s*Ward No:\s*(.+)$/);e?(v(e[1].trim()),y(e[2].trim()),w(e[3].trim())):(v(""),y(t.locality||""),w(""))}C(t.latlong||""),S(String(t.cost)),P(String(t.priority)),z(t.workImage||null),U(t.detailedReport||null),_(t.crNumber||""),T(t.crDate||""),F(t.crNumber?"CR":"IA"),ue(!0),K(t=>t.filter((t,r)=>r!==e))}}(r.__idx),className:"px-2 py-1 bg-indigo-600 text-white text-xs rounded hover:bg-indigo-700",children:"Edit"})})})]},r.__idx)}))})]})})]})]}),(()=>{const e=we(pe),t=ke(e),r=(e=>{switch(e){case"noOfCrs":return"All Works (by CR Number)";case"allWorks":return"All Works";case"forwarded":default:return"Forwarded Tasks";case"cdmaApproved":return"CDMA Approved Tasks";case"rejected":return"Sent back REJECTED LIST"}})(pe),n=(e=>{const t=new Set;return e.forEach(e=>{e.sector&&t.add(e.sector)}),Array.from(t).sort()})(e),a=(e=>{const t=new Set;return e.forEach(e=>{e.status&&t.add(e.status)}),Array.from(t).sort()})(e);if("cdmaApproved"===pe){const e=ke(we("cdmaApproved"));return 0===e.length?(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border mt-6",children:[(0,u.jsx)("h3",{className:"text-sm text-gray-600 mb-2",children:r}),(0,u.jsx)("p",{className:"text-gray-500 text-sm",children:"No items to display."})]}):(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border mt-6",children:[(0,u.jsx)("h3",{className:"text-sm text-gray-600 mb-4",children:r}),(0,u.jsx)("div",{className:"overflow-auto max-h-96",children:(0,u.jsxs)("table",{className:"w-full border-collapse text-xs",children:[(0,u.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,u.jsxs)("tr",{className:"text-left text-xs border-b font-semibold",children:[(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Number"}),(0,u.jsx)("span",{className:"text-xs",children:"\ud83d\udd0d"})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"CR Date"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Sector"}),(0,u.jsxs)("select",{value:he.sector,onChange:e=>ge(o(o({},he),{},{sector:e.target.value})),className:"w-20 border p-0.5 rounded text-xs",title:"Filter by Sector",children:[(0,u.jsx)("option",{value:"",children:"All"}),n.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Proposal"}),(0,u.jsx)("span",{className:"text-xs",children:"\ud83d\udd0d"})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap text-right",children:"Estimated Cost"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Locality"}),(0,u.jsx)("span",{className:"text-xs",children:"\ud83d\udd0d"})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Lat/Long"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Priority"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Status"}),(0,u.jsxs)("select",{value:he.status,onChange:e=>ge(o(o({},he),{},{status:e.target.value})),className:"w-20 border p-0.5 rounded text-xs",title:"Filter by Status",children:[(0,u.jsx)("option",{value:"",children:"All"}),a.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]}),(he.sector||he.status)&&(0,u.jsx)("button",{onClick:()=>ge({crNumber:"",sector:"",status:"",proposal:"",locality:""}),className:"text-xs text-blue-600 hover:text-blue-800 px-1",title:"Clear Filters",children:"\u2715"})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Remarks"})]})}),(0,u.jsx)("tbody",{children:e.map((e,t)=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2",children:t+1}),(0,u.jsx)("td",{className:"p-2",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2",children:e.sector}),(0,u.jsx)("td",{className:"p-2 max-w-xs truncate",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-right",children:Re(Math.round(e.cost||0))}),(0,u.jsx)("td",{className:"p-2 max-w-xs truncate",title:Ee(e),children:Ee(e)}),(0,u.jsx)("td",{className:"p-2 max-w-xs truncate",title:e.latlong||"-",children:e.latlong?Le(e.latlong)?(0,u.jsx)("a",{href:Le(e.latlong),target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline text-xs",children:e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong}):e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-center",children:e.priority}),(0,u.jsx)("td",{className:"p-2",children:(0,u.jsx)(Pe,{file:e.workImage,defaultName:"work-image.jpg",onClick:e=>fe(e)})}),(0,u.jsx)("td",{className:"p-2",children:(0,u.jsx)(Pe,{file:e.detailedReport,defaultName:"estimation-report.pdf"})}),(0,u.jsx)("td",{className:"p-2",children:(0,u.jsx)(Pe,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2",children:(0,u.jsx)(Pe,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-green-600",children:"CDMA Approved"}),(0,u.jsx)("td",{className:"p-2 text-gray-600 max-w-xs truncate",title:e.remarks||"-",children:e.remarks||"-"})]},e.id))})]})})]})}return(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border mt-6",children:[(0,u.jsx)("h3",{className:"text-sm text-gray-600 mb-4",children:r}),(0,u.jsx)("div",{className:"overflow-auto max-h-96",children:(0,u.jsxs)("table",{className:"w-full border-collapse text-xs",children:[(0,u.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,u.jsxs)("tr",{className:"text-left text-xs border-b font-semibold",children:[(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Number"}),(0,u.jsx)("button",{onClick:()=>je("crNumber"),className:"text-xs hover:text-blue-600",title:"Filter by CR Number",children:"\ud83d\udd0d"}),be.crNumber&&(0,u.jsx)("input",{type:"text",value:he.crNumber,onChange:e=>ge(o(o({},he),{},{crNumber:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Date"}),(0,u.jsx)("button",{onClick:()=>je("crDate"),className:"text-xs hover:text-blue-600",title:"Filter by CR Date",children:"\ud83d\udd0d"}),be.crDate&&(0,u.jsx)("input",{type:"text",value:he.crDate,onChange:e=>ge(o(o({},he),{},{crDate:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Sector"}),(0,u.jsx)("button",{onClick:()=>je("sector"),className:"text-xs hover:text-blue-600",title:"Filter by Sector",children:"\ud83d\udd0d"}),be.sector&&(0,u.jsxs)("select",{value:he.sector,onChange:e=>ge(o(o({},he),{},{sector:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),n.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Proposal"}),(0,u.jsx)("button",{onClick:()=>je("proposal"),className:"text-xs hover:text-blue-600",title:"Filter by Proposal",children:"\ud83d\udd0d"}),be.proposal&&(0,u.jsx)("input",{type:"text",value:he.proposal,onChange:e=>ge(o(o({},he),{},{proposal:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap text-right",children:(0,u.jsxs)("div",{className:"flex items-center gap-1 justify-end",children:[(0,u.jsx)("span",{children:"Estimated Cost"}),(0,u.jsx)("button",{onClick:()=>je("cost"),className:"text-xs hover:text-blue-600",title:"Filter by Cost",children:"\ud83d\udd0d"}),be.cost&&(0,u.jsx)("input",{type:"text",value:he.cost,onChange:e=>ge(o(o({},he),{},{cost:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Locality"}),(0,u.jsx)("button",{onClick:()=>je("locality"),className:"text-xs hover:text-blue-600",title:"Filter by Locality",children:"\ud83d\udd0d"}),be.locality&&(0,u.jsx)("input",{type:"text",value:he.locality,onChange:e=>ge(o(o({},he),{},{locality:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Lat/Long"}),(0,u.jsx)("button",{onClick:()=>je("latLong"),className:"text-xs hover:text-blue-600",title:"Filter by Lat/Long",children:"\ud83d\udd0d"}),be.latLong&&(0,u.jsx)("input",{type:"text",value:he.latLong,onChange:e=>ge(o(o({},he),{},{latLong:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Sea7rch...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Priority"}),(0,u.jsx)("button",{onClick:()=>je("priority"),className:"text-xs hover:text-blue-600",title:"Filter by Priority",children:"\ud83d\udd0d"}),be.priority&&(0,u.jsx)("input",{type:"text",value:he.priority,onChange:e=>ge(o(o({},he),{},{priority:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Status"}),(0,u.jsx)("button",{onClick:()=>je("status"),className:"text-xs hover:text-blue-600",title:"Filter by Status",children:"\ud83d\udd0d"}),be.status&&(0,u.jsxs)("select",{value:he.status,onChange:e=>ge(o(o({},he),{},{status:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),a.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]}),(he.crNumber||he.crDate||he.sector||he.status||he.proposal||he.cost||he.locality||he.latLong||he.priority)&&(0,u.jsx)("button",{onClick:()=>{ge({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),ve({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1})},className:"text-xs text-blue-600 hover:text-blue-800 px-1 ml-1",title:"Clear Filters",children:"\u2715"})]})}),"forwarded"===pe&&(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Forwarded Date"}),"rejected"===pe&&(0,u.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Remarks"})]})}),(0,u.jsx)("tbody",{children:(()=>{if(0===t.length){const e="forwarded"===pe||"rejected"===pe?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}if("noOfCrs"===pe){const e={};t.forEach(t=>{const r=(t.crNumber||"").trim().toUpperCase()||"__NO_CR__";e[r]||(e[r]=[]),e[r].push(t)});const r=Object.values(e).filter(e=>"__NO_CR__"!==((e[0].crNumber||"").trim().toUpperCase()||"__NO_CR__"));if(0===r.length){const e="forwarded"===pe||"rejected"===pe?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}let n=0;return r.map(e=>e.map((e,t)=>{const r=0===t;return r&&n++,(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 align-top",children:r?n:""}),(0,u.jsx)("td",{className:"p-2 align-top",children:r?e.crNumber||"-":""}),(0,u.jsx)("td",{className:"p-2 align-top",children:r?e.crDate||"-":""}),(0,u.jsx)("td",{className:"p-2 align-top",children:r?e.sector:""}),(0,u.jsx)("td",{className:"p-2 max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-right align-top",children:Re(Math.round(e.cost||0))}),(0,u.jsx)("td",{className:"p-2 max-w-xs truncate align-top",title:Ee(e),children:Ee(e)}),(0,u.jsx)("td",{className:"p-2 max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?Le(e.latlong)?(0,u.jsx)("a",{href:Le(e.latlong),target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline text-xs",children:e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong}):e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-center align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 align-top",children:e.workImage?(0,u.jsx)("img",{src:Se(e.workImage),alt:"Work",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80 border border-gray-300",onClick:()=>fe(Se(e.workImage))}):(0,u.jsx)("span",{className:"text-gray-400 text-xs",children:"No image"})}),(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsx)(Pe,{file:e.detailedReport,defaultName:"estimation-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsx)(Pe,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsx)(Pe,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 align-top",children:"Pending Review"===e.status?(0,u.jsx)("span",{className:"text-yellow-600",children:"Pending Review"}):"Approved"===e.status?(0,u.jsx)("span",{className:"text-green-600",children:"Approved"}):"CDMA Approved"===e.status?(0,u.jsx)("span",{className:"text-green-600",children:"CDMA Approved"}):"Rejected"===e.status?(0,u.jsx)("span",{className:"text-red-600",children:"Rejected"}):(0,u.jsx)("span",{className:"text-blue-600",children:e.status})})]},e.id)})).flat()}return t.map((e,t)=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2",children:t+1}),(0,u.jsx)("td",{className:"p-2",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2",children:e.sector}),(0,u.jsx)("td",{className:"p-2 max-w-xs truncate",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-right",children:Re(Math.round(e.cost||0))}),(0,u.jsx)("td",{className:"p-2 max-w-xs truncate",title:Ee(e),children:Ee(e)}),(0,u.jsx)("td",{className:"p-2 max-w-xs truncate",title:e.latlong||"-",children:e.latlong?Le(e.latlong)?(0,u.jsx)("a",{href:Le(e.latlong),target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline text-xs",children:e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong}):e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-center",children:e.priority}),(0,u.jsx)("td",{className:"p-2",children:e.workImage?(0,u.jsx)("img",{src:Se(e.workImage),alt:"Work",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80 border border-gray-300",onClick:()=>fe(Se(e.workImage))}):(0,u.jsx)("span",{className:"text-gray-400 text-xs",children:"No image"})}),(0,u.jsx)("td",{className:"p-2",children:(0,u.jsx)(Pe,{file:e.detailedReport,defaultName:"estimation-report.pdf"})}),(0,u.jsx)("td",{className:"p-2",children:(0,u.jsx)(Pe,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2",children:(0,u.jsx)(Pe,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2",children:"Pending Review"===e.status?(0,u.jsx)("span",{className:"text-yellow-600",children:"Pending Review"}):"Approved"===e.status?(0,u.jsx)("span",{className:"text-green-600",children:"Approved"}):"CDMA Approved"===e.status?(0,u.jsx)("span",{className:"text-green-600",children:"CDMA Approved"}):"Rejected"===e.status?(0,u.jsx)("span",{className:"text-red-600",children:"Rejected by Commissioner"}):(0,u.jsx)("span",{className:"text-blue-600",children:e.status})}),"forwarded"===pe&&(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600",children:e.forwardedDate?new Date(e.forwardedDate).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}),"rejected"===pe&&(0,u.jsx)("td",{className:"p-2 text-gray-600 max-w-xs truncate",title:e.remarks||"-",children:e.remarks||"-"})]},e.id))})()})]})})]})})()]})})]})]})}function Fe(e){let{user:t,logout:r,forwardedSubmissions:n,setForwardedSubmissions:a}=e;const l=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0).replace("INR","\u20b9"),s=e=>e?e instanceof File?URL.createObjectURL(e):"string"===typeof e?e:null:null,i=e=>{if(!e)return!1;const t=["jpg","jpeg","png","gif","webp","bmp","svg"],r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml"];if(e instanceof File){var n;const a=(null===(n=(e.name||"").split(".").pop())||void 0===n?void 0:n.toLowerCase())||"";return t.includes(a)||r.includes(e.type)}if("string"===typeof e){var a;if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();return r.some(t=>e.includes(t.split("/")[1]))}}const n=(null===(a=e.split(".").pop())||void 0===a?void 0:a.toLowerCase())||"";return t.includes(n)}return!1},d=e=>{let{file:t,defaultName:r="document.pdf"}=e;const[n,a]=(0,c.useState)(!1);if(!t)return(0,u.jsx)("span",{className:"text-gray-400 text-xs",children:"No file"});const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document";if(!e)return null;let r=t,n=null,a="PDF";if(e instanceof File){var l;r=e.name||t,n=e.size;const s=(null===(l=r.split(".").pop())||void 0===l?void 0:l.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===s?"PDF":["doc","docx"].includes(s)?"DOC":s.toUpperCase()||"FILE"}else if("string"===typeof e){if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();a=e.includes("pdf")?"PDF":e.includes("image")?"IMAGE":e.includes("document")||e.includes("msword")?"DOC":"FILE"}n=Math.round(3*e.length/4)}else{var s;const t=(null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===t?"PDF":["doc","docx"].includes(t)?"DOC":t.toUpperCase()||"FILE"}r=t}return{fileName:r,fileSize:n,fileType:a}}(t,r),o=s(t),d=e=>{e.preventDefault(),o&&window.open(o,"_blank")};return i(t)&&!n&&o?(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px] overflow-hidden",children:[(0,u.jsx)("img",{src:o,alt:l.fileName,className:"w-full h-16 object-cover rounded mb-1",onError:()=>a(!0)}),(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName})]}):(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px]",children:[(0,u.jsx)("div",{className:"w-full h-8 rounded mb-1 overflow-hidden relative flex items-center justify-center ".concat("PDF"===l.fileType?"bg-gradient-to-br from-red-100 to-red-200":"DOC"===l.fileType||"DOCX"===l.fileType?"bg-gradient-to-br from-blue-100 to-blue-200":"bg-gradient-to-br from-gray-100 to-gray-200"),children:(0,u.jsx)("div",{className:"text-[10px] font-bold ".concat("PDF"===l.fileType?"text-red-600":"DOC"===l.fileType||"DOCX"===l.fileType?"text-blue-600":"text-gray-700"),children:l.fileType})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName}),l.fileSize&&(0,u.jsx)("div",{className:"text-[7px] text-gray-500",children:(p=l.fileSize,p?p<1024?p+" B":p<1048576?(p/1024).toFixed(1)+" KB":(p/1048576).toFixed(1)+" MB":"")})]})]});var p},[x,f]=(0,c.useState)(null),[h,g]=(0,c.useState)(null),[b,v]=(0,c.useState)(!1),[j,y]=(0,c.useState)(!1),[N,w]=(0,c.useState)(""),[k,C]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),[E,P]=(0,c.useState)(""),[L,F]=(0,c.useState)(""),[D,_]=(0,c.useState)(""),[I,T]=(0,c.useState)(""),[O,A]=(0,c.useState)(!1),[M,z]=(0,c.useState)(""),[W,U]=(0,c.useState)(!1),[H,B]=(0,c.useState)([]),[V,$]=(0,c.useState)(!1),[Q,G]=(0,c.useState)(""),[q,K]=(0,c.useState)(!1),[X,J]=(0,c.useState)(""),[Y,Z]=(0,c.useState)(""),[ee,te]=(0,c.useState)(!1),[re,ne]=(0,c.useState)(!1),[ae,se]=(0,c.useState)([]),[ie,ce]=(0,c.useState)("pending"),[de,ue]=(0,c.useState)("dashboard"),[pe,me]=(0,c.useState)(!0),[xe,fe]=(0,c.useState)({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),[he,ge]=(0,c.useState)({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1}),be=e=>{ge(t=>o(o({},t),{},{[e]:!t[e]}))},ve=(0,c.useRef)([]);(0,c.useEffect)(()=>{B([])},[ie]);const je={Administration:["EEPH","SEPH","ENCPH"]},ye=oe(),Ne=le();(0,c.useEffect)(()=>{"/"!==Ne.pathname&&window.history.pushState(null,"",window.location.pathname)},[Ne.pathname]),(0,c.useEffect)(()=>{const e=e=>{if("/"!==Ne.pathname){window.confirm("Are you sure you want to logout?")?(null===r||void 0===r||r(),ye("/",{replace:!0})):window.history.pushState(null,"",window.location.pathname)}};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[Ne.pathname,r,ye]);const we=(0,c.useMemo)(()=>{const e=n.filter(e=>{var r;if("Rejected"===e.status){return!(!e.rejectedBy||"Commissioner"===e.rejectedBy||e.rejectedBy===(null===t||void 0===t?void 0:t.username)||"Ramesh"===e.rejectedBy)}return!["Approved","EEPH Rejected","SEPH Rejected","ENCPH Rejected"].includes(e.status)&&!(null!==(r=e.status)&&void 0!==r&&r.startsWith("Forwarded to"))});return console.log("\ud83d\udcca Pending list recalculated:",{totalSubmissions:n.length,pendingCount:e.length,rejectedItems:n.filter(e=>"Rejected"===e.status&&"Commissioner"===e.rejectedBy).length}),e},[n,t]),ke=(0,c.useMemo)(()=>n.filter(e=>"Rejected"===e.status&&(!e.rejectedBy||"Commissioner"===e.rejectedBy||e.rejectedBy===(null===t||void 0===t?void 0:t.username)||"Ramesh"===e.rejectedBy)),[n,t]),Ce=(0,c.useMemo)(()=>n.filter(e=>"Approved"===e.status),[n]),Re=(0,c.useMemo)(()=>n.filter(e=>{var t;return null===(t=e.status)||void 0===t?void 0:t.startsWith("Forwarded to")}),[n]),Se=(0,c.useMemo)(()=>n.filter(e=>"EEPH Rejected"===e.status),[n]),Ee=((0,c.useMemo)(()=>n.filter(e=>"EEPH Rejected"===e.status),[n]),(0,c.useMemo)(()=>{const e={};return n.forEach(t=>{const r=(t.crNumber||"").trim().toUpperCase()||"__NO_CR__";e[r]||(e[r]=[]),e[r].push(t)}),Object.keys(e).filter(e=>"__NO_CR__"!==e).length},[n])),Pe=e=>{let t=[];switch(e){case"pending":default:t=we;break;case"allWorks":case"noOfCrs":t=n;break;case"approved":t=[...Ce,...Re];break;case"forwarded":t=Re;break;case"selfRejected":t=ke;break;case"sentBackRejected":t=Se}return[...t].sort((e,t)=>(Number(e.priority)||0)-(Number(t.priority)||0))},Le=e=>{switch(e){case"pending":default:return"Pending / Approval Tasks";case"allWorks":return"All Works";case"approved":return"Approved & Forwarded Tasks";case"forwarded":return"Forwarded Tasks";case"selfRejected":return"Self Rejected Tasks";case"sentBackRejected":return"Sent back REJECTED LIST";case"noOfCrs":return"All Works (by CR Number)"}};(0,c.useEffect)(()=>()=>{ve.current.forEach(e=>URL.revokeObjectURL(e))},[]);const Fe=e=>{const t=n.find(t=>t.id===e.id)||e;console.log("\ud83d\udd0d Commissioner openPreview - Original sub:",e),console.log("\ud83d\udd0d Commissioner openPreview - Fresh sub from array:",t),console.log("\ud83d\udd0d Commissioner openPreview - Files check:",{workImage:t.workImage instanceof File,detailedReport:t.detailedReport instanceof File,committeeReport:t.committeeReport instanceof File,councilResolution:t.councilResolution instanceof File}),f(t),g({sector:t.sector||"",proposal:t.proposal||"",cost:t.cost||0,locality:t.locality||"",latlong:t.latlong||"",priority:t.priority||"",crNumber:t.crNumber||"",crDate:t.crDate||"",remarks:t.remarks||"",workImage:t.workImage||null,detailedReport:t.detailedReport||null,committeeReport:t.committeeReport||null,councilResolution:t.councilResolution||null}),v(!0)},De=e=>{const t=n.find(t=>t.id===e);t&&(A(!1),y(!1),v(!1),f(t),U(!0),Z(""),te(!1))},_e=e=>{const t=n.find(t=>t.id===e);t&&(U(!1),y(!1),v(!1),f(t),A(!0),z(""))},Ie=e=>{B(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Te=()=>{const e=Pe(ie).filter(e=>{const r="Rejected"===e.status&&(!e.rejectedBy||"Commissioner"===e.rejectedBy||e.rejectedBy===(null===t||void 0===t?void 0:t.username));return!ze(e.status)||r}).map(e=>e.id);H.length===e.length&&e.length>0?B([]):B(e)},Oe=()=>{0!==H.length?(K(!0),J("")):alert("Please select at least one item to approve.")},Ae=()=>{0!==H.length?$(!0):alert("Please select at least one item to reject.")},Me=()=>{if(!N||!k||!x)return void alert("Select department and section");const e="Forwarded to ".concat(k);console.log("\ud83d\udce4 Commissioner forwarding task:",{taskId:x.id,dept:N,section:k,newStatus:e,forwardedTo:{department:N,section:k,remarks:R}}),a(t=>{var r,n,a,l,s;const i=t.find(e=>e.id===x.id);console.log("\ud83d\udce4 Commissioner forwarding - Files check:",{fromCurrentSub:{workImage:(null===i||void 0===i?void 0:i.workImage)instanceof File,detailedReport:(null===i||void 0===i?void 0:i.detailedReport)instanceof File,committeeReport:(null===i||void 0===i?void 0:i.committeeReport)instanceof File,councilResolution:(null===i||void 0===i?void 0:i.councilResolution)instanceof File},fromPreview:{workImage:x.workImage instanceof File,detailedReport:x.detailedReport instanceof File,committeeReport:x.committeeReport instanceof File,councilResolution:x.councilResolution instanceof File}});const c=t.map(t=>t.id===x.id?o(o({},t),{},{forwardedTo:{department:N,section:k,remarks:R},status:e,workImage:x.workImage||t.workImage||(null===i||void 0===i?void 0:i.workImage)||null,detailedReport:x.detailedReport||t.detailedReport||(null===i||void 0===i?void 0:i.detailedReport)||null,committeeReport:x.committeeReport||t.committeeReport||(null===i||void 0===i?void 0:i.committeeReport)||null,councilResolution:x.councilResolution||t.councilResolution||(null===i||void 0===i?void 0:i.councilResolution)||null}):t),d=c.find(e=>e.id===x.id);return console.log("\u2705 Commissioner forwarded - Files after:",{workImage:(null===d||void 0===d?void 0:d.workImage)instanceof File,detailedReport:(null===d||void 0===d?void 0:d.detailedReport)instanceof File,committeeReport:(null===d||void 0===d?void 0:d.committeeReport)instanceof File,councilResolution:(null===d||void 0===d?void 0:d.councilResolution)instanceof File}),console.log("\u2705 Commissioner forwarded - Final submission details:",{id:null===d||void 0===d?void 0:d.id,status:null===d||void 0===d?void 0:d.status,forwardedTo:null===d||void 0===d?void 0:d.forwardedTo,section:null===d||void 0===d||null===(r=d.forwardedTo)||void 0===r?void 0:r.section,department:null===d||void 0===d||null===(n=d.forwardedTo)||void 0===n?void 0:n.department,willAppearInEEPH:(null===d||void 0===d||null===(a=d.status)||void 0===a?void 0:a.toLowerCase().includes("forwarded to eeph"))||"eeph"===(null===d||void 0===d||null===(l=d.forwardedTo)||void 0===l||null===(s=l.section)||void 0===s?void 0:s.toLowerCase())}),c}),f(o(o({},x),{},{forwardedTo:{department:N,section:k,remarks:R},status:e})),y(!1),U(!1),te(!1),f(null),w(""),C(""),S(""),Z(""),alert("Forwarded successfully!"),P("\u2705 Successfully Forwarded to ".concat(k,"!")),setTimeout(()=>{P("")},5e3)},ze=e=>"Approved"===e||(null===e||void 0===e?void 0:e.startsWith("Forwarded to"));return(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[(0,u.jsx)("div",{className:"fixed top-0 left-0 right-0 w-full bg-white shadow-md z-50 p-6 pb-0",children:(0,u.jsx)(p,{title:"15th Finance Commission",user:t,onLogout:()=>{window.confirm("Are you sure you want to logout?")&&(null===r||void 0===r||r(),window.location.href="/")}})}),(0,u.jsxs)("div",{className:"flex items-start relative pt-20 overflow-x-hidden",children:[(0,u.jsx)(m,{menuItems:[{id:"dashboard",label:"Dashboard",icon:"\ud83d\udcca"},{id:"reports",label:"Reports",icon:"\ud83d\udcc4"},{id:"gos",label:"GO's",icon:"\ud83d\udccb"},{id:"circular",label:"Circular & Proceedings",icon:"\ud83d\udce2"},{id:"guidelines",label:"Guidelines",icon:"\ud83d\udcd0"}],selectedMenuItem:de,onMenuItemSelect:ue,isMenuOpen:pe,setIsMenuOpen:me}),(0,u.jsxs)("div",{className:"flex-1 p-6 pt-4 transition-all duration-300 min-w-0 ".concat(pe?"ml-64":"ml-0"),children:[(0,u.jsx)("div",{className:"max-w-[95%] mx-auto",children:(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border",children:[(0,u.jsx)("h2",{className:"font-semibold text-gray-700 mb-4",children:"Commissioner Dashboard"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-6",children:[(0,u.jsxs)("div",{onClick:()=>ce("noOfCrs"),className:"bg-blue-50 border border-blue-200 rounded-lg p-3 cursor-pointer hover:bg-blue-100 transition ".concat("noOfCrs"===ie?"ring-2 ring-blue-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"No. of CR's"}),(0,u.jsx)("div",{className:"text-xl font-bold text-blue-700",children:Ee})]}),(0,u.jsxs)("div",{onClick:()=>ce("allWorks"),className:"bg-purple-50 border border-purple-200 rounded-lg p-3 cursor-pointer hover:bg-purple-100 transition ".concat("allWorks"===ie?"ring-2 ring-purple-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-purple-600 font-medium mb-1",children:"No. of Works"}),(0,u.jsx)("div",{className:"text-xl font-bold text-purple-700",children:n.length})]}),(0,u.jsxs)("div",{onClick:()=>ce("pending"),className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 cursor-pointer hover:bg-yellow-100 transition ".concat("pending"===ie?"ring-2 ring-yellow-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-yellow-600 font-medium mb-1",children:"No. of Pending"}),(0,u.jsx)("div",{className:"text-xl font-bold text-yellow-700",children:we.length})]}),(0,u.jsxs)("div",{onClick:()=>ce("forwarded"),className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 cursor-pointer hover:bg-indigo-100 transition ".concat("forwarded"===ie?"ring-2 ring-indigo-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-indigo-600 font-medium mb-1",children:"No. of Forwarded"}),(0,u.jsx)("div",{className:"text-xl font-bold text-indigo-700",children:Re.length})]}),(0,u.jsxs)("div",{onClick:()=>ce("selfRejected"),className:"bg-orange-50 border border-orange-200 rounded-lg p-3 cursor-pointer hover:bg-orange-100 transition ".concat("selfRejected"===ie?"ring-2 ring-orange-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-orange-600 font-medium mb-1",children:"Self Rejected"}),(0,u.jsx)("div",{className:"text-xl font-bold text-orange-700",children:ke.length})]}),(0,u.jsxs)("div",{onClick:()=>ce("sentBackRejected"),className:"bg-red-50 border border-red-200 rounded-lg p-3 cursor-pointer hover:bg-red-100 transition ".concat("sentBackRejected"===ie?"ring-2 ring-red-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-red-600 font-medium mb-1",children:"Sent back REJECTED LIST"}),(0,u.jsx)("div",{className:"text-xl font-bold text-red-700",children:Se.length})]})]}),E&&(0,u.jsx)("div",{className:"mb-4 p-4 bg-green-500 text-white rounded-lg shadow-lg text-center font-semibold text-base animate-pulse",children:E}),L&&(0,u.jsx)("div",{className:"p-2 bg-blue-50 border border-blue-200 text-blue-700 rounded mb-2",children:L}),D&&(0,u.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 text-green-700 rounded mb-2",children:D}),I&&(0,u.jsx)("div",{className:"p-2 bg-red-50 border border-red-200 text-red-700 rounded mb-2",children:I}),(()=>{const e=Pe(ie),r=e.filter(e=>{if(xe.crNumber&&!(e.crNumber||"").toLowerCase().includes(xe.crNumber.toLowerCase()))return!1;if(xe.crDate&&!(e.crDate||"").toLowerCase().includes(xe.crDate.toLowerCase()))return!1;if(xe.sector&&e.sector!==xe.sector)return!1;if(xe.status&&e.status!==xe.status)return!1;if(xe.proposal&&!(e.proposal||"").toLowerCase().includes(xe.proposal.toLowerCase()))return!1;if(xe.cost&&!l(e.cost||0).toLowerCase().includes(xe.cost.toLowerCase()))return!1;const t=(e=>{if(!e)return"";if(e.locality)return e.locality;if(e.area&&e.wardNo){const t=[];return e.area&&t.push(e.area),e.locality&&t.push(e.locality),e.wardNo&&t.push("Ward No: ".concat(e.wardNo)),t.join(", ")}return e.locality||"-"})(e).toLowerCase();if(xe.locality&&!t.includes(xe.locality.toLowerCase()))return!1;const r=(e.latlong||"").toLowerCase();return!(xe.latLong&&!r.includes(xe.latLong.toLowerCase()))&&!(xe.priority&&!(e.priority||"").toString().includes(xe.priority))});const n="pending"===ie,a=(e=>{const t=new Set;return e.forEach(e=>{e.sector&&t.add(e.sector)}),Array.from(t).sort()})(e),s=(e=>{const t=new Set;return e.forEach(e=>{e.status&&t.add(e.status)}),Array.from(t).sort()})(e);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"text-sm text-gray-600 mb-4",children:Le(ie)}),n&&r.length>0&&(0,u.jsxs)("div",{className:"mb-3 flex gap-2 items-center",children:[(0,u.jsxs)("button",{onClick:Oe,disabled:0===H.length,className:"px-4 py-2 text-xs rounded ".concat(0===H.length?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-green-600 text-white hover:bg-green-700"),children:["Approve Selected (",H.length,")"]}),(0,u.jsxs)("button",{onClick:Ae,disabled:0===H.length,className:"px-4 py-2 text-xs rounded ".concat(0===H.length?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-red-600 text-white hover:bg-red-700"),children:["Reject Selected (",H.length,")"]}),H.length>0&&(0,u.jsx)("button",{onClick:()=>B([]),className:"px-3 py-2 text-xs rounded bg-gray-400 text-white hover:bg-gray-500",children:"Clear Selection"})]}),(0,u.jsx)("div",{className:"overflow-auto max-h-80",children:(0,u.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,u.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,u.jsxs)("tr",{children:[n&&(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsx)("input",{type:"checkbox",checked:(()=>{const e=r.filter(e=>{const r="Rejected"===e.status&&(!e.rejectedBy||"Commissioner"===e.rejectedBy||e.rejectedBy===(null===t||void 0===t?void 0:t.username));return!ze(e.status)||r}).map(e=>e.id);return e.length>0&&e.every(e=>H.includes(e))})(),onChange:Te,className:"cursor-pointer"})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Number"}),(0,u.jsx)("button",{onClick:()=>be("crNumber"),className:"text-xs hover:text-blue-600",title:"Filter by CR Number",children:"\ud83d\udd0d"}),he.crNumber&&(0,u.jsx)("input",{type:"text",value:xe.crNumber,onChange:e=>fe(o(o({},xe),{},{crNumber:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Date"}),(0,u.jsx)("button",{onClick:()=>be("crDate"),className:"text-xs hover:text-blue-600",title:"Filter by CR Date",children:"\ud83d\udd0d"}),he.crDate&&(0,u.jsx)("input",{type:"text",value:xe.crDate,onChange:e=>fe(o(o({},xe),{},{crDate:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Sector"}),(0,u.jsx)("button",{onClick:()=>be("sector"),className:"text-xs hover:text-blue-600",title:"Filter by Sector",children:"\ud83d\udd0d"}),he.sector&&(0,u.jsxs)("select",{value:xe.sector,onChange:e=>fe(o(o({},xe),{},{sector:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),a.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]})}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Proposal"}),(0,u.jsx)("button",{onClick:()=>be("proposal"),className:"text-xs hover:text-blue-600",title:"Filter by Proposal",children:"\ud83d\udd0d"}),he.proposal&&(0,u.jsx)("input",{type:"text",value:xe.proposal,onChange:e=>fe(o(o({},xe),{},{proposal:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Cost"}),(0,u.jsx)("button",{onClick:()=>be("cost"),className:"text-xs hover:text-blue-600",title:"Filter by Cost",children:"\ud83d\udd0d"}),he.cost&&(0,u.jsx)("input",{type:"text",value:xe.cost,onChange:e=>fe(o(o({},xe),{},{cost:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Locality"}),(0,u.jsx)("button",{onClick:()=>be("locality"),className:"text-xs hover:text-blue-600",title:"Filter by Locality",children:"\ud83d\udd0d"}),he.locality&&(0,u.jsx)("input",{type:"text",value:xe.locality,onChange:e=>fe(o(o({},xe),{},{locality:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Lat/Long"}),(0,u.jsx)("button",{onClick:()=>be("latLong"),className:"text-xs hover:text-blue-600",title:"Filter by Lat/Long",children:"\ud83d\udd0d"}),he.latLong&&(0,u.jsx)("input",{type:"text",value:xe.latLong,onChange:e=>fe(o(o({},xe),{},{latLong:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Priority"}),(0,u.jsx)("button",{onClick:()=>be("priority"),className:"text-xs hover:text-blue-600",title:"Filter by Priority",children:"\ud83d\udd0d"}),he.priority&&(0,u.jsx)("input",{type:"text",value:xe.priority,onChange:e=>fe(o(o({},xe),{},{priority:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Status"}),(0,u.jsx)("button",{onClick:()=>be("status"),className:"text-xs hover:text-blue-600",title:"Filter by Status",children:"\ud83d\udd0d"}),he.status&&(0,u.jsxs)("select",{value:xe.status,onChange:e=>fe(o(o({},xe),{},{status:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),s.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]}),(xe.crNumber||xe.crDate||xe.sector||xe.status||xe.proposal||xe.cost||xe.locality||xe.latLong||xe.priority)&&(0,u.jsx)("button",{onClick:()=>{fe({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),ge({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1})},className:"text-xs text-blue-600 hover:text-blue-800 px-1 ml-1",title:"Clear Filters",children:"\u2715"})]})}),n&&(0,u.jsx)("th",{className:"p-2 text-left",children:"Actions"}),!n&&("selfRejected"===ie||"sentBackRejected"===ie)&&(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Remarks"})]})}),(0,u.jsx)("tbody",{children:(()=>{if(0===r.length){const e=n||"selfRejected"===ie||"sentBackRejected"===ie?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}if(["allWorks","pending","forwarded","selfRejected","sentBackRejected"].includes(ie))return r.map((e,r)=>{const a="Rejected"===e.status&&(!e.rejectedBy||"Commissioner"===e.rejectedBy||e.rejectedBy===(null===t||void 0===t?void 0:t.username)),s=!ze(e.status)||a;return(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[n&&(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)("input",{type:"checkbox",checked:H.includes(e.id),onChange:()=>Ie(e.id),disabled:!s,className:"cursor-pointer"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r+1}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):null}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:"pending"===ie&&a?(0,u.jsx)("span",{className:"text-orange-600",children:"Rejected (Re-review)"}):"selfRejected"===ie||"sentBackRejected"===ie?(0,u.jsx)("span",{className:"text-red-700",children:e.rejectedBy?"Rejected by ".concat(e.rejectedBy):"EEPH Rejected"===e.status?"Rejected by EEPH":"SEPH Rejected"===e.status?"Rejected by SEPH":"ENCPH Rejected"===e.status?"Rejected by ENCPH":"Rejected"===e.status?"Rejected by Commissioner":e.status}):"approved"===ie?(0,u.jsx)("span",{className:"text-green-700",children:e.status}):e.status||"Pending"}),n&&(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>Fe(e),className:"px-2 py-1 bg-indigo-600 text-white rounded text-xs",children:"Review"}),(0,u.jsx)("button",{onClick:()=>De(e.id),disabled:ze(e.status)&&!a,className:"px-2 py-1 text-xs rounded ".concat("Approved"===e.status?"bg-gray-300":"bg-green-600 text-white"),children:"Approve"}),(0,u.jsx)("button",{onClick:()=>_e(e.id),disabled:!1,className:"px-2 py-1 text-xs rounded bg-red-600 text-white",children:"Reject"})]})}),!n&&("selfRejected"===ie||"sentBackRejected"===ie)&&(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600 max-w-xs truncate align-top",title:e.remarks||"-",children:e.remarks||"-"})]},e.id)});const e={};r.forEach(t=>{const r=(t.crNumber||"").trim().toUpperCase()||"__NO_CR__";e[r]||(e[r]=[]),e[r].push(t)});const a=Object.values(e).filter(e=>"__NO_CR__"!==((e[0].crNumber||"").trim().toUpperCase()||"__NO_CR__"));if(0===a.length){const e=n||"selfRejected"===ie||"sentBackRejected"===ie?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}let s=0;return a.map((e,r)=>e.map((e,r)=>{const a=0===r;a&&s++;const o="Rejected"===e.status&&(!e.rejectedBy||"Commissioner"===e.rejectedBy||e.rejectedBy===(null===t||void 0===t?void 0:t.username)),i=!ze(e.status)||o;return(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[n&&(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)("input",{type:"checkbox",checked:H.includes(e.id),onChange:()=>Ie(e.id),disabled:!i,className:"cursor-pointer"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:a?s:""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:a?e.crNumber||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:a?e.crDate||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:a?e.sector:""}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):null}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:"pending"===ie&&o?(0,u.jsx)("span",{className:"text-orange-600",children:"Rejected (Re-review)"}):"selfRejected"===ie||"sentBackRejected"===ie?(0,u.jsx)("span",{className:"text-red-700",children:e.rejectedBy?"Rejected by ".concat(e.rejectedBy):"EEPH Rejected"===e.status?"Rejected by EEPH":"SEPH Rejected"===e.status?"Rejected by SEPH":"ENCPH Rejected"===e.status?"Rejected by ENCPH":"Rejected"===e.status?"Rejected by Commissioner":e.status}):"approved"===ie?(0,u.jsx)("span",{className:"text-green-700",children:e.status}):e.status||"Pending"}),n&&(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>Fe(e),className:"px-2 py-1 bg-indigo-600 text-white rounded text-xs",children:"Review"}),(0,u.jsx)("button",{onClick:()=>De(e.id),disabled:ze(e.status)&&!o,className:"px-2 py-1 text-xs rounded ".concat("Approved"===e.status?"bg-gray-300":"bg-green-600 text-white"),children:"Approve"}),(0,u.jsx)("button",{onClick:()=>_e(e.id),disabled:!1,className:"px-2 py-1 text-xs rounded bg-red-600 text-white",children:"Reject"})]})}),!n&&("selfRejected"===ie||"sentBackRejected"===ie)&&(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600 max-w-xs truncate align-top",title:e.remarks||"-",children:e.remarks||"-"})]},e.id)})).flat()})()})]})})]})})(),j&&x&&"Approved"===x.status&&(0,u.jsxs)("div",{className:"bg-white border rounded-xl shadow p-5 mt-6",children:[(0,u.jsx)("h4",{className:"font-semibold mb-3",children:"Forward Approved Work to Department"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Department"}),(0,u.jsxs)("select",{className:"w-full border p-2 rounded mt-1",value:N,onChange:e=>w(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select department"}),Object.keys(je).map(e=>(0,u.jsx)("option",{children:e},e))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Section"}),(0,u.jsxs)("select",{className:"w-full border p-2 rounded mt-1",value:k,onChange:e=>C(e.target.value),disabled:!N,children:[(0,u.jsx)("option",{value:"",children:"Select section"}),N&&je[N].map(e=>(0,u.jsx)("option",{children:e},e))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Remarks"}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:R,onChange:e=>S(e.target.value)})]})]}),(0,u.jsx)("div",{className:"flex justify-end mt-4",children:(0,u.jsx)("button",{onClick:Me,className:"px-4 py-2 bg-green-600 text-white rounded",children:"Forward"})}),E&&(0,u.jsx)("div",{className:"mt-2 text-green-700 text-sm",children:E})]}),W&&x&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:ee?"Forward Approved Work to Department":"Approve Work"}),(0,u.jsx)("button",{onClick:()=>{U(!1),Z(""),te(!1),f(null),w(""),C(""),S("")},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"CR Number:"})," ",x.crNumber||"-"]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",x.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",x.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(x.cost)]})]})]}),ee?(0,u.jsxs)(u.Fragment,{children:[D&&(0,u.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded text-sm",children:D}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Department"}),(0,u.jsxs)("select",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:N,onChange:e=>w(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select department"}),Object.keys(je).map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Section"}),(0,u.jsxs)("select",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:k,onChange:e=>C(e.target.value),disabled:!N,children:[(0,u.jsx)("option",{value:"",children:"Select section"}),N&&je[N].map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Optional)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:4,value:R,onChange:e=>S(e.target.value),placeholder:"Enter remarks for forwarding (optional)..."})]})]}),E&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded text-sm",children:E}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{U(!1),Z(""),te(!1),f(null),w(""),C(""),S("")},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:Me,disabled:!N||!k,className:"px-5 py-2 rounded ".concat(N&&k?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"," text-white"),children:"Forward"})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Optional)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:6,value:Y,onChange:e=>Z(e.target.value),placeholder:"Enter remarks for approval (optional)..."})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{U(!1),Z(""),te(!1),f(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{x&&(a(e=>{const t=e.map(e=>e.id===x.id?o(o({},e),{},{status:"Approved",remarks:Y||""}):e),r=t.find(e=>e.id===x.id);return r&&f(r),t}),te(!0),w(""),C(""),S(""),_("Work approved successfully."),setTimeout(()=>_(""),1500))},className:"px-5 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm Approval"})]})]})]})}),O&&x&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:"Reject Work"}),(0,u.jsx)("button",{onClick:()=>{A(!1),z(""),f(null)},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",x.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",x.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(x.cost)]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Required)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:6,value:M,onChange:e=>z(e.target.value),placeholder:"Please enter reason for rejection...",required:!0})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{A(!1),z(""),f(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{M&&x?(console.log("\ud83d\udd34 Commissioner rejecting task:",{taskId:x.id,currentStatus:x.status,remarks:M}),a(e=>{const t=e.map(e=>{if(e.id===x.id){const t=o(o({},e),{},{status:"Rejected",remarks:M,rejectedBy:"Commissioner"});return console.log("\ud83d\udd34 Updated item:",t),t}return e});console.log("\ud83d\udd34 Updated submissions count:",t.length),console.log("\ud83d\udd34 Rejected items in updated array:",t.filter(e=>"Rejected"===e.status&&"Commissioner"===e.rejectedBy));const r=t.find(e=>e.id===x.id);return r&&f(r),t}),T("Work rejected successfully."),setTimeout(()=>{T(""),A(!1),f(null),z("")},1500)):alert("Please enter remarks before rejecting.")},className:"px-5 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Submit Rejection"})]})]})}),q&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsxs)("h4",{className:"font-semibold text-lg",children:["Approve ",H.length," Selected Work(s)"]}),(0,u.jsx)("button",{onClick:()=>{K(!1),J("")},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["You are about to approve ",H.length," work(s)."]})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Optional)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:6,value:X,onChange:e=>J(e.target.value),placeholder:"Enter remarks for approval (optional)..."})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{K(!1),J("")},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{H.length;a(e=>e.map(e=>H.includes(e.id)?o(o({},e),{},{status:"Approved",remarks:X||""}):e)),se([...H]),B([]),K(!1),J(""),ne(!0),w(""),C(""),S("")},className:"px-5 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm Approval"})]})]})}),V&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsxs)("h4",{className:"font-semibold text-lg",children:["Reject ",H.length," Selected Work(s)"]}),(0,u.jsx)("button",{onClick:()=>{$(!1),G("")},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["You are about to reject ",H.length," work(s)."]})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Required)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:6,value:Q,onChange:e=>G(e.target.value),placeholder:"Please enter reason for rejection (will be applied to all selected items)...",required:!0})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{$(!1),G("")},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{if(!Q)return void alert("Please enter remarks before rejecting.");const e=H.length;a(e=>e.map(e=>H.includes(e.id)?o(o({},e),{},{status:"Rejected",remarks:Q,rejectedBy:"Commissioner"}):e)),B([]),G(""),$(!1),T("".concat(e," work(s) rejected successfully.")),setTimeout(()=>T(""),3e3)},className:"px-5 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Submit Rejection"})]})]})}),re&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsxs)("h4",{className:"font-semibold text-lg",children:["Forward ",ae.length," Approved Work(s) to Department"]}),(0,u.jsx)("button",{onClick:()=>{ne(!1),se([]),w(""),C(""),S("")},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["You are about to forward ",ae.length," approved work(s)."]})}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Department"}),(0,u.jsxs)("select",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:N,onChange:e=>w(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select department"}),Object.keys(je).map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Section"}),(0,u.jsxs)("select",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:k,onChange:e=>C(e.target.value),disabled:!N,children:[(0,u.jsx)("option",{value:"",children:"Select section"}),N&&je[N].map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Optional)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:4,value:R,onChange:e=>S(e.target.value),placeholder:"Enter remarks for forwarding (optional)..."})]})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{ne(!1),se([]),w(""),C(""),S("")},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{if(!N||!k||0===ae.length)return void alert("Select department and section");const e="Forwarded to ".concat(k),t=ae.length;a(t=>t.map(t=>ae.includes(t.id)?o(o({},t),{},{forwardedTo:{department:N,section:k,remarks:R},status:e}):t)),ne(!1),se([]),w(""),C(""),S(""),alert("Forwarded successfully!"),P("\u2705 Successfully Forwarded ".concat(t," work(s) to ").concat(k,"!")),setTimeout(()=>{P("")},5e3)},disabled:!N||!k,className:"px-5 py-2 rounded ".concat(N&&k?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"," text-white"),children:"Forward"})]})]})})]})}),b&&x&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow max-w-4xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,u.jsx)("h3",{className:"font-semibold text-lg",children:"Work Details Review"}),(0,u.jsx)("button",{onClick:()=>v(!1),className:"px-3 py-1 bg-red-500 text-white rounded",children:"Close"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[["sector","proposal","cost","locality","priority"].map(e=>(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 capitalize",children:e}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:h[e],onChange:t=>g(o(o({},h),{},{[e]:t.target.value}))})]},e)),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Latitude/Longitude or Google Maps URL"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:h.latlong||"",onChange:e=>g(o(o({},h),{},{latlong:e.target.value})),rows:2})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Number"}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:h.crNumber||"",onChange:e=>g(o(o({},h),{},{crNumber:e.target.value}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Date"}),(0,u.jsx)("input",{type:"date",className:"w-full border p-2 rounded mt-1",value:h.crDate||"",onChange:e=>g(o(o({},h),{},{crDate:e.target.value}))})]})]}),(0,u.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-sm text-gray-700",children:"Attached Files"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Work Image"}),(()=>{const e=h.workImage||x.workImage,t=s(e);return t?(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("img",{src:t,alt:"Work",className:"rounded max-h-40 border",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="block")}}),(0,u.jsx)("div",{style:{display:"none"},className:"text-sm text-gray-500",children:"Image preview unavailable"})]}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No image attached"})})(),(0,u.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&g(o(o({},h),{},{workImage:t}))},className:"w-full border p-2 rounded text-sm bg-white"})]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Estimation Report"}),(()=>{const e=h.detailedReport||x.detailedReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Current Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})(),(0,u.jsx)("input",{type:"file",accept:".pdf,.doc,.docx",onChange:e=>{const t=e.target.files[0];t&&g(o(o({},h),{},{detailedReport:t}))},className:"w-full border p-2 rounded text-sm bg-white"})]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Committee Report"}),(()=>{const e=h.committeeReport||x.committeeReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Current Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})(),(0,u.jsx)("input",{type:"file",accept:".pdf,.doc,.docx",onChange:e=>{const t=e.target.files[0];t&&g(o(o({},h),{},{committeeReport:t}))},className:"w-full border p-2 rounded text-sm bg-white"})]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Council Resolution Report"}),(()=>{const e=h.councilResolution||x.councilResolution,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Current Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})(),(0,u.jsx)("input",{type:"file",accept:".pdf,.doc,.docx",onChange:e=>{const t=e.target.files[0];t&&g(o(o({},h),{},{councilResolution:t}))},className:"w-full border p-2 rounded text-sm bg-white"})]})]})]}),(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Commissioner Remarks"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:h.remarks,onChange:e=>g(o(o({},h),{},{remarks:e.target.value}))})]}),(0,u.jsx)("div",{className:"flex justify-end mt-4",children:(0,u.jsx)("button",{onClick:()=>{x&&(a(e=>e.map(e=>e.id===x.id?o(o(o({},e),h),{},{remarks:h.remarks}):e)),F("Changes saved successfully."),setTimeout(()=>F(""),1500),v(!1))},className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save Changes"})})]})})]})]})]})}function De(e){let{user:t,logout:r,forwardedSubmissions:n,setForwardedSubmissions:a}=e;const l=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0).replace("INR","\u20b9"),s=e=>e?e instanceof File?URL.createObjectURL(e):"string"===typeof e?e:null:null,i=e=>{if(!e)return!1;const t=["jpg","jpeg","png","gif","webp","bmp","svg"],r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml"];if(e instanceof File){var n;const a=(null===(n=(e.name||"").split(".").pop())||void 0===n?void 0:n.toLowerCase())||"";return t.includes(a)||r.includes(e.type)}if("string"===typeof e){var a;if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();return r.some(t=>e.includes(t.split("/")[1]))}}const n=(null===(a=e.split(".").pop())||void 0===a?void 0:a.toLowerCase())||"";return t.includes(n)}return!1},d=e=>{let{file:t,defaultName:r="document.pdf"}=e;const[n,a]=(0,c.useState)(!1);if(!t)return(0,u.jsx)("span",{className:"text-gray-400 text-xs",children:"No file"});const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document";if(!e)return null;let r=t,n=null,a="PDF";if(e instanceof File){var l;r=e.name||t,n=e.size;const s=(null===(l=r.split(".").pop())||void 0===l?void 0:l.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===s?"PDF":["doc","docx"].includes(s)?"DOC":s.toUpperCase()||"FILE"}else if("string"===typeof e){if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();a=e.includes("pdf")?"PDF":e.includes("image")?"IMAGE":e.includes("document")||e.includes("msword")?"DOC":"FILE"}n=Math.round(3*e.length/4)}else{var s;const t=(null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===t?"PDF":["doc","docx"].includes(t)?"DOC":t.toUpperCase()||"FILE"}r=t}return{fileName:r,fileSize:n,fileType:a}}(t,r),o=s(t),d=e=>{e.preventDefault(),o&&window.open(o,"_blank")};return i(t)&&!n&&o?(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px] overflow-hidden",children:[(0,u.jsx)("img",{src:o,alt:l.fileName,className:"w-full h-16 object-cover rounded mb-1",onError:()=>a(!0)}),(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName})]}):(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px]",children:[(0,u.jsx)("div",{className:"w-full h-8 rounded mb-1 overflow-hidden relative flex items-center justify-center ".concat("PDF"===l.fileType?"bg-gradient-to-br from-red-100 to-red-200":"DOC"===l.fileType||"DOCX"===l.fileType?"bg-gradient-to-br from-blue-100 to-blue-200":"bg-gradient-to-br from-gray-100 to-gray-200"),children:(0,u.jsx)("div",{className:"text-[10px] font-bold ".concat("PDF"===l.fileType?"text-red-600":"DOC"===l.fileType||"DOCX"===l.fileType?"text-blue-600":"text-gray-700"),children:l.fileType})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName}),l.fileSize&&(0,u.jsx)("div",{className:"text-[7px] text-gray-500",children:(p=l.fileSize,p?p<1024?p+" B":p<1048576?(p/1024).toFixed(1)+" KB":(p/1048576).toFixed(1)+" MB":"")})]})]});var p},[x,f]=(0,c.useState)("pending"),[h,g]=(0,c.useState)({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),[b,v]=(0,c.useState)({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1}),j=e=>{v(t=>o(o({},t),{},{[e]:!t[e]}))},[y,N]=(0,c.useState)(null),[w,k]=(0,c.useState)(null),[C,R]=(0,c.useState)(!1),[S,E]=(0,c.useState)(""),[P,L]=(0,c.useState)(""),[F,D]=(0,c.useState)(""),[_,I]=(0,c.useState)(""),[T,O]=(0,c.useState)(!1),[A,M]=(0,c.useState)(""),[z,W]=(0,c.useState)(!1),[U,H]=(0,c.useState)(""),[B,V]=(0,c.useState)(!1),[$,Q]=(0,c.useState)(""),[G,q]=(0,c.useState)(""),[K,X]=(0,c.useState)(""),J=(0,c.useRef)([]),Y={Administration:["SEPH","ENCPH"]},Z=oe(),ee=le();(0,c.useEffect)(()=>{"/"!==ee.pathname&&window.history.pushState(null,"",window.location.pathname)},[ee.pathname]),(0,c.useEffect)(()=>{const e=e=>{if("/"!==ee.pathname){window.confirm("Are you sure you want to logout?")?(null===r||void 0===r||r(),Z("/",{replace:!0})):window.history.pushState(null,"",window.location.pathname)}};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[ee.pathname,r,Z]),(0,c.useEffect)(()=>{if("/"===ee.pathname&&window.history.state&&document.referrer&&!document.referrer.includes("/login")){window.confirm("Are you sure you want to logout?")?null===r||void 0===r||r():window.history.go(1)}},[ee.pathname,r]);const te=(0,c.useMemo)(()=>{console.log("\ud83d\udd0d EEPH - All submissions count:",n.length);const e=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("eeph")||"eeph"===n});console.log("\ud83d\udd0d EEPH - Submissions with EEPH in status or section:",e.length,e.map(e=>{var t;return{id:e.id,status:e.status,section:null===(t=e.forwardedTo)||void 0===t?void 0:t.section,forwardedTo:e.forwardedTo}}));const t=n.filter(e=>{var t;const r=(e.status||"").trim(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim(),a=r.toLowerCase(),l=n.toLowerCase(),s=a.includes("forwarded to eeph"),o="eeph"===l,i=a.startsWith("forwarded to")&&"eeph"===l;if(s||o||i)return"EEPH Approved"!==r&&"EEPH Rejected"!==r&&(console.log("\u2705 EEPH Filter - MATCHED (forwarded to EEPH):",{id:e.id,status:r,section:n,forwardedTo:e.forwardedTo}),!0);["EEPH Approved","EEPH Rejected","SEPH Rejected"].includes(r)||a.includes("forwarded to seph");return!1});return console.log("\ud83d\udd0d EEPH Pending List Result:",{totalSubmissions:n.length,pendingCount:t.length,pendingIds:t.map(e=>e.id),pendingDetails:t.map(e=>{var t;return{id:e.id,status:e.status,section:null===(t=e.forwardedTo)||void 0===t?void 0:t.section,forwardedTo:e.forwardedTo}})}),t},[n]),re=(0,c.useMemo)(()=>n.filter(e=>"EEPH Approved"===e.status),[n]),ne=(0,c.useMemo)(()=>n.filter(e=>{var t;const r=e.status||"",n=(null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"";return r.includes("Forwarded to SEPH")||r.toLowerCase().includes("forwarded to seph")||"seph"===n.toLowerCase()}),[n]),ae=(0,c.useMemo)(()=>n.filter(e=>"EEPH Rejected"===e.status||"SEPH Rejected"===e.status),[n]),se=(0,c.useMemo)(()=>n.filter(e=>"SEPH Rejected"===e.status),[n]),ie=e=>{switch(e){case"pending":default:return"Pending Works";case"allWorks":return"All Works";case"approved":return"Approved Tasks";case"forwarded":return"Forwarded Tasks";case"rejected":return"Rejected Tasks";case"sentBackRejected":return"Sent back REJECTED LIST";case"noOfCrs":return"All Works (by CR Number)"}};(0,c.useEffect)(()=>{const e=J.current;return()=>{e.forEach(e=>URL.revokeObjectURL(e))}},[]);const ce=e=>{const t=n.find(t=>t.id===e.id)||e;console.log("\ud83d\udd0d EEPH openPreview - Original sub:",e),console.log("\ud83d\udd0d EEPH openPreview - Fresh sub from array:",t),console.log("\ud83d\udd0d EEPH openPreview - Files check:",{workImage:t.workImage instanceof File,detailedReport:t.detailedReport instanceof File,committeeReport:t.committeeReport instanceof File,councilResolution:t.councilResolution instanceof File,workImageExists:!!t.workImage,detailedReportExists:!!t.detailedReport,committeeReportExists:!!t.committeeReport,councilResolutionExists:!!t.councilResolution}),console.log("\ud83d\udd0d EEPH openPreview - File Details:",{workImage:t.workImage?t.workImage instanceof File?"File: ".concat(t.workImage.name):typeof t.workImage:"null",detailedReport:t.detailedReport?t.detailedReport instanceof File?"File: ".concat(t.detailedReport.name):typeof t.detailedReport:"null",committeeReport:t.committeeReport?t.committeeReport instanceof File?"File: ".concat(t.committeeReport.name):typeof t.committeeReport:"null",councilResolution:t.councilResolution?t.councilResolution instanceof File?"File: ".concat(t.councilResolution.name):typeof t.councilResolution:"null"}),console.log("\ud83d\udd0d EEPH openPreview - Original sub Files:",{workImage:e.workImage?e.workImage instanceof File?"File: ".concat(e.workImage.name):typeof e.workImage:"null",detailedReport:e.detailedReport?e.detailedReport instanceof File?"File: ".concat(e.detailedReport.name):typeof e.detailedReport:"null",committeeReport:e.committeeReport?e.committeeReport instanceof File?"File: ".concat(e.committeeReport.name):typeof e.committeeReport:"null",councilResolution:e.councilResolution?e.councilResolution instanceof File?"File: ".concat(e.councilResolution.name):typeof e.councilResolution:"null"});const r=o(o({},t),{},{workImage:t.workImage||e.workImage||null,detailedReport:t.detailedReport||e.detailedReport||null,committeeReport:t.committeeReport||e.committeeReport||null,councilResolution:t.councilResolution||e.councilResolution||null});N(r),k({sector:r.sector||"",proposal:r.proposal||"",cost:r.cost||0,locality:r.locality||"",latlong:r.latlong||"",priority:r.priority||"",crNumber:r.crNumber||"",crDate:r.crDate||"",remarks:r.remarks||"",workImage:r.workImage||null,detailedReport:r.detailedReport||null,committeeReport:r.committeeReport||null,councilResolution:r.councilResolution||null}),R(!0)},de=e=>{const t=n.find(t=>t.id===e);t&&(O(!1),R(!1),N(t),W(!0),H(""),V(!1))},ue=e=>{const t=n.find(t=>t.id===e);t&&(W(!1),R(!1),N(t),O(!0),M(""))},pe=e=>["EEPH Approved","EEPH Rejected","Forwarded to SEPH"].includes(e),[me,xe]=(0,c.useState)("dashboard"),[fe,he]=(0,c.useState)(!0);return(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[(0,u.jsx)("div",{className:"fixed top-0 left-0 right-0 w-full bg-white shadow-md z-50 p-6 pb-0",children:(0,u.jsx)(p,{title:"15th Finance Commission",user:t,onLogout:()=>{window.confirm("Are you sure you want to logout?")&&(null===r||void 0===r||r(),window.location.href="/")}})}),(0,u.jsxs)("div",{className:"flex items-start relative pt-20 overflow-x-hidden",children:[(0,u.jsx)(m,{menuItems:[{id:"dashboard",label:"Dashboard",icon:"\ud83d\udcca"},{id:"reports",label:"Reports",icon:"\ud83d\udcc4"},{id:"gos",label:"GO's",icon:"\ud83d\udccb"},{id:"circular",label:"Circular & Proceedings",icon:"\ud83d\udce2"},{id:"guidelines",label:"Guidelines",icon:"\ud83d\udcd0"}],selectedMenuItem:me,onMenuItemSelect:xe,isMenuOpen:fe,setIsMenuOpen:he}),(0,u.jsx)("div",{className:"flex-1 p-6 pt-4 transition-all duration-300 min-w-0 ".concat(fe?"ml-64":"ml-0"),children:(0,u.jsxs)("div",{className:"max-w-[95%] mx-auto",children:[(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border",children:[(0,u.jsx)("h2",{className:"font-semibold text-gray-700 mb-4",children:"EEPH Dashboard"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-6",children:[(0,u.jsxs)("div",{onClick:()=>f("noOfCrs"),className:"bg-blue-50 border border-blue-200 rounded-lg p-3 cursor-pointer hover:bg-blue-100 transition ".concat("noOfCrs"===x?"ring-2 ring-blue-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"No. of CR's"}),(0,u.jsx)("div",{className:"text-xl font-bold text-blue-700",children:(()=>{const e=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to eeph")||"eeph"===n||r.includes("eeph approved")||r.includes("eeph rejected")||r.includes("forwarded to seph")||"seph"===n}),t={};return e.forEach(e=>{const r=(e.crNumber||"").trim().toUpperCase()||"__NO_CR__";t[r]||(t[r]=[]),t[r].push(e)}),Object.keys(t).filter(e=>"__NO_CR__"!==e).length})()})]}),(0,u.jsxs)("div",{onClick:()=>f("allWorks"),className:"bg-purple-50 border border-purple-200 rounded-lg p-3 cursor-pointer hover:bg-purple-100 transition ".concat("allWorks"===x?"ring-2 ring-purple-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-purple-600 font-medium mb-1",children:"No. of Works"}),(0,u.jsx)("div",{className:"text-xl font-bold text-purple-700",children:n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to eeph")||"eeph"===n||r.includes("eeph approved")||r.includes("eeph rejected")||r.includes("forwarded to seph")||"seph"===n}).length})]}),(0,u.jsxs)("div",{onClick:()=>f("pending"),className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 cursor-pointer hover:bg-yellow-100 transition ".concat("pending"===x?"ring-2 ring-yellow-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-yellow-600 font-medium mb-1",children:"No. of Pending"}),(0,u.jsx)("div",{className:"text-xl font-bold text-yellow-700",children:te.length})]}),(0,u.jsxs)("div",{onClick:()=>f("forwarded"),className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 cursor-pointer hover:bg-indigo-100 transition ".concat("forwarded"===x?"ring-2 ring-indigo-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-indigo-600 font-medium mb-1",children:"No. of Forwarded"}),(0,u.jsx)("div",{className:"text-xl font-bold text-indigo-700",children:ne.length})]}),(0,u.jsxs)("div",{onClick:()=>f("rejected"),className:"bg-red-50 border border-red-200 rounded-lg p-3 cursor-pointer hover:bg-red-100 transition ".concat("rejected"===x?"ring-2 ring-red-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-red-600 font-medium mb-1",children:"No. of Rejected"}),(0,u.jsx)("div",{className:"text-xl font-bold text-red-700",children:ae.filter(e=>"EEPH Rejected"===e.status).length})]}),(0,u.jsxs)("div",{onClick:()=>f("sentBackRejected"),className:"bg-orange-50 border border-orange-200 rounded-lg p-3 cursor-pointer hover:bg-orange-100 transition ".concat("sentBackRejected"===x?"ring-2 ring-orange-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-orange-600 font-medium mb-1",children:"Sent back REJECTED LIST"}),(0,u.jsx)("div",{className:"text-xl font-bold text-orange-700",children:n.filter(e=>"SEPH Rejected"===e.status).length})]})]}),_&&(0,u.jsx)("div",{className:"mb-4 p-4 bg-green-500 text-white rounded-lg shadow-lg text-center font-semibold text-base animate-pulse",children:_}),$&&(0,u.jsx)("div",{className:"p-2 bg-blue-50 border border-blue-200 text-blue-700 rounded mb-2",children:$}),G&&(0,u.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 text-green-700 rounded mb-2",children:G}),K&&(0,u.jsx)("div",{className:"p-2 bg-red-50 border border-red-200 text-red-700 rounded mb-2",children:K}),(()=>{const e=(e=>{let t=[];switch(e){case"pending":default:t=te;break;case"allWorks":t=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to eeph")||"eeph"===n||r.includes("eeph approved")||r.includes("eeph rejected")||r.includes("forwarded to seph")||"seph"===n});break;case"approved":t=re;break;case"forwarded":t=ne;break;case"rejected":t=ae.filter(e=>"EEPH Rejected"===e.status);break;case"sentBackRejected":t=se;break;case"noOfCrs":t=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to eeph")||"eeph"===n||r.includes("eeph approved")||r.includes("eeph rejected")||r.includes("forwarded to seph")||"seph"===n})}return[...t].sort((e,t)=>(Number(e.priority)||0)-(Number(t.priority)||0))})(x),t=e.filter(e=>{if(h.crNumber&&!(e.crNumber||"").toLowerCase().includes(h.crNumber.toLowerCase()))return!1;if(h.crDate&&!(e.crDate||"").toLowerCase().includes(h.crDate.toLowerCase()))return!1;if(h.sector&&e.sector!==h.sector)return!1;if(h.status&&e.status!==h.status)return!1;if(h.proposal&&!(e.proposal||"").toLowerCase().includes(h.proposal.toLowerCase()))return!1;if(h.cost&&!l(e.cost||0).toLowerCase().includes(h.cost.toLowerCase()))return!1;const t=(e=>{if(!e)return"";if(e.locality)return e.locality;if(e.area&&e.wardNo){const t=[];return e.area&&t.push(e.area),e.locality&&t.push(e.locality),e.wardNo&&t.push("Ward No: ".concat(e.wardNo)),t.join(", ")}return e.locality||"-"})(e).toLowerCase();if(h.locality&&!t.includes(h.locality.toLowerCase()))return!1;const r="".concat(e.latitude||""," ").concat(e.longitude||"").toLowerCase();return!(h.latLong&&!r.includes(h.latLong.toLowerCase()))&&!(h.priority&&!(e.priority||"").toString().includes(h.priority))});const r="pending"===x,a=(e=>{const t=new Set;return e.forEach(e=>{e.sector&&t.add(e.sector)}),Array.from(t).sort()})(e),s=(e=>{const t=new Set;return e.forEach(e=>{e.status&&t.add(e.status)}),Array.from(t).sort()})(e);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"text-sm text-gray-600 mb-4",children:ie(x)}),(0,u.jsx)("div",{className:"overflow-auto max-h-80",children:(0,u.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,u.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Number"}),(0,u.jsx)("button",{onClick:()=>j("crNumber"),className:"text-xs hover:text-blue-600",title:"Filter by CR Number",children:"\ud83d\udd0d"}),b.crNumber&&(0,u.jsx)("input",{type:"text",value:h.crNumber,onChange:e=>g(o(o({},h),{},{crNumber:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Date"}),(0,u.jsx)("button",{onClick:()=>j("crDate"),className:"text-xs hover:text-blue-600",title:"Filter by CR Date",children:"\ud83d\udd0d"}),b.crDate&&(0,u.jsx)("input",{type:"text",value:h.crDate,onChange:e=>g(o(o({},h),{},{crDate:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Sector"}),(0,u.jsx)("button",{onClick:()=>j("sector"),className:"text-xs hover:text-blue-600",title:"Filter by Sector",children:"\ud83d\udd0d"}),b.sector&&(0,u.jsxs)("select",{value:h.sector,onChange:e=>g(o(o({},h),{},{sector:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),a.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]})}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Proposal"}),(0,u.jsx)("button",{onClick:()=>j("proposal"),className:"text-xs hover:text-blue-600",title:"Filter by Proposal",children:"\ud83d\udd0d"}),b.proposal&&(0,u.jsx)("input",{type:"text",value:h.proposal,onChange:e=>g(o(o({},h),{},{proposal:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Cost"}),(0,u.jsx)("button",{onClick:()=>j("cost"),className:"text-xs hover:text-blue-600",title:"Filter by Cost",children:"\ud83d\udd0d"}),b.cost&&(0,u.jsx)("input",{type:"text",value:h.cost,onChange:e=>g(o(o({},h),{},{cost:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Locality"}),(0,u.jsx)("button",{onClick:()=>j("locality"),className:"text-xs hover:text-blue-600",title:"Filter by Locality",children:"\ud83d\udd0d"}),b.locality&&(0,u.jsx)("input",{type:"text",value:h.locality,onChange:e=>g(o(o({},h),{},{locality:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Lat/Long"}),(0,u.jsx)("button",{onClick:()=>j("latLong"),className:"text-xs hover:text-blue-600",title:"Filter by Lat/Long",children:"\ud83d\udd0d"}),b.latLong&&(0,u.jsx)("input",{type:"text",value:h.latLong,onChange:e=>g(o(o({},h),{},{latLong:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Priority"}),(0,u.jsx)("button",{onClick:()=>j("priority"),className:"text-xs hover:text-blue-600",title:"Filter by Priority",children:"\ud83d\udd0d"}),b.priority&&(0,u.jsx)("input",{type:"text",value:h.priority,onChange:e=>g(o(o({},h),{},{priority:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Status"}),(0,u.jsx)("button",{onClick:()=>j("status"),className:"text-xs hover:text-blue-600",title:"Filter by Status",children:"\ud83d\udd0d"}),b.status&&(0,u.jsxs)("select",{value:h.status,onChange:e=>g(o(o({},h),{},{status:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),s.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]}),(h.crNumber||h.crDate||h.sector||h.status||h.proposal||h.cost||h.locality||h.latLong||h.priority)&&(0,u.jsx)("button",{onClick:()=>{g({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),v({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1})},className:"text-xs text-blue-600 hover:text-blue-800 px-1 ml-1",title:"Clear Filters",children:"\u2715"})]})}),r&&(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Actions"}),!r&&("rejected"===x||"sentBackRejected"===x)&&(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Remarks"})]})}),(0,u.jsx)("tbody",{children:(()=>{if(0===t.length){const e=r||"rejected"===x||"sentBackRejected"===x?15:14;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}if(["allWorks","pending","forwarded","rejected","sentBackRejected"].includes(x))return t.map((e,t)=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:"pending"===x?"Pending":"rejected"===x||"sentBackRejected"===x?(0,u.jsx)("span",{className:"text-red-700",children:"EEPH Rejected"===e.status?"Rejected by EEPH":"Rejected by SEPH"}):"approved"===x?(0,u.jsx)("span",{className:"text-green-700",children:e.status}):"forwarded"===x?(0,u.jsx)("span",{className:"text-blue-700",children:e.status}):e.status||"Pending"}),r&&(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>ce(e),className:"px-2 py-1 bg-indigo-600 text-white rounded text-xs",children:"Review"}),(0,u.jsx)("button",{onClick:()=>de(e.id),disabled:pe(e.status),className:"px-2 py-1 text-xs rounded ".concat("EEPH Approved"===e.status?"bg-gray-300":"bg-green-600 text-white"),children:"Approve"}),(0,u.jsx)("button",{onClick:()=>ue(e.id),disabled:"EEPH Rejected"===e.status,className:"px-2 py-1 text-xs rounded ".concat("EEPH Rejected"===e.status?"bg-gray-300":"bg-red-600 text-white"),children:"Reject"})]})}),!r&&("rejected"===x||"sentBackRejected"===x)&&(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600 max-w-xs truncate align-top",title:e.remarks||"-",children:e.remarks||"-"})]},e.id));const e={};t.forEach(t=>{const r=(t.crNumber||"").trim().toUpperCase()||"__NO_CR__";e[r]||(e[r]=[]),e[r].push(t)});const n=Object.values(e).filter(e=>"__NO_CR__"!==((e[0].crNumber||"").trim().toUpperCase()||"__NO_CR__"));if(0===n.length){const e=r||"rejected"===x||"sentBackRejected"===x?15:14;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}let a=0;return n.map((e,t)=>e.map((e,t)=>{const n=0===t;return n&&a++,(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:n?a:""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:n?e.crNumber||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:n?e.crDate||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:n?e.sector:""}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):(0,u.jsx)("span",{className:"text-gray-400",children:"No report"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:"pending"===x?"Pending":"rejected"===x||"sentBackRejected"===x?(0,u.jsx)("span",{className:"text-red-700",children:"EEPH Rejected"===e.status?"Rejected by EEPH":"Rejected by SEPH"}):"approved"===x?(0,u.jsx)("span",{className:"text-green-700",children:e.status}):"forwarded"===x?(0,u.jsx)("span",{className:"text-blue-700",children:e.status}):e.status||"Pending"}),r&&(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>ce(e),className:"px-2 py-1 bg-indigo-600 text-white rounded text-xs",children:"Review"}),(0,u.jsx)("button",{onClick:()=>de(e.id),disabled:pe(e.status),className:"px-2 py-1 text-xs rounded ".concat("EEPH Approved"===e.status?"bg-gray-300":"bg-green-600 text-white"),children:"Approve"}),(0,u.jsx)("button",{onClick:()=>ue(e.id),disabled:"EEPH Rejected"===e.status,className:"px-2 py-1 text-xs rounded ".concat("EEPH Rejected"===e.status?"bg-gray-300":"bg-red-600 text-white"),children:"Reject"})]})}),!r&&("rejected"===x||"sentBackRejected"===x)&&(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600 max-w-xs truncate align-top",title:e.remarks||"-",children:e.remarks||"-"})]},e.id)})).flat()})()})]})})]})})(),z&&y&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:B?"Forward Approved Work to Department":"Approve Work"}),(0,u.jsx)("button",{onClick:()=>{W(!1),H(""),V(!1),N(null),E(""),L(""),D("")},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"CR Number:"})," ",y.crNumber||"-"]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",y.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",y.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(y.cost)]})]})]}),B?(0,u.jsxs)(u.Fragment,{children:[G&&(0,u.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded text-sm",children:G}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Department"}),(0,u.jsxs)("select",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:S,onChange:e=>E(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select department"}),Object.keys(Y).map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Section"}),(0,u.jsxs)("select",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:P,onChange:e=>L(e.target.value),disabled:!S,children:[(0,u.jsx)("option",{value:"",children:"Select section"}),S&&Y[S].map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]})]}),_&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded text-sm",children:_}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{W(!1),H(""),V(!1),N(null),E(""),L(""),D("")},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{if(!S||!P||!y)return alert("Select department and section");a(e=>{const t=e.find(e=>e.id===y.id);return e.map(e=>e.id===y.id?o(o({},e),{},{forwardedTo:{department:S,section:P},status:"Forwarded to SEPH",workImage:y.workImage||e.workImage||(null===t||void 0===t?void 0:t.workImage)||null,detailedReport:y.detailedReport||e.detailedReport||(null===t||void 0===t?void 0:t.detailedReport)||null,committeeReport:y.committeeReport||e.committeeReport||(null===t||void 0===t?void 0:t.committeeReport)||null,councilResolution:y.councilResolution||e.councilResolution||(null===t||void 0===t?void 0:t.councilResolution)||null}):e)}),W(!1),V(!1),H(""),N(null),E(""),L(""),D(""),alert("Forwarded successfully!"),I("\u2705 Successfully Forwarded to SEPH Department!"),setTimeout(()=>{I("")},5e3)},disabled:!S||!P,className:"px-5 py-2 rounded ".concat(S&&P?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"," text-white"),children:"Forward"})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"text-sm text-gray-600 font-medium",children:["Verification Note ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:6,value:U,onChange:e=>H(e.target.value),placeholder:"Enter verification note (required)...",required:!0})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{W(!1),H(""),V(!1),N(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{y&&(U&&""!==U.trim()?(a(e=>{const t=e.map(e=>e.id===y.id?o(o({},e),{},{status:"EEPH Approved",remarks:U,workImage:y.workImage||e.workImage,detailedReport:y.detailedReport||e.detailedReport,committeeReport:y.committeeReport||e.committeeReport,councilResolution:y.councilResolution||e.councilResolution}):e),r=t.find(e=>e.id===y.id);return r&&N(o(o({},r),{},{workImage:y.workImage||r.workImage,detailedReport:y.detailedReport||r.detailedReport,committeeReport:y.committeeReport||r.committeeReport,councilResolution:y.councilResolution||r.councilResolution})),t}),V(!0),E(""),L(""),D(""),q("Work approved successfully by EEPH."),setTimeout(()=>q(""),1500)):alert("Please enter Verification Note before approving."))},className:"px-5 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm Approval"})]})]})]})}),T&&y&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:"Reject Work"}),(0,u.jsx)("button",{onClick:()=>{O(!1),M(""),N(null)},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"CR Number:"})," ",y.crNumber||"-"]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",y.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",y.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(y.cost)]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Required)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:6,value:A,onChange:e=>M(e.target.value),placeholder:"Please enter reason for rejection...",required:!0})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{O(!1),M(""),N(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{A&&y?(a(e=>e.map(e=>e.id===y.id?o(o({},e),{},{status:"EEPH Rejected",remarks:A,rejectedBy:"EEPH"}):e)),X("Work rejected and sent back to Commissioner."),setTimeout(()=>{X(""),O(!1),N(null),M("")},1500)):alert("Please enter remarks before rejecting.")},className:"px-5 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Submit Rejection"})]})]})})]}),C&&y&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow max-w-4xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,u.jsx)("h3",{className:"font-semibold text-lg",children:"Work Details Review"}),(0,u.jsx)("button",{onClick:()=>R(!1),className:"px-3 py-1 bg-red-500 text-white rounded",children:"Close"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[["sector","proposal","cost","locality","priority"].map(e=>(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 capitalize",children:e}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:w[e],onChange:t=>k(o(o({},w),{},{[e]:t.target.value}))})]},e)),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Latitude/Longitude or Google Maps URL"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:w.latlong||"",onChange:e=>k(o(o({},w),{},{latlong:e.target.value})),rows:2})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Number"}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:w.crNumber||"",onChange:e=>k(o(o({},w),{},{crNumber:e.target.value}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Date"}),(0,u.jsx)("input",{type:"date",className:"w-full border p-2 rounded mt-1",value:w.crDate||"",onChange:e=>k(o(o({},w),{},{crDate:e.target.value}))})]}),(()=>{const e=w.workImage||y.workImage,t=s(e);return t&&(0,u.jsxs)("div",{className:"md:col-span-2 mt-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Work Image"}),(0,u.jsx)("img",{src:t,alt:"",className:"mt-2 rounded max-h-60",onError:e=>{e.target.style.display="none"}})]})})()]}),(0,u.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-sm text-gray-700",children:"Attached Files"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Work Image"}),(()=>{const e=w.workImage||y.workImage,t=s(e);return t?(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("img",{src:t,alt:"Work",className:"rounded max-h-40 border",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="block")}}),(0,u.jsx)("div",{style:{display:"none"},className:"text-sm text-gray-500",children:"Image preview unavailable"})]}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No image attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Detailed Estimation Report"}),(()=>{const e=w.detailedReport||y.detailedReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Committee Report"}),(()=>{const e=w.committeeReport||y.committeeReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Council Resolution Report"}),(()=>{const e=w.councilResolution||y.councilResolution,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]})]})]}),(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"EEPH Remarks"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:w.remarks,onChange:e=>k(o(o({},w),{},{remarks:e.target.value}))})]}),(0,u.jsx)("div",{className:"flex justify-end mt-4",children:(0,u.jsx)("button",{onClick:()=>{y&&(a(e=>e.map(e=>e.id===y.id?o(o(o({},e),w),{},{remarks:w.remarks,workImage:w.workImage||y.workImage||e.workImage,detailedReport:w.detailedReport||y.detailedReport||e.detailedReport,committeeReport:w.committeeReport||y.committeeReport||e.committeeReport,councilResolution:w.councilResolution||y.councilResolution||e.councilResolution}):e)),Q("Changes saved successfully."),setTimeout(()=>Q(""),1500),R(!1))},className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save Changes"})})]})})]})})]})]})}const _e={API_BASE_URL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:5000/api",APP_NAME:"15th Finance Commission Portal",GOVT_NAME:"Government of Andhra Pradesh"},Ie="auth_token",Te="auth_user",Oe=()=>localStorage.getItem(Ie),Ae=()=>{const e=localStorage.getItem(Te);return e?JSON.parse(e):null},Me=()=>{localStorage.removeItem(Ie),localStorage.removeItem(Te)},ze=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Oe(),n=o({"Content-Type":"application/json"},t.headers);r&&(n.Authorization="Bearer ".concat(r));try{const r=await fetch("".concat(_e.API_BASE_URL).concat(e),o(o({},t),{},{headers:n})),a=await r.json();if(!r.ok){if(401===r.status||403===r.status)throw Me(),new Error(a.message||"Authentication failed");const e=a.error?"".concat(a.message||"Request failed",": ").concat(a.error):a.message||"Request failed";throw new Error(e)}return a}catch(a){throw console.error("API Request Error:",a),a}},We=async(e,t)=>{console.log("\n"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\udd10 FRONTEND: LOGIN REQUEST INITIATED"),console.log("\ud83d\udcdd Username:",e),console.log("\ud83d\udd11 Password:","***"),console.log("\u23f0 Request Time:",(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"}));try{const a=await ze("/login",{method:"POST",body:JSON.stringify({username:e,password:t})});if(a.success&&a.token)return r=a.token,n=a.user,localStorage.setItem(Ie,r),localStorage.setItem(Te,JSON.stringify(n)),console.log("\u2705 FRONTEND: LOGIN SUCCESSFUL"),console.log("   - User:",a.user.username),console.log("   - Role:",a.user.role),console.log("   - Token received:",a.token.substring(0,50)+"..."),console.log("   - Token stored in localStorage"),console.log("\u23f0 Login Time:",(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\n"),a;throw new Error(a.message||"Login failed")}catch(a){throw console.log("\u274c FRONTEND: LOGIN FAILED"),console.log("   - Error:",a.message),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\n"),a}var r,n};function Ue(e){let{onLogin:t}=e;const[r,n]=(0,c.useState)(""),[a,l]=(0,c.useState)(""),[s,o]=(0,c.useState)(""),[i,d]=(0,c.useState)(!1),p=oe(),m=async()=>{if(!r||!a)return o("Please enter both username and password"),void console.log("\u26a0\ufe0f LOGIN: Validation failed - missing credentials");o(""),d(!0);try{const e=await We(r,a);if(e.success&&e.user){const{role:r,username:n}=e.user;switch(console.log("\ud83d\udd04 LOGIN COMPONENT: Updating app state and redirecting..."),console.log("   - Redirecting to:","engineer"===r?"/admin":"/".concat(r)),t({role:r,username:n}),r){case"engineer":p("/admin");break;case"Commissioner":p("/commissioner");break;case"eeph":p("/eeph");break;case"seph":p("/seph");break;case"encph":p("/encph");break;case"cdma":p("/cdma");break;default:p("/")}}}catch(e){o(e.message||"Invalid username or password"),console.log("\u274c LOGIN COMPONENT: Failed to complete login")}finally{d(!1)}};return(0,u.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-100 via-amber-100 to-yellow-100 p-6 font-sans",children:(0,u.jsxs)("div",{className:"bg-white shadow-2xl rounded-2xl w-full max-w-md p-8 transition-all hover:-translate-y-1",children:[(0,u.jsx)("div",{className:"flex justify-center mb-4",children:(0,u.jsx)("img",{src:"/ap-logo.jpeg",alt:"Government Seal",className:"w-20 h-20 object-contain"})}),(0,u.jsxs)("div",{className:"text-center mb-8",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-800 leading-tight",children:"15th Finance Commission"}),(0,u.jsx)("p",{className:"text-gray-500 text-sm",children:"Government of Andhra Pradesh"})]}),s&&(0,u.jsx)("div",{className:"bg-red-100 text-red-600 px-4 py-2 rounded-md mb-4 text-sm text-center",children:s}),(0,u.jsxs)("div",{className:"space-y-5",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-gray-700 text-sm font-medium",children:"Username"}),(0,u.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),className:"mt-2 w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Enter username",autoComplete:"username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-gray-700 text-sm font-medium",children:"Password"}),(0,u.jsx)("input",{type:"password",value:a,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||i||m()},className:"mt-2 w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Enter password",autoComplete:"current-password"})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,u.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"checkbox",className:"accent-blue-600"}),(0,u.jsx)("span",{children:"Remember me"})]}),(0,u.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"Forgot password?"})]}),(0,u.jsx)("button",{onClick:m,disabled:i,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-lg shadow-md transition-all",children:i?"Logging in...":"Login"})]})]})})}var He=r(950),Be=r.t(He,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(tt){}new Map;const Ve=d.startTransition;Be.flushSync,d.useId;function $e(e){let{basename:t,children:r,future:n,window:a}=e,l=c.useRef();var s;null==l.current&&(l.current=(void 0===(s={window:a,v5Compat:!0})&&(s={}),N(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return v("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:j(t)},null,s)));let o=l.current,[i,d]=c.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},p=c.useCallback(e=>{u&&Ve?Ve(()=>d(e)):d(e)},[d,u]);return c.useLayoutEffect(()=>o.listen(p),[o,p]),c.createElement(Ne,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:o,future:n})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Qe,Ge;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qe||(Qe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ge||(Ge={}));function qe(e){let{user:t,logout:r,forwardedSubmissions:n,setForwardedSubmissions:a}=e;const l=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0).replace("INR","\u20b9"),s=e=>e?e instanceof File?URL.createObjectURL(e):"string"===typeof e?e:null:null,i=e=>{if(!e)return!1;const t=["jpg","jpeg","png","gif","webp","bmp","svg"],r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml"];if(e instanceof File){var n;const a=(null===(n=(e.name||"").split(".").pop())||void 0===n?void 0:n.toLowerCase())||"";return t.includes(a)||r.includes(e.type)}if("string"===typeof e){var a;if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();return r.some(t=>e.includes(t.split("/")[1]))}}const n=(null===(a=e.split(".").pop())||void 0===a?void 0:a.toLowerCase())||"";return t.includes(n)}return!1},d=e=>{let{file:t,defaultName:r="document.pdf"}=e;const[n,a]=(0,c.useState)(!1);if(!t)return(0,u.jsx)("span",{className:"text-gray-400 text-xs",children:"No file"});const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document";if(!e)return null;let r=t,n=null,a="PDF";if(e instanceof File){var l;r=e.name||t,n=e.size;const s=(null===(l=r.split(".").pop())||void 0===l?void 0:l.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===s?"PDF":["doc","docx"].includes(s)?"DOC":s.toUpperCase()||"FILE"}else if("string"===typeof e){if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();a=e.includes("pdf")?"PDF":e.includes("image")?"IMAGE":e.includes("document")||e.includes("msword")?"DOC":"FILE"}n=Math.round(3*e.length/4)}else{var s;const t=(null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===t?"PDF":["doc","docx"].includes(t)?"DOC":t.toUpperCase()||"FILE"}r=t}return{fileName:r,fileSize:n,fileType:a}}(t,r),o=s(t),d=e=>{e.preventDefault(),o&&window.open(o,"_blank")};return i(t)&&!n&&o?(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px] overflow-hidden",children:[(0,u.jsx)("img",{src:o,alt:l.fileName,className:"w-full h-16 object-cover rounded mb-1",onError:()=>a(!0)}),(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName})]}):(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px]",children:[(0,u.jsx)("div",{className:"w-full h-8 rounded mb-1 overflow-hidden relative flex items-center justify-center ".concat("PDF"===l.fileType?"bg-gradient-to-br from-red-100 to-red-200":"DOC"===l.fileType||"DOCX"===l.fileType?"bg-gradient-to-br from-blue-100 to-blue-200":"bg-gradient-to-br from-gray-100 to-gray-200"),children:(0,u.jsx)("div",{className:"text-[10px] font-bold ".concat("PDF"===l.fileType?"text-red-600":"DOC"===l.fileType||"DOCX"===l.fileType?"text-blue-600":"text-gray-700"),children:l.fileType})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName}),l.fileSize&&(0,u.jsx)("div",{className:"text-[7px] text-gray-500",children:(p=l.fileSize,p?p<1024?p+" B":p<1048576?(p/1024).toFixed(1)+" KB":(p/1048576).toFixed(1)+" MB":"")})]})]});var p},[x,f]=(0,c.useState)([]),[h,g]=(0,c.useState)([]),[b,v]=(0,c.useState)([]),[j,y]=(0,c.useState)([]),[N,w]=(0,c.useState)(null),[k,C]=(0,c.useState)(null),[R,S]=(0,c.useState)(!1),[E,P]=(0,c.useState)(""),[L,F]=(0,c.useState)(""),[D,_]=(0,c.useState)(""),[I,T]=(0,c.useState)(""),[O,A]=(0,c.useState)(""),[M,z]=(0,c.useState)(""),[W,U]=(0,c.useState)(""),[H,B]=(0,c.useState)(!1),[V,$]=(0,c.useState)(""),[Q,G]=(0,c.useState)(!1),[q,K]=(0,c.useState)(""),[X,J]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)("pending"),[ee,te]=(0,c.useState)({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),[re,ne]=(0,c.useState)({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1}),ae=e=>{ne(t=>o(o({},t),{},{[e]:!t[e]}))},se=(0,c.useRef)([]),ie={Administration:["ENCPH Department"]};(0,c.useEffect)(()=>{const e=n.filter(e=>{var t;const r=(e.status||"").trim(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim();if(["SEPH Approved","SEPH Rejected","ENCPH Rejected"].includes(r))return!1;const a=r.toLowerCase();return!!a.includes("forwarded to seph")||("seph"===n.toLowerCase()||!(!a.startsWith("forwarded to")||"seph"!==n.toLowerCase()))});f(e);const t=n.filter(e=>"SEPH Approved"===e.status);g(t);const r=n.filter(e=>{var t;const r=e.status||"",n=(null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"";return r.includes("Forwarded to ENCPH")||r.toLowerCase().includes("forwarded to encph")||n.toLowerCase().includes("encph")});v(r);const a=n.filter(e=>"SEPH Rejected"===e.status||"ENCPH Rejected"===e.status);y(a)},[n]);const ce=e=>{let t=[];switch(e){case"pending":default:t=x;break;case"allWorks":t=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to seph")||"seph"===n||r.includes("seph approved")||r.includes("seph rejected")||r.includes("forwarded to encph")||n.includes("encph")});break;case"forwarded":t=b;break;case"rejected":t=j.filter(e=>"SEPH Rejected"===e.status);break;case"sentBackRejected":t=n.filter(e=>"ENCPH Rejected"===e.status);break;case"noOfCrs":t=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to seph")||"seph"===n||r.includes("seph approved")||r.includes("seph rejected")||r.includes("forwarded to encph")||n.includes("encph")})}return[...t].sort((e,t)=>(Number(e.priority)||0)-(Number(t.priority)||0))};(0,c.useEffect)(()=>()=>{se.current.forEach(e=>URL.revokeObjectURL(e))},[]);const de=oe(),ue=le();(0,c.useEffect)(()=>{"/"!==ue.pathname&&window.history.pushState(null,"",window.location.pathname)},[ue.pathname]),(0,c.useEffect)(()=>{const e=e=>{if("/"!==ue.pathname){window.confirm("Are you sure you want to logout?")?(null===r||void 0===r||r(),de("/",{replace:!0})):window.history.pushState(null,"",window.location.pathname)}};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[ue.pathname,r,de]),(0,c.useEffect)(()=>{if("/"===ue.pathname&&window.history.state&&document.referrer&&!document.referrer.includes("/login")){window.confirm("Are you sure you want to logout?")?null===r||void 0===r||r():window.history.go(1)}},[ue.pathname,r]);const[pe,me]=(0,c.useState)("dashboard"),[xe,fe]=(0,c.useState)(!0);return(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[(0,u.jsx)("div",{className:"fixed top-0 left-0 right-0 w-full bg-white shadow-md z-50 p-6 pb-0",children:(0,u.jsx)(p,{title:"15th Finance Commission",user:t,onLogout:()=>{window.confirm("Are you sure you want to logout?")&&(null===r||void 0===r||r(),window.location.href="/")}})}),(0,u.jsxs)("div",{className:"flex items-start relative pt-20 overflow-x-hidden",children:[(0,u.jsx)(m,{menuItems:[{id:"dashboard",label:"Dashboard",icon:"\ud83d\udcca"},{id:"reports",label:"Reports",icon:"\ud83d\udcc4"},{id:"gos",label:"GO's",icon:"\ud83d\udccb"},{id:"circular",label:"Circular & Proceedings",icon:"\ud83d\udce2"},{id:"guidelines",label:"Guidelines",icon:"\ud83d\udcd0"}],selectedMenuItem:pe,onMenuItemSelect:me,isMenuOpen:xe,setIsMenuOpen:fe}),(0,u.jsx)("div",{className:"flex-1 p-6 pt-4 transition-all duration-300 min-w-0 ".concat(xe?"ml-64":"ml-0"),children:(0,u.jsx)("div",{className:"max-w-[95%] mx-auto",children:(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border",children:[(0,u.jsx)("h2",{className:"font-semibold text-gray-700 mb-4",children:"SEPH Dashboard"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-6",children:[(0,u.jsxs)("div",{onClick:()=>Z("noOfCrs"),className:"bg-blue-50 border border-blue-200 rounded-lg p-3 cursor-pointer hover:bg-blue-100 transition ".concat("noOfCrs"===Y?"ring-2 ring-blue-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"No. of CR's"}),(0,u.jsx)("div",{className:"text-xl font-bold text-blue-700",children:(()=>{const e=ce("noOfCrs"),t={};return e.forEach(e=>{const r=(e.crNumber||"").trim().toUpperCase()||"__NO_CR__";t[r]||(t[r]=[]),t[r].push(e)}),Object.keys(t).filter(e=>"__NO_CR__"!==e).length})()})]}),(0,u.jsxs)("div",{onClick:()=>Z("allWorks"),className:"bg-purple-50 border border-purple-200 rounded-lg p-3 cursor-pointer hover:bg-purple-100 transition ".concat("allWorks"===Y?"ring-2 ring-purple-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-purple-600 font-medium mb-1",children:"No. of Works"}),(0,u.jsx)("div",{className:"text-xl font-bold text-purple-700",children:n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to seph")||"seph"===n||r.includes("seph approved")||r.includes("seph rejected")||r.includes("forwarded to encph")||n.includes("encph")}).length})]}),(0,u.jsxs)("div",{onClick:()=>Z("pending"),className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 cursor-pointer hover:bg-yellow-100 transition ".concat("pending"===Y?"ring-2 ring-yellow-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-yellow-600 font-medium mb-1",children:"No. of Pending"}),(0,u.jsx)("div",{className:"text-xl font-bold text-yellow-700",children:x.length})]}),(0,u.jsxs)("div",{onClick:()=>Z("forwarded"),className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 cursor-pointer hover:bg-indigo-100 transition ".concat("forwarded"===Y?"ring-2 ring-indigo-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-indigo-600 font-medium mb-1",children:"No. of Forwarded"}),(0,u.jsx)("div",{className:"text-xl font-bold text-indigo-700",children:b.length})]}),(0,u.jsxs)("div",{onClick:()=>Z("rejected"),className:"bg-red-50 border border-red-200 rounded-lg p-3 cursor-pointer hover:bg-red-100 transition ".concat("rejected"===Y?"ring-2 ring-red-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-red-600 font-medium mb-1",children:"No. of Rejected"}),(0,u.jsx)("div",{className:"text-xl font-bold text-red-700",children:j.filter(e=>"SEPH Rejected"===e.status).length})]}),(0,u.jsxs)("div",{onClick:()=>Z("sentBackRejected"),className:"bg-orange-50 border border-orange-200 rounded-lg p-3 cursor-pointer hover:bg-orange-100 transition ".concat("sentBackRejected"===Y?"ring-2 ring-orange-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-orange-600 font-medium mb-1",children:"Sent back REJECTED LIST"}),(0,u.jsx)("div",{className:"text-xl font-bold text-orange-700",children:n.filter(e=>"ENCPH Rejected"===e.status).length})]})]}),W&&(0,u.jsx)("div",{className:"mb-4 p-4 bg-green-500 text-white rounded-lg shadow-lg text-center font-semibold text-base animate-pulse",children:W}),E&&(0,u.jsx)("div",{className:"p-2 bg-blue-50 border border-blue-200 text-blue-700 rounded mb-2",children:E}),L&&(0,u.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 text-green-700 rounded mb-2",children:L}),D&&(0,u.jsx)("div",{className:"p-2 bg-red-50 border border-red-200 text-red-700 rounded mb-2",children:D}),(()=>{const e=ce(Y),t=e.filter(e=>{if(ee.crNumber&&!(e.crNumber||"").toLowerCase().includes(ee.crNumber.toLowerCase()))return!1;if(ee.crDate&&!(e.crDate||"").toLowerCase().includes(ee.crDate.toLowerCase()))return!1;if(ee.sector&&e.sector!==ee.sector)return!1;if(ee.status&&e.status!==ee.status)return!1;if(ee.proposal&&!(e.proposal||"").toLowerCase().includes(ee.proposal.toLowerCase()))return!1;if(ee.cost&&!l(e.cost||0).toLowerCase().includes(ee.cost.toLowerCase()))return!1;const t=(e=>{if(!e)return"";if(e.locality)return e.locality;if(e.area&&e.wardNo){const t=[];return e.area&&t.push(e.area),e.locality&&t.push(e.locality),e.wardNo&&t.push("Ward No: ".concat(e.wardNo)),t.join(", ")}return e.locality||"-"})(e).toLowerCase();if(ee.locality&&!t.includes(ee.locality.toLowerCase()))return!1;const r=(e.latlong||"").toLowerCase();return!(ee.latLong&&!r.includes(ee.latLong.toLowerCase()))&&!(ee.priority&&!(e.priority||"").toString().includes(ee.priority))});const r=(e=>{switch(e){case"pending":default:return"Pending Works";case"allWorks":return"All Works";case"forwarded":return"Forwarded Tasks";case"rejected":return"Rejected Tasks";case"sentBackRejected":return"Sent back REJECTED LIST";case"noOfCrs":return"All Works (by CR Number)"}})(Y),a=(e=>{const t=new Set;return e.forEach(e=>{e.sector&&t.add(e.sector)}),Array.from(t).sort()})(e),s=(e=>{const t=new Set;return e.forEach(e=>{e.status&&t.add(e.status)}),Array.from(t).sort()})(e);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"text-sm text-gray-600 mb-4",children:r}),(0,u.jsx)("div",{className:"overflow-auto max-h-80",children:(0,u.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,u.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Number"}),(0,u.jsx)("button",{onClick:()=>ae("crNumber"),className:"text-xs hover:text-blue-600",title:"Filter by CR Number",children:"\ud83d\udd0d"}),re.crNumber&&(0,u.jsx)("input",{type:"text",value:ee.crNumber,onChange:e=>te(o(o({},ee),{},{crNumber:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Date"}),(0,u.jsx)("button",{onClick:()=>ae("crDate"),className:"text-xs hover:text-blue-600",title:"Filter by CR Date",children:"\ud83d\udd0d"}),re.crDate&&(0,u.jsx)("input",{type:"text",value:ee.crDate,onChange:e=>te(o(o({},ee),{},{crDate:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Sector"}),(0,u.jsx)("button",{onClick:()=>ae("sector"),className:"text-xs hover:text-blue-600",title:"Filter by Sector",children:"\ud83d\udd0d"}),re.sector&&(0,u.jsxs)("select",{value:ee.sector,onChange:e=>te(o(o({},ee),{},{sector:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),a.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]})}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Proposal"}),(0,u.jsx)("button",{onClick:()=>ae("proposal"),className:"text-xs hover:text-blue-600",title:"Filter by Proposal",children:"\ud83d\udd0d"}),re.proposal&&(0,u.jsx)("input",{type:"text",value:ee.proposal,onChange:e=>te(o(o({},ee),{},{proposal:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Cost"}),(0,u.jsx)("button",{onClick:()=>ae("cost"),className:"text-xs hover:text-blue-600",title:"Filter by Cost",children:"\ud83d\udd0d"}),re.cost&&(0,u.jsx)("input",{type:"text",value:ee.cost,onChange:e=>te(o(o({},ee),{},{cost:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Locality"}),(0,u.jsx)("button",{onClick:()=>ae("locality"),className:"text-xs hover:text-blue-600",title:"Filter by Locality",children:"\ud83d\udd0d"}),re.locality&&(0,u.jsx)("input",{type:"text",value:ee.locality,onChange:e=>te(o(o({},ee),{},{locality:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Lat/Long"}),(0,u.jsx)("button",{onClick:()=>ae("latLong"),className:"text-xs hover:text-blue-600",title:"Filter by Lat/Long",children:"\ud83d\udd0d"}),re.latLong&&(0,u.jsx)("input",{type:"text",value:ee.latLong,onChange:e=>te(o(o({},ee),{},{latLong:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Priority"}),(0,u.jsx)("button",{onClick:()=>ae("priority"),className:"text-xs hover:text-blue-600",title:"Filter by Priority",children:"\ud83d\udd0d"}),re.priority&&(0,u.jsx)("input",{type:"text",value:ee.priority,onChange:e=>te(o(o({},ee),{},{priority:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Status"}),(0,u.jsx)("button",{onClick:()=>ae("status"),className:"text-xs hover:text-blue-600",title:"Filter by Status",children:"\ud83d\udd0d"}),re.status&&(0,u.jsxs)("select",{value:ee.status,onChange:e=>te(o(o({},ee),{},{status:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),s.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]}),(ee.crNumber||ee.crDate||ee.sector||ee.status||ee.proposal||ee.cost||ee.locality||ee.latLong||ee.priority)&&(0,u.jsx)("button",{onClick:()=>{te({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),ne({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1})},className:"text-xs text-blue-600 hover:text-blue-800 px-1 ml-1",title:"Clear Filters",children:"\u2715"})]})}),"pending"===Y&&(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Actions"}),("rejected"===Y||"sentBackRejected"===Y)&&(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Remarks"})]})}),(0,u.jsx)("tbody",{children:(()=>{if(0===t.length){const e="pending"===Y||"rejected"===Y||"sentBackRejected"===Y?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}if("noOfCrs"===Y){const e={};t.forEach(t=>{const r=(t.crNumber||"").trim().toUpperCase()||"__NO_CR__";e[r]||(e[r]=[]),e[r].push(t)});const r=Object.values(e).filter(e=>"__NO_CR__"!==((e[0].crNumber||"").trim().toUpperCase()||"__NO_CR__"));if(0===r.length){const e="pending"===Y||"rejected"===Y||"sentBackRejected"===Y?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}let n=0;return r.map(e=>e.map((e,t)=>{const r=0===t;return r&&n++,(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?n:""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?e.crNumber||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?e.crDate||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?e.sector:""}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.status||"Pending"})]},e.id)})).flat()}return"allWorks"===Y?t.map((e,t)=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):null}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.status||"Pending"})]},e.id)):t.map((e,t)=>{return(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.status||"Pending"}),"pending"===Y&&(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{const t=n.find(t=>t.id===e.id)||e;console.log("\ud83d\udd0d SEPH openPreview - Original sub:",e),console.log("\ud83d\udd0d SEPH openPreview - Fresh sub from array:",t),console.log("\ud83d\udd0d SEPH openPreview - Files check:",{workImage:t.workImage instanceof File,detailedReport:t.detailedReport instanceof File,committeeReport:t.committeeReport instanceof File,councilResolution:t.councilResolution instanceof File,workImageExists:!!t.workImage,detailedReportExists:!!t.detailedReport,committeeReportExists:!!t.committeeReport,councilResolutionExists:!!t.councilResolution}),console.log("\ud83d\udd0d SEPH openPreview - File Details:",{workImage:t.workImage?t.workImage instanceof File?"File: ".concat(t.workImage.name):typeof t.workImage:"null",detailedReport:t.detailedReport?t.detailedReport instanceof File?"File: ".concat(t.detailedReport.name):typeof t.detailedReport:"null",committeeReport:t.committeeReport?t.committeeReport instanceof File?"File: ".concat(t.committeeReport.name):typeof t.committeeReport:"null",councilResolution:t.councilResolution?t.councilResolution instanceof File?"File: ".concat(t.councilResolution.name):typeof t.councilResolution:"null"}),console.log("\ud83d\udd0d SEPH openPreview - Original sub Files:",{workImage:e.workImage?e.workImage instanceof File?"File: ".concat(e.workImage.name):typeof e.workImage:"null",detailedReport:e.detailedReport?e.detailedReport instanceof File?"File: ".concat(e.detailedReport.name):typeof e.detailedReport:"null",committeeReport:e.committeeReport?e.committeeReport instanceof File?"File: ".concat(e.committeeReport.name):typeof e.committeeReport:"null",councilResolution:e.councilResolution?e.councilResolution instanceof File?"File: ".concat(e.councilResolution.name):typeof e.councilResolution:"null"});const r=o(o({},t),{},{workImage:t.workImage||e.workImage||null,detailedReport:t.detailedReport||e.detailedReport||null,committeeReport:t.committeeReport||e.committeeReport||null,councilResolution:t.councilResolution||e.councilResolution||null});w(r),C({sector:r.sector||"",proposal:r.proposal||"",cost:r.cost||0,locality:r.locality||"",latlong:r.latlong||"",priority:r.priority||"",crNumber:r.crNumber||"",crDate:r.crDate||"",remarks:r.remarks||"",workImage:r.workImage||null,detailedReport:r.detailedReport||null,committeeReport:r.committeeReport||null,councilResolution:r.councilResolution||null}),S(!0)})(e),className:"px-2 py-1 bg-indigo-600 text-white rounded text-xs",children:"Review"}),(0,u.jsx)("button",{onClick:()=>(e=>{const t=n.find(t=>t.id===e);t&&(B(!1),S(!1),w(t),G(!0),K(""),J(!1))})(e.id),disabled:(r=e.status,["SEPH Approved","SEPH Rejected"].includes(r)),className:"px-2 py-1 text-xs rounded ".concat("SEPH Approved"===e.status?"bg-gray-300":"bg-green-600 text-white"),children:"Approve"}),(0,u.jsx)("button",{onClick:()=>(e=>{const t=n.find(t=>t.id===e);t&&(G(!1),S(!1),w(t),B(!0),$(""))})(e.id),disabled:"SEPH Rejected"===e.status,className:"px-2 py-1 text-xs rounded ".concat("SEPH Rejected"===e.status?"bg-gray-300":"bg-red-600 text-white"),children:"Reject"})]})}),("rejected"===Y||"sentBackRejected"===Y)&&(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600 max-w-xs truncate align-top",title:e.remarks||"-",children:e.remarks||"-"})]},e.id);var r})})()})]})})]})})(),Q&&N&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:X?"Forward Approved Work to Department":"Approve Work"}),(0,u.jsx)("button",{onClick:()=>{G(!1),K(""),J(!1),w(null),T(""),A(""),z("")},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"CR Number:"})," ",N.crNumber||"-"]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",N.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",N.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(N.cost)]})]})]}),X?(0,u.jsxs)(u.Fragment,{children:[L&&(0,u.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded text-sm",children:L}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Department"}),(0,u.jsxs)("select",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:I,onChange:e=>T(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select department"}),Object.keys(ie).map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Section"}),(0,u.jsxs)("select",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:O,onChange:e=>A(e.target.value),disabled:!I,children:[(0,u.jsx)("option",{value:"",children:"Select section"}),I&&ie[I].map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]})]}),W&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded text-sm",children:W}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{G(!1),K(""),J(!1),w(null),T(""),A(""),z("")},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{if(!I||!O||!N)return alert("Select department and section");a(e=>{const t=e.find(e=>e.id===N.id),r=e.map(e=>e.id===N.id?o(o({},e),{},{forwardedTo:{department:I,section:O},status:"Forwarded to ENCPH",workImage:N.workImage||e.workImage||(null===t||void 0===t?void 0:t.workImage)||null,detailedReport:N.detailedReport||e.detailedReport||(null===t||void 0===t?void 0:t.detailedReport)||null,committeeReport:N.committeeReport||e.committeeReport||(null===t||void 0===t?void 0:t.committeeReport)||null,councilResolution:N.councilResolution||e.councilResolution||(null===t||void 0===t?void 0:t.councilResolution)||null}):e),n=r.find(e=>e.id===N.id);return console.log("\u2705 SEPH forwarded to ENCPH - Files check:",{id:null===n||void 0===n?void 0:n.id,hasCommitteeReport:!(null===n||void 0===n||!n.committeeReport),hasCouncilResolution:!(null===n||void 0===n||!n.councilResolution),committeeReportType:null!==n&&void 0!==n&&n.committeeReport?typeof n.committeeReport:"null",councilResolutionType:null!==n&&void 0!==n&&n.councilResolution?typeof n.councilResolution:"null"}),r}),G(!1),J(!1),K(""),w(null),T(""),A(""),z(""),alert("Forwarded successfully!"),U("\u2705 Successfully Forwarded to ENCPH Department!"),setTimeout(()=>{U("")},5e3)},disabled:!I||!O,className:"px-5 py-2 rounded ".concat(I&&O?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"," text-white"),children:"Forward"})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"text-sm text-gray-600 font-medium",children:["Verification Note ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:6,value:q,onChange:e=>K(e.target.value),placeholder:"Enter verification note (required)...",required:!0})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{G(!1),K(""),J(!1),w(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{N&&(q&&""!==q.trim()?(a(e=>{const t=e.map(e=>e.id===N.id?o(o({},e),{},{status:"SEPH Approved",remarks:q}):e),r=t.find(e=>e.id===N.id);return r&&w(r),t}),J(!0),T(""),A(""),z(""),F("Work approved successfully by SEPH."),setTimeout(()=>F(""),1500)):alert("Please enter Verification Note before approving."))},className:"px-5 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm Approval"})]})]})]})}),H&&N&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:"Reject Work"}),(0,u.jsx)("button",{onClick:()=>{B(!1),$(""),w(null)},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"CR Number:"})," ",N.crNumber||"-"]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",N.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",N.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(N.cost)]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Required)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:6,value:V,onChange:e=>$(e.target.value),placeholder:"Please enter reason for rejection...",required:!0})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{B(!1),$(""),w(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{V&&N?(a(e=>e.map(e=>e.id===N.id?o(o({},e),{},{status:"SEPH Rejected",remarks:V,rejectedBy:"SEPH"}):e)),_("Work rejected and sent back to EEPH."),setTimeout(()=>{_(""),B(!1),w(null),$("")},1500)):alert("Please enter remarks before rejecting.")},className:"px-5 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Submit Rejection"})]})]})}),"pending"===Y&&h.length>0&&(0,u.jsxs)("div",{className:"mt-6",children:[(0,u.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Approved by SEPH"}),(0,u.jsx)("div",{className:"overflow-auto max-h-48",children:(0,u.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,u.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"CR Number"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"CR Date"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Sector"}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Proposal"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Cost"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Locality"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Lat/Long"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Priority"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Status"})]})}),(0,u.jsx)("tbody",{children:h.map((e,t)=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):null}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs text-green-700",children:"SEPH Approved"})]},e.id))})]})})]}),R&&N&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow max-w-4xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,u.jsx)("h3",{className:"font-semibold text-lg",children:"Work Details Review"}),(0,u.jsx)("button",{onClick:()=>S(!1),className:"px-3 py-1 bg-red-500 text-white rounded",children:"Close"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[["sector","proposal","cost","locality","priority"].map(e=>(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 capitalize",children:e}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:k[e],onChange:t=>C(o(o({},k),{},{[e]:t.target.value}))})]},e)),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Latitude/Longitude or Google Maps URL"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:k.latlong||"",onChange:e=>C(o(o({},k),{},{latlong:e.target.value})),rows:2})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Number"}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:k.crNumber||"",onChange:e=>C(o(o({},k),{},{crNumber:e.target.value}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Date"}),(0,u.jsx)("input",{type:"date",className:"w-full border p-2 rounded mt-1",value:k.crDate||"",onChange:e=>C(o(o({},k),{},{crDate:e.target.value}))})]}),(()=>{const e=k.workImage||N.workImage,t=s(e);return t&&(0,u.jsxs)("div",{className:"md:col-span-2 mt-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Work Image"}),(0,u.jsx)("img",{src:t,alt:"",className:"mt-2 rounded max-h-60",onError:e=>{e.target.style.display="none"}})]})})()]}),(0,u.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-sm text-gray-700",children:"Attached Files"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Work Image"}),(()=>{const e=k.workImage||N.workImage,t=s(e);return t?(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("img",{src:t,alt:"Work",className:"rounded max-h-40 border",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="block")}}),(0,u.jsx)("div",{style:{display:"none"},className:"text-sm text-gray-500",children:"Image preview unavailable"})]}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No image attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Detailed Estimation Report"}),(()=>{const e=k.detailedReport||N.detailedReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Committee Report"}),(()=>{const e=k.committeeReport||N.committeeReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Council Resolution Report"}),(()=>{const e=k.councilResolution||N.councilResolution,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]})]})]}),(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"SEPH Remarks"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:k.remarks,onChange:e=>C(o(o({},k),{},{remarks:e.target.value}))})]}),(0,u.jsx)("div",{className:"flex justify-end mt-4",children:(0,u.jsx)("button",{onClick:()=>{N&&(a(e=>e.map(e=>e.id===N.id?o(o(o({},e),k),{},{remarks:k.remarks,workImage:k.workImage||e.workImage,detailedReport:k.detailedReport||e.detailedReport,committeeReport:k.committeeReport||e.committeeReport,councilResolution:k.councilResolution||e.councilResolution}):e)),P("Changes saved successfully."),setTimeout(()=>P(""),1500),S(!1))},className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save Changes"})})]})})]})})})]})]})}function Ke(e){let{user:t,logout:r,forwardedSubmissions:n,setForwardedSubmissions:a}=e;const l=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0).replace("INR","\u20b9"),s=e=>e?e instanceof File?URL.createObjectURL(e):"string"===typeof e?e:null:null,i=e=>{if(!e)return!1;const t=["jpg","jpeg","png","gif","webp","bmp","svg"],r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml"];if(e instanceof File){var n;const a=(null===(n=(e.name||"").split(".").pop())||void 0===n?void 0:n.toLowerCase())||"";return t.includes(a)||r.includes(e.type)}if("string"===typeof e){var a;if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();return r.some(t=>e.includes(t.split("/")[1]))}}const n=(null===(a=e.split(".").pop())||void 0===a?void 0:a.toLowerCase())||"";return t.includes(n)}return!1},d=e=>{let{file:t,defaultName:r="document.pdf"}=e;const[n,a]=(0,c.useState)(!1);if(!t)return(0,u.jsx)("span",{className:"text-gray-400 text-xs",children:"No file"});const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document";if(!e)return null;let r=t,n=null,a="PDF";if(e instanceof File){var l;r=e.name||t,n=e.size;const s=(null===(l=r.split(".").pop())||void 0===l?void 0:l.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===s?"PDF":["doc","docx"].includes(s)?"DOC":s.toUpperCase()||"FILE"}else if("string"===typeof e){if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();a=e.includes("pdf")?"PDF":e.includes("image")?"IMAGE":e.includes("document")||e.includes("msword")?"DOC":"FILE"}n=Math.round(3*e.length/4)}else{var s;const t=(null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===t?"PDF":["doc","docx"].includes(t)?"DOC":t.toUpperCase()||"FILE"}r=t}return{fileName:r,fileSize:n,fileType:a}}(t,r),o=s(t),d=e=>{e.preventDefault(),o&&window.open(o,"_blank")};return i(t)&&!n&&o?(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px] overflow-hidden",children:[(0,u.jsx)("img",{src:o,alt:l.fileName,className:"w-full h-16 object-cover rounded mb-1",onError:()=>a(!0)}),(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName})]}):(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px]",children:[(0,u.jsx)("div",{className:"w-full h-8 rounded mb-1 overflow-hidden relative flex items-center justify-center ".concat("PDF"===l.fileType?"bg-gradient-to-br from-red-100 to-red-200":"DOC"===l.fileType||"DOCX"===l.fileType?"bg-gradient-to-br from-blue-100 to-blue-200":"bg-gradient-to-br from-gray-100 to-gray-200"),children:(0,u.jsx)("div",{className:"text-[10px] font-bold ".concat("PDF"===l.fileType?"text-red-600":"DOC"===l.fileType||"DOCX"===l.fileType?"text-blue-600":"text-gray-700"),children:l.fileType})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName}),l.fileSize&&(0,u.jsx)("div",{className:"text-[7px] text-gray-500",children:(p=l.fileSize,p?p<1024?p+" B":p<1048576?(p/1024).toFixed(1)+" KB":(p/1048576).toFixed(1)+" MB":"")})]})]});var p},[x,f]=(0,c.useState)([]),[h,g]=(0,c.useState)([]),[b,v]=(0,c.useState)([]),[j,y]=(0,c.useState)(null),[N,w]=(0,c.useState)(null),[k,C]=(0,c.useState)(!1),[R,S]=(0,c.useState)(""),[E,P]=(0,c.useState)(""),[L,F]=(0,c.useState)(""),[D,_]=(0,c.useState)(!1),[I,T]=(0,c.useState)(""),[O,A]=(0,c.useState)(!1),[M,z]=(0,c.useState)(""),[W,U]=(0,c.useState)("pending"),[H,B]=(0,c.useState)({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),[V,$]=(0,c.useState)({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1}),Q=e=>{$(t=>o(o({},t),{},{[e]:!t[e]}))},G=(0,c.useRef)([]);(0,c.useEffect)(()=>{const e=n.filter(e=>{var t;const r=(e.status||"").trim(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim();if(["Forwarded to CDMA","CDMA Approved","ENCPH Rejected"].includes(r))return!1;const a=r.toLowerCase();return!!a.includes("forwarded to encph")||(!!n.toLowerCase().includes("encph")||!(!a.startsWith("forwarded to")||!n.toLowerCase().includes("encph")))});e.length>0?(console.log("\ud83d\udd0d ENCPH - Pending submissions count:",e.length),e.forEach((e,t)=>{console.log("\ud83d\udd0d ENCPH - Submission ".concat(t+1,":"),{id:e.id,status:e.status,hasCommitteeReport:!!e.committeeReport,hasCouncilResolution:!!e.councilResolution,committeeReportType:e.committeeReport?typeof e.committeeReport:"null",councilResolutionType:e.councilResolution?typeof e.councilResolution:"null",committeeReportValue:e.committeeReport?e.committeeReport.substring?e.committeeReport.substring(0,50)+"...":"not a string":"null",councilResolutionValue:e.councilResolution?e.councilResolution.substring?e.councilResolution.substring(0,50)+"...":"not a string":"null",allKeys:Object.keys(e).filter(e=>e.includes("Report")||e.includes("Resolution")||e.includes("Image"))})})):console.log("\ud83d\udd0d ENCPH - No pending submissions"),f(e);const t=n.filter(e=>"Forwarded to CDMA"===e.status||"CDMA Approved"===e.status);g(t);const r=n.filter(e=>"ENCPH Rejected"===e.status);v(r)},[n]);const q=e=>{let t=[];switch(e){case"pending":default:t=x;break;case"allWorks":t=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to encph")||n.includes("encph")||r.includes("forwarded to cdma")||"cdma approved"===r||"encph rejected"===r});break;case"forwarded":t=h;break;case"rejected":t=b;break;case"sentBackRejected":t=n.filter(e=>"CDMA Rejected"===e.status);break;case"noOfCrs":t=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to encph")||n.includes("encph")||r.includes("forwarded to cdma")||"cdma approved"===r||"encph rejected"===r})}return[...t].sort((e,t)=>(Number(e.priority)||0)-(Number(t.priority)||0))};(0,c.useEffect)(()=>()=>{G.current.forEach(e=>URL.revokeObjectURL(e))},[]);const K=oe(),X=le();(0,c.useEffect)(()=>{"/"!==X.pathname&&window.history.pushState(null,"",window.location.pathname)},[X.pathname]),(0,c.useEffect)(()=>{const e=e=>{if("/"!==X.pathname){window.confirm("Are you sure you want to logout?")?(null===r||void 0===r||r(),K("/",{replace:!0})):window.history.pushState(null,"",window.location.pathname)}};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[X.pathname,r,K]),(0,c.useEffect)(()=>{if("/"===X.pathname&&window.history.state&&document.referrer&&!document.referrer.includes("/login")){window.confirm("Are you sure you want to logout?")?null===r||void 0===r||r():window.history.go(1)}},[X.pathname,r]);const[J,Y]=(0,c.useState)("dashboard"),[Z,ee]=(0,c.useState)(!0);return(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[(0,u.jsx)("div",{className:"fixed top-0 left-0 right-0 w-full bg-white shadow-md z-50 p-6 pb-0",children:(0,u.jsx)(p,{title:"15th Finance Commission",user:t,onLogout:()=>{window.confirm("Are you sure you want to logout?")&&(null===r||void 0===r||r(),window.location.href="/")}})}),(0,u.jsxs)("div",{className:"flex items-start relative pt-20 overflow-x-hidden",children:[(0,u.jsx)(m,{menuItems:[{id:"dashboard",label:"Dashboard",icon:"\ud83d\udcca"},{id:"reports",label:"Reports",icon:"\ud83d\udcc4"},{id:"gos",label:"GO's",icon:"\ud83d\udccb"},{id:"circular",label:"Circular & Proceedings",icon:"\ud83d\udce2"},{id:"guidelines",label:"Guidelines",icon:"\ud83d\udcd0"}],selectedMenuItem:J,onMenuItemSelect:Y,isMenuOpen:Z,setIsMenuOpen:ee}),(0,u.jsx)("div",{className:"flex-1 p-6 pt-4 transition-all duration-300 min-w-0 ".concat(Z?"ml-64":"ml-0"),children:(0,u.jsx)("div",{className:"max-w-[95%] mx-auto",children:(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border",children:[(0,u.jsx)("h2",{className:"font-semibold text-gray-700 mb-4",children:"ENCPH Dashboard"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-6",children:[(0,u.jsxs)("div",{onClick:()=>U("noOfCrs"),className:"bg-blue-50 border border-blue-200 rounded-lg p-3 cursor-pointer hover:bg-blue-100 transition ".concat("noOfCrs"===W?"ring-2 ring-blue-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"No. of CR's"}),(0,u.jsx)("div",{className:"text-xl font-bold text-blue-700",children:(()=>{const e=q("noOfCrs"),t={};return e.forEach(e=>{const r=(e.crNumber||"").trim().toUpperCase()||"__NO_CR__";t[r]||(t[r]=[]),t[r].push(e)}),Object.keys(t).filter(e=>"__NO_CR__"!==e).length})()})]}),(0,u.jsxs)("div",{onClick:()=>U("allWorks"),className:"bg-purple-50 border border-purple-200 rounded-lg p-3 cursor-pointer hover:bg-purple-100 transition ".concat("allWorks"===W?"ring-2 ring-purple-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-purple-600 font-medium mb-1",children:"No. of Works"}),(0,u.jsx)("div",{className:"text-xl font-bold text-purple-700",children:n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to encph")||n.includes("encph")||r.includes("forwarded to cdma")||"cdma approved"===r||"encph rejected"===r}).length})]}),(0,u.jsxs)("div",{onClick:()=>U("pending"),className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 cursor-pointer hover:bg-yellow-100 transition ".concat("pending"===W?"ring-2 ring-yellow-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-yellow-600 font-medium mb-1",children:"No. of Pending"}),(0,u.jsx)("div",{className:"text-xl font-bold text-yellow-700",children:x.length})]}),(0,u.jsxs)("div",{onClick:()=>U("forwarded"),className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 cursor-pointer hover:bg-indigo-100 transition ".concat("forwarded"===W?"ring-2 ring-indigo-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-indigo-600 font-medium mb-1",children:"No. of Forwarded"}),(0,u.jsx)("div",{className:"text-xl font-bold text-indigo-700",children:n.filter(e=>"Forwarded to CDMA"===e.status||"CDMA Approved"===e.status).length})]}),(0,u.jsxs)("div",{onClick:()=>U("rejected"),className:"bg-red-50 border border-red-200 rounded-lg p-3 cursor-pointer hover:bg-red-100 transition ".concat("rejected"===W?"ring-2 ring-red-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-red-600 font-medium mb-1",children:"No. of Rejected"}),(0,u.jsx)("div",{className:"text-xl font-bold text-red-700",children:b.length})]}),(0,u.jsxs)("div",{onClick:()=>U("sentBackRejected"),className:"bg-orange-50 border border-orange-200 rounded-lg p-3 cursor-pointer hover:bg-orange-100 transition ".concat("sentBackRejected"===W?"ring-2 ring-orange-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-orange-600 font-medium mb-1",children:"Sent back REJECTED LIST"}),(0,u.jsx)("div",{className:"text-xl font-bold text-orange-700",children:n.filter(e=>"CDMA Rejected"===e.status).length})]})]}),E&&(0,u.jsx)("div",{className:"mb-4 p-4 bg-green-500 text-white rounded-lg shadow-lg text-center font-semibold text-base animate-pulse",children:E}),R&&(0,u.jsx)("div",{className:"p-2 bg-blue-50 border border-blue-200 text-blue-700 rounded mb-2",children:R}),L&&(0,u.jsx)("div",{className:"p-2 bg-red-50 border border-red-200 text-red-700 rounded mb-2",children:L}),(()=>{const e=q(W),t=e.filter(e=>{if(H.crNumber&&!(e.crNumber||"").toLowerCase().includes(H.crNumber.toLowerCase()))return!1;if(H.crDate&&!(e.crDate||"").toLowerCase().includes(H.crDate.toLowerCase()))return!1;if(H.sector&&e.sector!==H.sector)return!1;if(H.status&&e.status!==H.status)return!1;if(H.proposal&&!(e.proposal||"").toLowerCase().includes(H.proposal.toLowerCase()))return!1;if(H.cost&&!l(e.cost||0).toLowerCase().includes(H.cost.toLowerCase()))return!1;const t=(e=>{if(!e)return"";if(e.locality)return e.locality;if(e.area&&e.wardNo){const t=[];return e.area&&t.push(e.area),e.locality&&t.push(e.locality),e.wardNo&&t.push("Ward No: ".concat(e.wardNo)),t.join(", ")}return e.locality||"-"})(e).toLowerCase();if(H.locality&&!t.includes(H.locality.toLowerCase()))return!1;const r=(e.latlong||"").toLowerCase();return!(H.latLong&&!r.includes(H.latLong.toLowerCase()))&&!(H.priority&&!(e.priority||"").toString().includes(H.priority))});const r=(e=>{switch(e){case"pending":default:return"Pending Works";case"allWorks":return"All Works";case"forwarded":return"Forwarded Tasks";case"rejected":return"Rejected Tasks";case"sentBackRejected":return"Sent back REJECTED LIST";case"noOfCrs":return"All Works (by CR Number)"}})(W),a=(e=>{const t=new Set;return e.forEach(e=>{e.sector&&t.add(e.sector)}),Array.from(t).sort()})(e),s=(e=>{const t=new Set;return e.forEach(e=>{e.status&&t.add(e.status)}),Array.from(t).sort()})(e);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"text-sm text-gray-600 mb-4",children:r}),(0,u.jsx)("div",{className:"overflow-auto max-h-80",children:(0,u.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,u.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Number"}),(0,u.jsx)("button",{onClick:()=>Q("crNumber"),className:"text-xs hover:text-blue-600",title:"Filter by CR Number",children:"\ud83d\udd0d"}),V.crNumber&&(0,u.jsx)("input",{type:"text",value:H.crNumber,onChange:e=>B(o(o({},H),{},{crNumber:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Date"}),(0,u.jsx)("button",{onClick:()=>Q("crDate"),className:"text-xs hover:text-blue-600",title:"Filter by CR Date",children:"\ud83d\udd0d"}),V.crDate&&(0,u.jsx)("input",{type:"text",value:H.crDate,onChange:e=>B(o(o({},H),{},{crDate:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Sector"}),(0,u.jsx)("button",{onClick:()=>Q("sector"),className:"text-xs hover:text-blue-600",title:"Filter by Sector",children:"\ud83d\udd0d"}),V.sector&&(0,u.jsxs)("select",{value:H.sector,onChange:e=>B(o(o({},H),{},{sector:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),a.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]})}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Proposal"}),(0,u.jsx)("button",{onClick:()=>Q("proposal"),className:"text-xs hover:text-blue-600",title:"Filter by Proposal",children:"\ud83d\udd0d"}),V.proposal&&(0,u.jsx)("input",{type:"text",value:H.proposal,onChange:e=>B(o(o({},H),{},{proposal:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Cost"}),(0,u.jsx)("button",{onClick:()=>Q("cost"),className:"text-xs hover:text-blue-600",title:"Filter by Cost",children:"\ud83d\udd0d"}),V.cost&&(0,u.jsx)("input",{type:"text",value:H.cost,onChange:e=>B(o(o({},H),{},{cost:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Locality"}),(0,u.jsx)("button",{onClick:()=>Q("locality"),className:"text-xs hover:text-blue-600",title:"Filter by Locality",children:"\ud83d\udd0d"}),V.locality&&(0,u.jsx)("input",{type:"text",value:H.locality,onChange:e=>B(o(o({},H),{},{locality:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Lat/Long"}),(0,u.jsx)("button",{onClick:()=>Q("latLong"),className:"text-xs hover:text-blue-600",title:"Filter by Lat/Long",children:"\ud83d\udd0d"}),V.latLong&&(0,u.jsx)("input",{type:"text",value:H.latLong,onChange:e=>B(o(o({},H),{},{latLong:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Priority"}),(0,u.jsx)("button",{onClick:()=>Q("priority"),className:"text-xs hover:text-blue-600",title:"Filter by Priority",children:"\ud83d\udd0d"}),V.priority&&(0,u.jsx)("input",{type:"text",value:H.priority,onChange:e=>B(o(o({},H),{},{priority:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Status"}),(0,u.jsx)("button",{onClick:()=>Q("status"),className:"text-xs hover:text-blue-600",title:"Filter by Status",children:"\ud83d\udd0d"}),V.status&&(0,u.jsxs)("select",{value:H.status,onChange:e=>B(o(o({},H),{},{status:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),s.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]}),(H.crNumber||H.crDate||H.sector||H.status||H.proposal||H.cost||H.locality||H.latLong||H.priority)&&(0,u.jsx)("button",{onClick:()=>{B({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),$({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1})},className:"text-xs text-blue-600 hover:text-blue-800 px-1 ml-1",title:"Clear Filters",children:"\u2715"})]})}),"pending"===W&&(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Actions"}),("rejected"===W||"sentBackRejected"===W)&&(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Remarks"})]})}),(0,u.jsx)("tbody",{children:(()=>{if(0===t.length){const e="pending"===W||"rejected"===W||"sentBackRejected"===W?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}if("noOfCrs"===W){const e={};t.forEach(t=>{const r=(t.crNumber||"").trim().toUpperCase()||"__NO_CR__";e[r]||(e[r]=[]),e[r].push(t)});const r=Object.values(e).filter(e=>"__NO_CR__"!==((e[0].crNumber||"").trim().toUpperCase()||"__NO_CR__"));if(0===r.length){const e="pending"===W||"rejected"===W||"sentBackRejected"===W?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}let n=0;return r.map(e=>e.map((e,t)=>{const r=0===t;return r&&n++,(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?n:""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?e.crNumber||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?e.crDate||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?e.sector:""}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):(0,u.jsx)("span",{className:"text-gray-400",children:"No report"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0===t&&1===n&&console.log("\ud83d\udd0d ENCPH Table - Rendering files for submission:",{id:e.id,hasCommitteeReport:!!e.committeeReport,hasCouncilResolution:!!e.councilResolution,committeeReportType:e.committeeReport?typeof e.committeeReport:"null",councilResolutionType:e.councilResolution?typeof e.councilResolution:"null"}),(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"}))}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.status||"Pending"})]},e.id)})).flat()}return"allWorks"===W?t.map((e,t)=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):(0,u.jsx)("span",{className:"text-gray-400",children:"No report"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.status||"Pending"})]},e.id)):t.map((e,t)=>{return(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):(0,u.jsx)("span",{className:"text-gray-400",children:"No report"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.status||"Pending"}),"pending"===W&&(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{const t=n.find(t=>t.id===e.id)||e;console.log("\ud83d\udd0d ENCPH openPreview - Original sub:",e),console.log("\ud83d\udd0d ENCPH openPreview - Fresh sub from array:",t),console.log("\ud83d\udd0d ENCPH openPreview - Files check:",{workImage:t.workImage instanceof File,detailedReport:t.detailedReport instanceof File,committeeReport:t.committeeReport instanceof File,councilResolution:t.councilResolution instanceof File,workImageExists:!!t.workImage,detailedReportExists:!!t.detailedReport,committeeReportExists:!!t.committeeReport,councilResolutionExists:!!t.councilResolution}),console.log("\ud83d\udd0d ENCPH openPreview - File Details:",{workImage:t.workImage?t.workImage instanceof File?"File: ".concat(t.workImage.name):typeof t.workImage:"null",detailedReport:t.detailedReport?t.detailedReport instanceof File?"File: ".concat(t.detailedReport.name):typeof t.detailedReport:"null",committeeReport:t.committeeReport?t.committeeReport instanceof File?"File: ".concat(t.committeeReport.name):typeof t.committeeReport:"null",councilResolution:t.councilResolution?t.councilResolution instanceof File?"File: ".concat(t.councilResolution.name):typeof t.councilResolution:"null"}),console.log("\ud83d\udd0d ENCPH openPreview - Original sub Files:",{workImage:e.workImage?e.workImage instanceof File?"File: ".concat(e.workImage.name):typeof e.workImage:"null",detailedReport:e.detailedReport?e.detailedReport instanceof File?"File: ".concat(e.detailedReport.name):typeof e.detailedReport:"null",committeeReport:e.committeeReport?e.committeeReport instanceof File?"File: ".concat(e.committeeReport.name):typeof e.committeeReport:"null",councilResolution:e.councilResolution?e.councilResolution instanceof File?"File: ".concat(e.councilResolution.name):typeof e.councilResolution:"null"});const r=o(o({},t),{},{workImage:t.workImage||e.workImage||null,detailedReport:t.detailedReport||e.detailedReport||null,committeeReport:t.committeeReport||e.committeeReport||null,councilResolution:t.councilResolution||e.councilResolution||null});y(r),w({sector:r.sector||"",proposal:r.proposal||"",cost:r.cost||0,locality:r.locality||"",latlong:r.latlong||"",priority:r.priority||"",crNumber:r.crNumber||"",crDate:r.crDate||"",remarks:r.remarks||"",workImage:r.workImage||null,detailedReport:r.detailedReport||null,committeeReport:r.committeeReport||null,councilResolution:r.councilResolution||null}),C(!0)})(e),className:"px-2 py-1 bg-indigo-600 text-white rounded text-xs",children:"Review"}),(0,u.jsx)("button",{onClick:()=>(e=>{const t=n.find(t=>t.id===e);t&&(_(!1),C(!1),y(t),A(!0),z(""))})(e.id),disabled:(r=e.status,["Forwarded to CDMA","CDMA Approved","ENCPH Rejected"].includes(r)),className:"px-2 py-1 text-xs rounded ".concat(["Forwarded to CDMA","CDMA Approved"].includes(e.status)?"bg-gray-300":"bg-green-600 text-white"),children:"Approve"}),(0,u.jsx)("button",{onClick:()=>(e=>{const t=n.find(t=>t.id===e);t&&(A(!1),C(!1),y(t),_(!0),T(""))})(e.id),disabled:"ENCPH Rejected"===e.status,className:"px-2 py-1 text-xs rounded ".concat("ENCPH Rejected"===e.status?"bg-gray-300":"bg-red-600 text-white"),children:"Reject"})]})}),("rejected"===W||"sentBackRejected"===W)&&(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600 max-w-xs truncate align-top",title:e.remarks||"-",children:e.remarks||"-"})]},e.id);var r})})()})]})})]})})(),O&&j&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:"Approve Work"}),(0,u.jsx)("button",{onClick:()=>{A(!1),z(""),y(null)},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"CR Number:"})," ",j.crNumber||"-"]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",j.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",j.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(j.cost)]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"text-sm text-gray-600 font-medium",children:["Verification Note ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:6,value:M,onChange:e=>z(e.target.value),placeholder:"Enter verification note (required)...",required:!0})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{A(!1),z(""),y(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{j&&(M&&""!==M.trim()?(a(e=>{const t=e.find(e=>e.id===j.id);return e.map(e=>e.id===j.id?o(o({},e),{},{status:"Forwarded to CDMA",forwardedTo:{department:"Administration",section:"CDMA",remarks:M},remarks:M,workImage:j.workImage||e.workImage||(null===t||void 0===t?void 0:t.workImage)||null,detailedReport:j.detailedReport||e.detailedReport||(null===t||void 0===t?void 0:t.detailedReport)||null,committeeReport:j.committeeReport||e.committeeReport||(null===t||void 0===t?void 0:t.committeeReport)||null,councilResolution:j.councilResolution||e.councilResolution||(null===t||void 0===t?void 0:t.councilResolution)||null}):e)}),A(!1),y(null),z(""),alert("Forwarded successfully!"),P("\u2705 Successfully Approved and Forwarded to CDMA!"),setTimeout(()=>P(""),5e3)):alert("Please enter Verification Note before approving."))},className:"px-5 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm Approval & Forward to CDMA"})]})]})}),D&&j&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:"Reject Work"}),(0,u.jsx)("button",{onClick:()=>{_(!1),T(""),y(null)},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"CR Number:"})," ",j.crNumber||"-"]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",j.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",j.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(j.cost)]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Required)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:6,value:I,onChange:e=>T(e.target.value),placeholder:"Please enter reason for rejection...",required:!0})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{_(!1),T(""),y(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{I&&j?(a(e=>{const t=e.find(e=>e.id===j.id);return e.map(e=>e.id===j.id?o(o({},e),{},{status:"ENCPH Rejected",remarks:I,rejectedBy:"ENCPH",workImage:j.workImage||e.workImage||(null===t||void 0===t?void 0:t.workImage)||null,detailedReport:j.detailedReport||e.detailedReport||(null===t||void 0===t?void 0:t.detailedReport)||null,committeeReport:j.committeeReport||e.committeeReport||(null===t||void 0===t?void 0:t.committeeReport)||null,councilResolution:j.councilResolution||e.councilResolution||(null===t||void 0===t?void 0:t.councilResolution)||null}):e)}),F("Work rejected and sent back to SEPH."),setTimeout(()=>{F(""),_(!1),y(null),T("")},1500)):alert("Please enter remarks before rejecting.")},className:"px-5 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Submit Rejection"})]})]})}),"pending"===W&&b.length>0&&(0,u.jsxs)("div",{className:"mt-6",children:[(0,u.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Rejected by ENCPH"}),(0,u.jsx)("div",{className:"overflow-auto max-h-48",children:(0,u.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,u.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"CR Number"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"CR Date"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Sector"}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Proposal"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Cost"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Locality"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Lat/Long"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Priority"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Status"}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Remarks"})]})}),(0,u.jsx)("tbody",{children:b.map((e,t)=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs",children:(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs text-red-700",children:"Rejected by ENCPH"}),(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600 max-w-xs truncate",title:e.remarks||"-",children:e.remarks||"-"})]},e.id))})]})})]}),k&&j&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow max-w-4xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,u.jsx)("h3",{className:"font-semibold text-lg",children:"Work Details Review"}),(0,u.jsx)("button",{onClick:()=>C(!1),className:"px-3 py-1 bg-red-500 text-white rounded",children:"Close"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[["sector","proposal","cost","locality","priority"].map(e=>(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 capitalize",children:e}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:N[e],onChange:t=>w(o(o({},N),{},{[e]:t.target.value}))})]},e)),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Latitude/Longitude or Google Maps URL"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:N.latlong||"",onChange:e=>w(o(o({},N),{},{latlong:e.target.value})),rows:2})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Number"}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:N.crNumber||"",onChange:e=>w(o(o({},N),{},{crNumber:e.target.value}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Date"}),(0,u.jsx)("input",{type:"date",className:"w-full border p-2 rounded mt-1",value:N.crDate||"",onChange:e=>w(o(o({},N),{},{crDate:e.target.value}))})]}),(()=>{const e=N.workImage||j.workImage,t=s(e);return t&&(0,u.jsxs)("div",{className:"md:col-span-2 mt-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Work Image"}),(0,u.jsx)("img",{src:t,alt:"",className:"mt-2 rounded max-h-60",onError:e=>{e.target.style.display="none"}})]})})()]}),(0,u.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-sm text-gray-700",children:"Attached Files"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Work Image"}),(()=>{const e=N.workImage||j.workImage,t=s(e);return t?(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("img",{src:t,alt:"Work",className:"rounded max-h-40 border",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="block")}}),(0,u.jsx)("div",{style:{display:"none"},className:"text-sm text-gray-500",children:"Image preview unavailable"})]}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No image attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Detailed Estimation Report"}),(()=>{const e=N.detailedReport||j.detailedReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Committee Report"}),(()=>{const e=N.committeeReport||j.committeeReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Council Resolution Report"}),(()=>{const e=N.councilResolution||j.councilResolution,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]})]})]}),(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"ENCPH Remarks"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:N.remarks,onChange:e=>w(o(o({},N),{},{remarks:e.target.value}))})]}),(0,u.jsx)("div",{className:"flex justify-end mt-4",children:(0,u.jsx)("button",{onClick:()=>{j&&(a(e=>e.map(e=>e.id===j.id?o(o(o({},e),N),{},{remarks:N.remarks,workImage:N.workImage||e.workImage,detailedReport:N.detailedReport||e.detailedReport,committeeReport:N.committeeReport||e.committeeReport,councilResolution:N.councilResolution||e.councilResolution}):e)),S("Changes saved successfully."),setTimeout(()=>S(""),1500),C(!1))},className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save Changes"})})]})})]})})})]})]})}function Xe(e){let{user:t,logout:r,forwardedSubmissions:n,setForwardedSubmissions:a}=e;const l=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0).replace("INR","\u20b9"),s=e=>e?e instanceof File?URL.createObjectURL(e):"string"===typeof e?e:null:null,i=e=>{if(!e)return!1;const t=["jpg","jpeg","png","gif","webp","bmp","svg"],r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml"];if(e instanceof File){var n;const a=(null===(n=(e.name||"").split(".").pop())||void 0===n?void 0:n.toLowerCase())||"";return t.includes(a)||r.includes(e.type)}if("string"===typeof e){var a;if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();return r.some(t=>e.includes(t.split("/")[1]))}}const n=(null===(a=e.split(".").pop())||void 0===a?void 0:a.toLowerCase())||"";return t.includes(n)}return!1},d=e=>{let{file:t,defaultName:r="document.pdf"}=e;const[n,a]=(0,c.useState)(!1);if(!t)return(0,u.jsx)("span",{className:"text-gray-400 text-xs",children:"No file"});const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document";if(!e)return null;let r=t,n=null,a="PDF";if(e instanceof File){var l;r=e.name||t,n=e.size;const s=(null===(l=r.split(".").pop())||void 0===l?void 0:l.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===s?"PDF":["doc","docx"].includes(s)?"DOC":s.toUpperCase()||"FILE"}else if("string"===typeof e){if(e.startsWith("data:")){const t=e.match(/data:([^;]+);/);if(t){const e=t[1].toLowerCase();a=e.includes("pdf")?"PDF":e.includes("image")?"IMAGE":e.includes("document")||e.includes("msword")?"DOC":"FILE"}n=Math.round(3*e.length/4)}else{var s;const t=(null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase())||"";a=i(e)?"IMAGE":"pdf"===t?"PDF":["doc","docx"].includes(t)?"DOC":t.toUpperCase()||"FILE"}r=t}return{fileName:r,fileSize:n,fileType:a}}(t,r),o=s(t),d=e=>{e.preventDefault(),o&&window.open(o,"_blank")};return i(t)&&!n&&o?(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px] overflow-hidden",children:[(0,u.jsx)("img",{src:o,alt:l.fileName,className:"w-full h-16 object-cover rounded mb-1",onError:()=>a(!0)}),(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName})]}):(0,u.jsxs)("div",{onClick:d,className:"bg-white rounded shadow-sm border border-gray-200 p-1 cursor-pointer hover:shadow-md transition-shadow max-w-[70px]",children:[(0,u.jsx)("div",{className:"w-full h-8 rounded mb-1 overflow-hidden relative flex items-center justify-center ".concat("PDF"===l.fileType?"bg-gradient-to-br from-red-100 to-red-200":"DOC"===l.fileType||"DOCX"===l.fileType?"bg-gradient-to-br from-blue-100 to-blue-200":"bg-gradient-to-br from-gray-100 to-gray-200"),children:(0,u.jsx)("div",{className:"text-[10px] font-bold ".concat("PDF"===l.fileType?"text-red-600":"DOC"===l.fileType||"DOCX"===l.fileType?"text-blue-600":"text-gray-700"),children:l.fileType})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"text-[8px] font-medium text-gray-900 truncate",title:l.fileName,children:l.fileName}),l.fileSize&&(0,u.jsx)("div",{className:"text-[7px] text-gray-500",children:(p=l.fileSize,p?p<1024?p+" B":p<1048576?(p/1024).toFixed(1)+" KB":(p/1048576).toFixed(1)+" MB":"")})]})]});var p},[x,f]=(0,c.useState)([]),[h,g]=(0,c.useState)([]),[b,v]=(0,c.useState)([]),[j,y]=(0,c.useState)(null),[N,w]=(0,c.useState)(null),[k,C]=(0,c.useState)(!1),[R,S]=(0,c.useState)(""),[E,P]=(0,c.useState)(""),[L,F]=(0,c.useState)(""),[D,_]=(0,c.useState)(!1),[I,T]=(0,c.useState)(""),[O,A]=(0,c.useState)(!1),[M,z]=(0,c.useState)(""),[W,U]=(0,c.useState)("pending"),[H,B]=(0,c.useState)("dashboard"),[V,$]=(0,c.useState)(!0),[Q,G]=(0,c.useState)({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),[q,K]=(0,c.useState)({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1}),X=e=>{K(t=>o(o({},t),{},{[e]:!t[e]}))},J=(0,c.useRef)([]);(0,c.useEffect)(()=>{const e=n.filter(e=>{var t;const r=(e.status||"").trim(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim();if(["CDMA Approved","CDMA Rejected"].includes(r))return!1;const a=r.toLowerCase();return!!a.includes("forwarded to cdma")||(!!n.toLowerCase().includes("cdma")||!(!a.startsWith("forwarded to")||!n.toLowerCase().includes("cdma")))});f(e);const t=n.filter(e=>"CDMA Approved"===e.status);g(t);const r=n.filter(e=>"CDMA Rejected"===e.status);v(r)},[n]);const Y=e=>{let t=[];switch(e){case"pending":default:t=x;break;case"allWorks":t=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to cdma")||n.includes("cdma")||"cdma approved"===r||"cdma rejected"===r});break;case"approved":t=h;break;case"rejected":t=b;break;case"noOfCrs":t=n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to cdma")||n.includes("cdma")||"cdma approved"===r||"cdma rejected"===r})}return[...t].sort((e,t)=>(Number(e.priority)||0)-(Number(t.priority)||0))};(0,c.useEffect)(()=>()=>{J.current.forEach(e=>URL.revokeObjectURL(e))},[]);const Z=oe(),ee=le();(0,c.useEffect)(()=>{"/"!==ee.pathname&&window.history.pushState(null,"",window.location.pathname)},[ee.pathname]),(0,c.useEffect)(()=>{const e=e=>{if("/"!==ee.pathname){window.confirm("Are you sure you want to logout?")?(null===r||void 0===r||r(),Z("/",{replace:!0})):window.history.pushState(null,"",window.location.pathname)}};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[ee.pathname,r,Z]),(0,c.useEffect)(()=>{if("/"===ee.pathname&&window.history.state&&document.referrer&&!document.referrer.includes("/login")){window.confirm("Are you sure you want to logout?")?null===r||void 0===r||r():window.history.go(1)}},[ee.pathname,r]);return(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[(0,u.jsx)("div",{className:"fixed top-0 left-0 right-0 w-full bg-white shadow-md z-50 p-6 pb-0",children:(0,u.jsx)(p,{title:"15th Finance Commission",user:t,onLogout:()=>{window.confirm("Are you sure you want to logout?")&&(null===r||void 0===r||r(),window.location.href="/")}})}),(0,u.jsxs)("div",{className:"flex items-start relative pt-20 overflow-x-hidden",children:[(0,u.jsx)(m,{menuItems:[{id:"dashboard",label:"Dashboard",icon:"\ud83d\udcca"},{id:"reports",label:"Reports",icon:"\ud83d\udcc4"},{id:"gos",label:"GO's",icon:"\ud83d\udccb"},{id:"circular",label:"Circular & Proceedings",icon:"\ud83d\udce2"},{id:"guidelines",label:"Guidelines",icon:"\ud83d\udcd0"}],selectedMenuItem:H,onMenuItemSelect:B,isMenuOpen:V,setIsMenuOpen:$}),(0,u.jsx)("div",{className:"flex-1 p-6 pt-4 transition-all duration-300 min-w-0 ".concat(V?"ml-64":"ml-0"),children:(0,u.jsx)("div",{className:"max-w-[95%] mx-auto",children:(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border",children:[(0,u.jsx)("h2",{className:"font-semibold text-gray-700 mb-4",children:"CDMA Dashboard"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-6",children:[(0,u.jsxs)("div",{onClick:()=>U("noOfCrs"),className:"bg-blue-50 border border-blue-200 rounded-lg p-3 cursor-pointer hover:bg-blue-100 transition ".concat("noOfCrs"===W?"ring-2 ring-blue-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"No. of CR's"}),(0,u.jsx)("div",{className:"text-xl font-bold text-blue-700",children:(()=>{const e=Y("noOfCrs"),t={};return e.forEach(e=>{const r=(e.crNumber||"").trim().toUpperCase()||"__NO_CR__";t[r]||(t[r]=[]),t[r].push(e)}),Object.keys(t).filter(e=>"__NO_CR__"!==e).length})()})]}),(0,u.jsxs)("div",{onClick:()=>U("allWorks"),className:"bg-purple-50 border border-purple-200 rounded-lg p-3 cursor-pointer hover:bg-purple-100 transition ".concat("allWorks"===W?"ring-2 ring-purple-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-purple-600 font-medium mb-1",children:"No. of Works"}),(0,u.jsx)("div",{className:"text-xl font-bold text-purple-700",children:n.filter(e=>{var t;const r=(e.status||"").trim().toLowerCase(),n=((null===(t=e.forwardedTo)||void 0===t?void 0:t.section)||"").trim().toLowerCase();return r.includes("forwarded to cdma")||n.includes("cdma")||"cdma approved"===r||"cdma rejected"===r}).length})]}),(0,u.jsxs)("div",{onClick:()=>U("pending"),className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 cursor-pointer hover:bg-yellow-100 transition ".concat("pending"===W?"ring-2 ring-yellow-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-yellow-600 font-medium mb-1",children:"No. of Pending"}),(0,u.jsx)("div",{className:"text-xl font-bold text-yellow-700",children:x.length})]}),(0,u.jsxs)("div",{onClick:()=>U("approved"),className:"bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition ".concat("approved"===W?"ring-2 ring-green-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-green-600 font-medium mb-1",children:"No. of Approved"}),(0,u.jsx)("div",{className:"text-xl font-bold text-green-700",children:h.length})]}),(0,u.jsxs)("div",{onClick:()=>U("rejected"),className:"bg-red-50 border border-red-200 rounded-lg p-3 cursor-pointer hover:bg-red-100 transition ".concat("rejected"===W?"ring-2 ring-red-500":""),children:[(0,u.jsx)("div",{className:"text-xs text-red-600 font-medium mb-1",children:"No. of Rejected"}),(0,u.jsx)("div",{className:"text-xl font-bold text-red-700",children:b.length})]})]}),R&&(0,u.jsx)("div",{className:"p-2 bg-blue-50 border border-blue-200 text-blue-700 rounded mb-2",children:R}),E&&(0,u.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 text-green-700 rounded mb-2",children:E}),L&&(0,u.jsx)("div",{className:"p-2 bg-red-50 border border-red-200 text-red-700 rounded mb-2",children:L}),(()=>{const e=Y(W),t=e.filter(e=>{if(Q.crNumber&&!(e.crNumber||"").toLowerCase().includes(Q.crNumber.toLowerCase()))return!1;if(Q.crDate&&!(e.crDate||"").toLowerCase().includes(Q.crDate.toLowerCase()))return!1;if(Q.sector&&e.sector!==Q.sector)return!1;if(Q.status&&e.status!==Q.status)return!1;if(Q.proposal&&!(e.proposal||"").toLowerCase().includes(Q.proposal.toLowerCase()))return!1;if(Q.cost&&!l(e.cost||0).toLowerCase().includes(Q.cost.toLowerCase()))return!1;const t=(e=>{if(!e)return"";if(e.locality)return e.locality;if(e.area&&e.wardNo){const t=[];return e.area&&t.push(e.area),e.locality&&t.push(e.locality),e.wardNo&&t.push("Ward No: ".concat(e.wardNo)),t.join(", ")}return e.locality||"-"})(e).toLowerCase();if(Q.locality&&!t.includes(Q.locality.toLowerCase()))return!1;const r=(e.latlong||"").toLowerCase();return!(Q.latLong&&!r.includes(Q.latLong.toLowerCase()))&&!(Q.priority&&!(e.priority||"").toString().includes(Q.priority))});const r=(e=>{switch(e){case"pending":default:return"Pending Works (Forwarded from ENCPH)";case"allWorks":return"All Works";case"approved":return"Approved Tasks";case"rejected":return"Rejected Tasks";case"noOfCrs":return"All Works (by CR Number)"}})(W),a=(e=>{const t=new Set;return e.forEach(e=>{e.sector&&t.add(e.sector)}),Array.from(t).sort()})(e),s=(e=>{const t=new Set;return e.forEach(e=>{e.status&&t.add(e.status)}),Array.from(t).sort()})(e);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"text-sm text-gray-600 mb-4",children:r}),(0,u.jsx)("div",{className:"overflow-auto max-h-80",children:(0,u.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,u.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Number"}),(0,u.jsx)("button",{onClick:()=>X("crNumber"),className:"text-xs hover:text-blue-600",title:"Filter by CR Number",children:"\ud83d\udd0d"}),q.crNumber&&(0,u.jsx)("input",{type:"text",value:Q.crNumber,onChange:e=>G(o(o({},Q),{},{crNumber:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"CR Date"}),(0,u.jsx)("button",{onClick:()=>X("crDate"),className:"text-xs hover:text-blue-600",title:"Filter by CR Date",children:"\ud83d\udd0d"}),q.crDate&&(0,u.jsx)("input",{type:"text",value:Q.crDate,onChange:e=>G(o(o({},Q),{},{crDate:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Sector"}),(0,u.jsx)("button",{onClick:()=>X("sector"),className:"text-xs hover:text-blue-600",title:"Filter by Sector",children:"\ud83d\udd0d"}),q.sector&&(0,u.jsxs)("select",{value:Q.sector,onChange:e=>G(o(o({},Q),{},{sector:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),a.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]})}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Proposal"}),(0,u.jsx)("button",{onClick:()=>X("proposal"),className:"text-xs hover:text-blue-600",title:"Filter by Proposal",children:"\ud83d\udd0d"}),q.proposal&&(0,u.jsx)("input",{type:"text",value:Q.proposal,onChange:e=>G(o(o({},Q),{},{proposal:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Cost"}),(0,u.jsx)("button",{onClick:()=>X("cost"),className:"text-xs hover:text-blue-600",title:"Filter by Cost",children:"\ud83d\udd0d"}),q.cost&&(0,u.jsx)("input",{type:"text",value:Q.cost,onChange:e=>G(o(o({},Q),{},{cost:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Locality"}),(0,u.jsx)("button",{onClick:()=>X("locality"),className:"text-xs hover:text-blue-600",title:"Filter by Locality",children:"\ud83d\udd0d"}),q.locality&&(0,u.jsx)("input",{type:"text",value:Q.locality,onChange:e=>G(o(o({},Q),{},{locality:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Lat/Long"}),(0,u.jsx)("button",{onClick:()=>X("latLong"),className:"text-xs hover:text-blue-600",title:"Filter by Lat/Long",children:"\ud83d\udd0d"}),q.latLong&&(0,u.jsx)("input",{type:"text",value:Q.latLong,onChange:e=>G(o(o({},Q),{},{latLong:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Priority"}),(0,u.jsx)("button",{onClick:()=>X("priority"),className:"text-xs hover:text-blue-600",title:"Filter by Priority",children:"\ud83d\udd0d"}),q.priority&&(0,u.jsx)("input",{type:"text",value:Q.priority,onChange:e=>G(o(o({},Q),{},{priority:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-20 border p-0.5 rounded text-xs ml-1",placeholder:"Search...",autoFocus:!0})]})}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Status"}),(0,u.jsx)("button",{onClick:()=>X("status"),className:"text-xs hover:text-blue-600",title:"Filter by Status",children:"\ud83d\udd0d"}),q.status&&(0,u.jsxs)("select",{value:Q.status,onChange:e=>G(o(o({},Q),{},{status:e.target.value})),onClick:e=>e.stopPropagation(),className:"w-24 border p-0.5 rounded text-xs ml-1",autoFocus:!0,children:[(0,u.jsx)("option",{value:"",children:"All"}),s.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]}),(Q.crNumber||Q.crDate||Q.sector||Q.status||Q.proposal||Q.cost||Q.locality||Q.latLong||Q.priority)&&(0,u.jsx)("button",{onClick:()=>{G({crNumber:"",crDate:"",sector:"",status:"",proposal:"",cost:"",locality:"",latLong:"",priority:""}),K({crNumber:!1,crDate:!1,sector:!1,status:!1,proposal:!1,cost:!1,locality:!1,latLong:!1,priority:!1})},className:"text-xs text-blue-600 hover:text-blue-800 px-1 ml-1",title:"Clear Filters",children:"\u2715"})]})}),"pending"===W&&(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Actions"}),"rejected"===W&&(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Remarks"})]})}),(0,u.jsx)("tbody",{children:(()=>{if(0===t.length){const e="pending"===W||"rejected"===W?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}if("noOfCrs"===W){const e={};t.forEach(t=>{const r=(t.crNumber||"").trim().toUpperCase()||"__NO_CR__";e[r]||(e[r]=[]),e[r].push(t)});const r=Object.values(e).filter(e=>"__NO_CR__"!==((e[0].crNumber||"").trim().toUpperCase()||"__NO_CR__"));if(0===r.length){const e="pending"===W||"rejected"===W?16:15;return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:e,className:"p-8 text-center text-gray-500 text-sm",children:"No results found. Please try different search criteria."})})}let n=0;return r.map(e=>e.map((e,t)=>{const r=0===t;return r&&n++,(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?n:""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?e.crNumber||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?e.crDate||"-":""}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:r?e.sector:""}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):null}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.status||"Pending"})]},e.id)})).flat()}return"allWorks"===W?t.map((e,t)=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):(0,u.jsx)("span",{className:"text-gray-400",children:"No report"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.status||"Pending"})]},e.id)):t.map((e,t)=>{return(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate align-top",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):(0,u.jsx)("span",{className:"text-gray-400",children:"No report"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:e.status||"Forwarded from ENCPH"}),"pending"===W&&(0,u.jsx)("td",{className:"p-2 align-top",children:(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{const t=n.find(t=>t.id===e.id)||e,r=o(o({},t),{},{workImage:t.workImage||e.workImage||null,detailedReport:t.detailedReport||e.detailedReport||null,committeeReport:t.committeeReport||e.committeeReport||null,councilResolution:t.councilResolution||e.councilResolution||null});y(r),w({sector:r.sector||"",proposal:r.proposal||"",cost:r.cost||0,locality:r.locality||"",latlong:r.latlong||"",priority:r.priority||"",crNumber:r.crNumber||"",crDate:r.crDate||"",remarks:r.remarks||"",workImage:r.workImage||null,detailedReport:r.detailedReport||null,committeeReport:r.committeeReport||null,councilResolution:r.councilResolution||null}),C(!0)})(e),className:"px-2 py-1 bg-indigo-600 text-white rounded text-xs",children:"Review"}),(0,u.jsx)("button",{onClick:()=>(e=>{const t=n.find(t=>t.id===e);t&&(_(!1),C(!1),y(t),A(!0),z(""))})(e.id),disabled:(r=e.status,["CDMA Approved","CDMA Rejected"].includes(r)),className:"px-2 py-1 text-xs rounded ".concat("CDMA Approved"===e.status?"bg-gray-300":"bg-green-600 text-white"),children:"Approve"}),(0,u.jsx)("button",{onClick:()=>(e=>{const t=n.find(t=>t.id===e);t&&(A(!1),C(!1),y(t),_(!0),T(""))})(e.id),disabled:"CDMA Rejected"===e.status,className:"px-2 py-1 text-xs rounded ".concat("CDMA Rejected"===e.status?"bg-gray-300":"bg-red-600 text-white"),children:"Reject"})]})}),"rejected"===W&&(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600 max-w-xs truncate align-top",title:e.remarks||"-",children:e.remarks||"-"})]},e.id);var r})})()})]})})]})})(),O&&j&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:"Approve Work"}),(0,u.jsx)("button",{onClick:()=>{A(!1),z(""),y(null)},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"CR Number:"})," ",j.crNumber||"-"]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",j.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",j.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(j.cost)]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Optional)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:6,value:M,onChange:e=>z(e.target.value),placeholder:"Enter remarks for approval (optional)..."})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{A(!1),z(""),y(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{j&&(a(e=>e.map(e=>e.id===j.id?o(o({},e),{},{status:"CDMA Approved",remarks:M||""}):e)),A(!1),P("Work approved successfully by CDMA."),setTimeout(()=>P(""),1500),y(null),z(""))},className:"px-5 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm Approval"})]})]})}),D&&j&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-2xl w-full p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-lg",children:"Reject Work"}),(0,u.jsx)("button",{onClick:()=>{_(!1),T(""),y(null)},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Work Details:"}),(0,u.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"CR Number:"})," ",j.crNumber||"-"]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Sector:"})," ",j.sector]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Proposal:"})," ",j.proposal]}),(0,u.jsxs)("p",{className:"text-sm",children:[(0,u.jsx)("span",{className:"font-medium",children:"Cost:"})," ",l(j.cost)]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 font-medium",children:"Remarks (Required)"}),(0,u.jsx)("textarea",{className:"w-full border p-3 rounded mt-2 focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:6,value:I,onChange:e=>T(e.target.value),placeholder:"Please enter reason for rejection...",required:!0})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{_(!1),T(""),y(null)},className:"px-5 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{I&&j?(a(e=>e.map(e=>e.id===j.id?o(o({},e),{},{status:"CDMA Rejected",remarks:I,rejectedBy:"CDMA"}):e)),F("Work rejected and sent back to ENCPH."),setTimeout(()=>{F(""),_(!1),y(null),T("")},1500)):alert("Please enter remarks before rejecting.")},className:"px-5 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Submit Rejection"})]})]})}),"pending"===W&&b.length>0&&(0,u.jsxs)("div",{className:"mt-6",children:[(0,u.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Rejected by CDMA"}),(0,u.jsx)("div",{className:"overflow-auto max-h-48",children:(0,u.jsxs)("table",{className:"min-w-full text-sm border-collapse",children:[(0,u.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"S.No"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"CR Number"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"CR Date"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Sector"}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Proposal"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Cost"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Locality"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Lat/Long"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Priority"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Work Image"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Estimation Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Committee Report"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Council Resolution"}),(0,u.jsx)("th",{className:"p-2 text-left whitespace-nowrap text-xs",children:"Status"}),(0,u.jsx)("th",{className:"p-2 text-left text-xs",children:"Remarks"})]})}),(0,u.jsx)("tbody",{children:b.map((e,t)=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-2 text-xs",children:t+1}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.crNumber||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.crDate||"-"}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.sector}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate",title:e.proposal,children:e.proposal}),(0,u.jsx)("td",{className:"p-2 text-xs",children:l(e.cost)}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate",title:e.locality,children:e.locality}),(0,u.jsx)("td",{className:"p-2 text-xs max-w-xs truncate",title:e.latlong||"-",children:e.latlong?e.latlong.length>20?e.latlong.substring(0,20)+"...":e.latlong:"-"}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.priority}),(0,u.jsx)("td",{className:"p-2 text-xs",children:(0,u.jsx)(d,{file:e.workImage,defaultName:"work-image.jpg"})}),(0,u.jsx)("td",{className:"p-2 text-xs",children:e.detailedReport?(0,u.jsx)(d,{file:e.detailedReport,defaultName:"estimation-report.pdf"}):null}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.committeeReport,defaultName:"committee-report.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs align-top",children:(0,u.jsx)(d,{file:e.councilResolution,defaultName:"council-resolution.pdf"})}),(0,u.jsx)("td",{className:"p-2 text-xs text-red-700",children:"Rejected by CDMA"}),(0,u.jsx)("td",{className:"p-2 text-xs text-gray-600 max-w-xs truncate",title:e.remarks||"-",children:e.remarks||"-"})]},e.id))})]})})]}),k&&j&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow max-w-4xl w-full p-6 overflow-auto max-h-[90vh]",children:[(0,u.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,u.jsx)("h3",{className:"font-semibold text-lg",children:"Work Details Review"}),(0,u.jsx)("button",{onClick:()=>C(!1),className:"px-3 py-1 bg-red-500 text-white rounded",children:"Close"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[["sector","proposal","cost","locality","priority"].map(e=>(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600 capitalize",children:e}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:N[e],onChange:t=>w(o(o({},N),{},{[e]:t.target.value}))})]},e)),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Latitude/Longitude or Google Maps URL"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:N.latlong||"",onChange:e=>w(o(o({},N),{},{latlong:e.target.value})),rows:2})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Number"}),(0,u.jsx)("input",{className:"w-full border p-2 rounded mt-1",value:N.crNumber||"",onChange:e=>w(o(o({},N),{},{crNumber:e.target.value}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CR Date"}),(0,u.jsx)("input",{type:"date",className:"w-full border p-2 rounded mt-1",value:N.crDate||"",onChange:e=>w(o(o({},N),{},{crDate:e.target.value}))})]}),(()=>{const e=N.workImage||j.workImage,t=s(e);return t&&(0,u.jsxs)("div",{className:"md:col-span-2 mt-2",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"Work Image"}),(0,u.jsx)("img",{src:t,alt:"",className:"mt-2 rounded max-h-60",onError:e=>{e.target.style.display="none"}})]})})()]}),(0,u.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-sm text-gray-700",children:"Attached Files"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Work Image"}),(()=>{const e=N.workImage||j.workImage,t=s(e);return t?(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("img",{src:t,alt:"Work",className:"rounded max-h-40 border",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="block")}}),(0,u.jsx)("div",{style:{display:"none"},className:"text-sm text-gray-500",children:"Image preview unavailable"})]}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No image attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Detailed Estimation Report"}),(()=>{const e=N.detailedReport||j.detailedReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Committee Report"}),(()=>{const e=N.committeeReport||j.committeeReport,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]}),(0,u.jsxs)("div",{className:"border rounded p-3 bg-gray-50",children:[(0,u.jsx)("label",{className:"text-sm text-gray-700 font-medium block mb-2",children:"Council Resolution Report"}),(()=>{const e=N.councilResolution||j.councilResolution,t=s(e);return t?(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm hover:text-blue-800",children:["\ud83d\udcc4 View Report (",e instanceof File?e.name:"file",")"]})}):(0,u.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"No report attached"})})()]})]})]}),(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)("label",{className:"text-sm text-gray-600",children:"CDMA Remarks"}),(0,u.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:N.remarks,onChange:e=>w(o(o({},N),{},{remarks:e.target.value}))})]}),(0,u.jsx)("div",{className:"flex justify-end mt-4",children:(0,u.jsx)("button",{onClick:()=>{j&&(a(e=>e.map(e=>e.id===j.id?o(o(o({},e),N),{},{remarks:N.remarks,workImage:N.workImage||e.workImage,detailedReport:N.detailedReport||e.detailedReport,committeeReport:N.committeeReport||e.committeeReport,councilResolution:N.councilResolution||e.councilResolution}):e)),S("Changes saved successfully."),setTimeout(()=>S(""),1500),C(!1))},className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save Changes"})})]})})]})})})]})]})}const Je="forwardedSubmissions",Ye="forwardedSubmissions_timestamp",Ze=864e5;const et=function(){const[e,t]=(0,c.useState)(()=>{try{const e=localStorage.getItem(Je),t=localStorage.getItem(Ye);if(console.log("\ud83d\udd0c App.js loading from localStorage:",e?"found":"empty"),e&&t){const r=parseInt(t,10),n=Date.now(),a=n-r,l=a/36e5;if(console.log("\ud83d\udcc5 Data age:",{savedAt:new Date(r).toLocaleString(),currentTime:new Date(n).toLocaleString(),ageInHours:l.toFixed(2),ageInDays:(l/24).toFixed(2),isExpired:a>Ze}),a>Ze)return console.warn("\u26a0\ufe0f Stored data is older than 1 day, clearing localStorage"),localStorage.removeItem(Je),localStorage.removeItem(Ye),console.log("\ud83d\udcdd Initializing with empty array (data expired)"),[];const s=JSON.parse(e);return console.log("\u2705 Loaded submissions from localStorage:",{count:s.length,age:"".concat(l.toFixed(2)," hours"),expiresIn:"".concat(((Ze-a)/36e5).toFixed(2)," hours")}),s||[]}if(e){const t=JSON.parse(e);return console.log("\u2705 Loaded legacy submissions from localStorage (no timestamp):",t.length),localStorage.setItem(Ye,Date.now().toString()),t||[]}}catch(e){console.error("\u274c Error loading submissions from localStorage:",e)}return console.log("\ud83d\udcdd Initializing with empty array"),[]});(0,c.useEffect)(()=>{(async()=>{try{const r=e=>new Promise(t=>{if(e)if("string"!==typeof e)if(e instanceof File){const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>t(null),r.readAsDataURL(e)}else t(null);else t(e);else t(null)});let n=await Promise.all(e.map(async e=>{const t=o({},e);return t.workImage=await r(t.workImage),t.detailedReport=await r(t.detailedReport),t.committeeReport=await r(t.committeeReport),t.councilResolution=await r(t.councilResolution),t}));const a=4194304;let l=JSON.stringify(n),s=new Blob([l]).size;if(console.log("\ud83d\udcbe Attempting to save:",{submissions:n.length,dataSize:"".concat((s/1024/1024).toFixed(2)," MB"),maxSize:"".concat((a/1024/1024).toFixed(2)," MB")}),s>a){console.warn("\u26a0\ufe0f Data size exceeds limit, keeping only most recent submissions"),n.sort((e,t)=>(t.id||0)-(e.id||0));let e=[],r=0;for(let t of n){const n=JSON.stringify([...e,t]),l=new Blob([n]).size;if(!(l<=a))break;e.push(t),r=l}e.reverse(),n=e,l=JSON.stringify(n),s=new Blob([l]).size,console.warn("\u26a0\ufe0f Reduced to ".concat(e.length," most recent submissions (").concat((s/1024/1024).toFixed(2)," MB)")),setTimeout(()=>{t(n)},0)}localStorage.setItem(Je,l),localStorage.setItem(Ye,Date.now().toString()),console.log("\u2705 Saved submissions to localStorage:",{count:n.length,size:"".concat((s/1024/1024).toFixed(2)," MB"),timestamp:(new Date).toLocaleString(),expiresAt:new Date(Date.now()+Ze).toLocaleString()})}catch(r){if("QuotaExceededError"===r.name){console.error("\u274c localStorage quota exceeded. Attempting to reduce data size...");try{const r=e.sort((e,t)=>(t.id||0)-(e.id||0)).slice(0,50).reverse(),n=await Promise.all(r.map(async e=>{const t=o({},e);if(t.workImage instanceof File){const e=new FileReader;t.workImage=await new Promise(r=>{e.onload=()=>r(e.result),e.onerror=()=>r(null),e.readAsDataURL(t.workImage)})}if(t.detailedReport instanceof File){const e=new FileReader;t.detailedReport=await new Promise(r=>{e.onload=()=>r(e.result),e.onerror=()=>r(null),e.readAsDataURL(t.detailedReport)})}if(t.committeeReport instanceof File){const e=new FileReader;t.committeeReport=await new Promise(r=>{e.onload=()=>r(e.result),e.onerror=()=>r(null),e.readAsDataURL(t.committeeReport)})}if(t.councilResolution instanceof File){const e=new FileReader;t.councilResolution=await new Promise(r=>{e.onload=()=>r(e.result),e.onerror=()=>r(null),e.readAsDataURL(t.councilResolution)})}return t}));localStorage.setItem(Je,JSON.stringify(n)),localStorage.setItem(Ye,Date.now().toString()),console.warn("\u26a0\ufe0f Saved only ".concat(n.length," most recent submissions due to storage limit")),setTimeout(()=>{t(n)},0)}catch(n){console.error("\u274c Failed to save even reduced data:",n);try{localStorage.removeItem(Je),localStorage.removeItem(Ye),console.warn("\ud83d\uddd1\ufe0f Cleared localStorage to free up space")}catch(a){console.error("\u274c Failed to clear localStorage:",a)}}}else console.error("\u274c Error saving submissions to localStorage:",r)}})()},[e]);const r=e=>{t(t=>"function"===typeof e?e(t):e)},[n,a]=(0,c.useState)(null),[l,s]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{console.log("\ud83d\udd04 APP: Checking for existing session...");const e=Ae();if(e){console.log("\ud83d\udccb APP: Found stored user session"),console.log("   - User:",e.username),console.log("   - Role:",e.role),console.log("\ud83d\udd0d APP: Verifying token with server...");try{const e=await(async()=>{try{return await ze("/verify",{method:"GET"})}catch(e){throw Me(),e}})();e.success&&e.user?(console.log("\u2705 APP: Session restored successfully"),console.log("   - Verified user:",e.user.username),console.log("   - Role:",e.user.role),console.log("\u23f0 Session restored at:",(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})),a({role:e.user.role,username:e.user.username})):(console.log("\u274c APP: Token verification failed, clearing session"),Me())}catch(t){console.log("\u274c APP: Session restoration failed"),console.log("   - Error:",t.message),console.log("   - Clearing invalid session"),Me()}}else console.log("\u2139\ufe0f  APP: No stored session found");s(!1),console.log("\u2705 APP: Session check completed")})()},[]);const i=async()=>{console.log("\ud83d\udd04 APP: Logout initiated from App component"),await(async()=>{const e=Oe(),t=Ae();if(console.log("\n"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\udeaa FRONTEND: LOGOUT REQUEST INITIATED"),t&&(console.log("\ud83d\udc64 User:",t.username),console.log("\ud83c\udfad Role:",t.role)),console.log("\u23f0 Request Time:",(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})),e)try{const e=await ze("/logout",{method:"POST"});console.log("\u2705 FRONTEND: LOGOUT SUCCESSFUL"),console.log("   - Server confirmed logout"),e.logoutTime&&console.log("   - Logout Time:",e.logoutTime)}catch(r){console.log("\u26a0\ufe0f FRONTEND: Logout API error (clearing local auth anyway)"),console.log("   - Error:",r.message)}else console.log("\u2139\ufe0f  FRONTEND: No token found, clearing local auth");Me(),console.log("   - Local storage cleared"),console.log("   - Session terminated"),console.log("\u23f0 Client Logout Time:",(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\n")})(),a(null),console.log("\u2705 APP: User state cleared")};return l?(0,u.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600",children:(0,u.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):(0,u.jsx)($e,{children:(0,u.jsxs)(we,{children:[(0,u.jsx)(ye,{path:"/",element:(0,u.jsx)(Ue,{onLogin:a})}),(0,u.jsx)(ye,{path:"/admin",element:"engineer"===(null===n||void 0===n?void 0:n.role)?(0,u.jsx)(Le,{user:n,logout:i,forwardedSubmissions:e,setForwardedSubmissions:r}):(0,u.jsx)(je,{to:"/",replace:!0})}),(0,u.jsx)(ye,{path:"/commissioner",element:"Commissioner"===(null===n||void 0===n?void 0:n.role)?(0,u.jsx)(Fe,{user:n,logout:i,forwardedSubmissions:e,setForwardedSubmissions:r}):(0,u.jsx)(je,{to:"/",replace:!0})}),(0,u.jsx)(ye,{path:"/eeph",element:"eeph"===(null===n||void 0===n?void 0:n.role)?(0,u.jsx)(De,{user:n,logout:i,forwardedSubmissions:e,setForwardedSubmissions:r}):(0,u.jsx)(je,{to:"/",replace:!0})}),(0,u.jsx)(ye,{path:"/seph",element:"seph"===(null===n||void 0===n?void 0:n.role)?(0,u.jsx)(qe,{user:n,logout:i,forwardedSubmissions:e,setForwardedSubmissions:r}):(0,u.jsx)(je,{to:"/",replace:!0})}),(0,u.jsx)(ye,{path:"/encph",element:"encph"===(null===n||void 0===n?void 0:n.role)?(0,u.jsx)(Ke,{user:n,logout:i,forwardedSubmissions:e,setForwardedSubmissions:r}):(0,u.jsx)(je,{to:"/",replace:!0})}),(0,u.jsx)(ye,{path:"/cdma",element:"cdma"===(null===n||void 0===n?void 0:n.role)?(0,u.jsx)(Xe,{user:n,logout:i,forwardedSubmissions:e,setForwardedSubmissions:r}):(0,u.jsx)(je,{to:"/",replace:!0})}),(0,u.jsx)(ye,{path:"*",element:(0,u.jsx)(je,{to:"/",replace:!0})})]})})};r(391).createRoot(document.getElementById("root")).render((0,u.jsx)(c.StrictMode,{children:(0,u.jsx)(et,{})}))})();
//# sourceMappingURL=main.c4b51a22.js.map